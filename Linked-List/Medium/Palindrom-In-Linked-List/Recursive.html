<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Linked List Palindrome - Recursive Approach Whiteboard</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;600;700&family=Patrick+Hand&family=Fira+Code:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Patrick Hand", cursive;
        background: #1a1a2e;
        min-height: 100vh;
        overflow-x: hidden;
      }

      /* Chalkboard Container */
      .chalkboard {
        background: linear-gradient(
          135deg,
          #2d4a3e 0%,
          #1e3329 50%,
          #162419 100%
        );
        min-height: 100vh;
        padding: 30px;
        position: relative;
        overflow: hidden;
      }

      /* Wooden frame */
      .chalkboard::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border: 15px solid #8b4513;
        border-image: linear-gradient(
            135deg,
            #a0522d,
            #8b4513,
            #654321,
            #8b4513
          )
          1;
        pointer-events: none;
        z-index: 10;
      }

      /* Chalk dust texture */
      .chalkboard::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%' height='100%' filter='url(%23noise)'/%3E%3C/svg%3E");
        opacity: 0.08;
        pointer-events: none;
        z-index: 0;
      }

      .content {
        position: relative;
        z-index: 1;
        max-width: 1500px;
        margin: 0 auto;
      }

      /* Title - chalk style */
      .title {
        font-family: "Caveat", cursive;
        font-size: 3rem;
        font-weight: 700;
        color: #fff;
        text-align: center;
        margin-bottom: 8px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5),
          0 0 20px rgba(255, 255, 255, 0.1);
        transform: rotate(-0.5deg);
      }

      .subtitle {
        font-family: "Patrick Hand", cursive;
        font-size: 1.4rem;
        color: #ffd93d;
        text-align: center;
        margin-bottom: 25px;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        transform: rotate(0.3deg);
      }

      /* Example box */
      .example-box {
        background: rgba(255, 255, 255, 0.1);
        border: 2px dashed rgba(255, 255, 255, 0.5);
        border-radius: 8px;
        padding: 12px 25px;
        margin-bottom: 25px;
        display: inline-block;
        transform: rotate(-0.3deg);
      }

      .example-box span {
        font-family: "Fira Code", monospace;
        font-size: 1.1rem;
        color: #81ecec;
      }

      /* Main visualization area */
      .viz-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin-bottom: 25px;
      }

      @media (max-width: 1100px) {
        .viz-container {
          grid-template-columns: 1fr;
        }
      }

      /* Sections */
      .section {
        background: rgba(0, 0, 0, 0.25);
        border: 3px solid rgba(255, 255, 255, 0.3);
        border-radius: 12px;
        padding: 20px;
        position: relative;
      }

      .section-title {
        font-family: "Caveat", cursive;
        font-size: 1.6rem;
        font-weight: 600;
        color: #fff;
        margin-bottom: 15px;
        padding-bottom: 8px;
        border-bottom: 2px dashed rgba(255, 255, 255, 0.3);
        display: flex;
        align-items: center;
        gap: 10px;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
      }

      .section-title .icon {
        font-size: 1.4rem;
      }

      /* Linked List Visualization */
      .linked-list {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 5px;
        margin: 20px 0;
        flex-wrap: wrap;
      }

      .node {
        display: flex;
        align-items: center;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .node-box {
        width: 55px;
        height: 55px;
        background: rgba(255, 255, 255, 0.15);
        border: 3px solid rgba(255, 255, 255, 0.7);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: "Caveat", cursive;
        font-size: 1.9rem;
        font-weight: 700;
        color: #fff;
        position: relative;
        transition: all 0.3s ease;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
      }

      .node-box.front-pointer {
        background: rgba(46, 204, 113, 0.4);
        border-color: #2ecc71;
        box-shadow: 0 0 20px rgba(46, 204, 113, 0.6);
      }

      .node-box.current-recurse {
        background: rgba(241, 196, 15, 0.4);
        border-color: #f1c40f;
        box-shadow: 0 0 20px rgba(241, 196, 15, 0.6);
      }

      .node-box.comparing {
        background: rgba(155, 89, 182, 0.4);
        border-color: #9b59b6;
        box-shadow: 0 0 20px rgba(155, 89, 182, 0.6);
      }

      .node-box.matched {
        background: rgba(26, 188, 156, 0.4);
        border-color: #1abc9c;
      }

      .node-label {
        position: absolute;
        bottom: -22px;
        font-family: "Patrick Hand", cursive;
        font-size: 0.85rem;
        color: rgba(255, 255, 255, 0.6);
      }

      .arrow {
        font-size: 1.6rem;
        color: rgba(255, 255, 255, 0.6);
        margin: 0 2px;
        transition: all 0.3s ease;
      }

      .null-box {
        font-family: "Fira Code", monospace;
        font-size: 0.85rem;
        color: rgba(255, 255, 255, 0.5);
        padding: 8px 12px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 6px;
        border: 2px dashed rgba(255, 255, 255, 0.3);
      }

      /* Call Stack Visualization */
      .stack-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin: 15px 0;
      }

      .stack-label {
        font-family: "Caveat", cursive;
        font-size: 1.3rem;
        color: #e74c3c;
        margin-bottom: 10px;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
      }

      .stack {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
        max-width: 280px;
      }

      .stack-frame {
        width: 100%;
        padding: 10px 15px;
        margin: 3px 0;
        background: rgba(52, 73, 94, 0.6);
        border: 2px solid rgba(255, 255, 255, 0.4);
        border-radius: 8px;
        font-family: "Fira Code", monospace;
        font-size: 0.8rem;
        color: #fff;
        transition: all 0.4s ease;
        opacity: 0;
        transform: translateX(-30px);
        text-align: center;
      }

      .stack-frame.visible {
        opacity: 1;
        transform: translateX(0);
      }

      .stack-frame.active {
        background: rgba(241, 196, 15, 0.4);
        border-color: #f1c40f;
        box-shadow: 0 0 15px rgba(241, 196, 15, 0.5);
      }

      .stack-frame.unwinding {
        background: rgba(155, 89, 182, 0.4);
        border-color: #9b59b6;
        box-shadow: 0 0 15px rgba(155, 89, 182, 0.5);
      }

      .stack-frame.returned {
        background: rgba(46, 204, 113, 0.3);
        border-color: #2ecc71;
      }

      .stack-frame .frame-label {
        color: #ffd93d;
        font-weight: 500;
      }

      .stack-frame .frame-node {
        color: #81ecec;
      }

      .stack-frame .frame-result {
        color: #2ecc71;
        font-weight: bold;
      }

      /* Front Pointer Indicator */
      .front-pointer-display {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 15px;
        margin: 15px 0;
        padding: 12px 20px;
        background: rgba(46, 204, 113, 0.2);
        border: 2px solid #2ecc71;
        border-radius: 10px;
      }

      .front-pointer-display .label {
        font-family: "Fira Code", monospace;
        font-size: 1rem;
        color: #2ecc71;
      }

      .front-pointer-display .value {
        font-family: "Caveat", cursive;
        font-size: 1.8rem;
        font-weight: 700;
        color: #2ecc71;
        text-shadow: 0 0 10px rgba(46, 204, 113, 0.5);
      }

      /* Comparison Box */
      .comparison-box {
        display: none;
        flex-direction: column;
        align-items: center;
        margin: 15px 0;
        padding: 15px;
        background: rgba(155, 89, 182, 0.2);
        border: 2px solid #9b59b6;
        border-radius: 10px;
      }

      .comparison-box.visible {
        display: flex;
      }

      .comparison-title {
        font-family: "Caveat", cursive;
        font-size: 1.2rem;
        color: #9b59b6;
        margin-bottom: 10px;
      }

      .comparison-values {
        display: flex;
        align-items: center;
        gap: 15px;
        font-family: "Caveat", cursive;
        font-size: 1.8rem;
        font-weight: 700;
      }

      .comp-val {
        padding: 8px 18px;
        border-radius: 8px;
      }

      .comp-val.front {
        background: rgba(46, 204, 113, 0.4);
        border: 2px solid #2ecc71;
        color: #2ecc71;
      }

      .comp-val.current {
        background: rgba(155, 89, 182, 0.4);
        border: 2px solid #9b59b6;
        color: #d4a5e8;
      }

      .comp-operator {
        font-size: 2rem;
      }

      .comp-operator.equal {
        color: #2ecc71;
      }
      .comp-operator.not-equal {
        color: #e74c3c;
      }

      /* Code Panel */
      .code-panel {
        background: #1e272e;
        border-radius: 10px;
        padding: 15px;
        overflow: hidden;
        box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.3);
      }

      .code-header {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 12px;
        padding-bottom: 8px;
        border-bottom: 1px solid #3d3d3d;
      }

      .code-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
      }

      .code-dot.red {
        background: #ff5f56;
      }
      .code-dot.yellow {
        background: #ffbd2e;
      }
      .code-dot.green {
        background: #27c93f;
      }

      .code-title {
        font-family: "Fira Code", monospace;
        font-size: 0.75rem;
        color: #7f8c8d;
        margin-left: 10px;
      }

      .code-content {
        font-family: "Fira Code", monospace;
        font-size: 0.75rem;
        line-height: 1.7;
        color: #dfe6e9;
      }

      .code-line {
        padding: 2px 8px;
        margin: 1px 0;
        border-radius: 3px;
        transition: all 0.3s ease;
        white-space: pre;
      }

      .code-line.active {
        background: rgba(241, 196, 15, 0.25);
        border-left: 3px solid #f1c40f;
      }

      .code-line.active-unwind {
        background: rgba(155, 89, 182, 0.25);
        border-left: 3px solid #9b59b6;
      }

      .code-line .keyword {
        color: #fd79a8;
      }
      .code-line .function {
        color: #74b9ff;
      }
      .code-line .variable {
        color: #ffeaa7;
      }
      .code-line .operator {
        color: #81ecec;
      }
      .code-line .number {
        color: #ff7675;
      }
      .code-line .comment {
        color: #636e72;
        font-style: italic;
      }
      .code-line .boolean {
        color: #55efc4;
      }

      /* Status Box */
      .status-box {
        background: rgba(0, 0, 0, 0.3);
        border: 2px solid rgba(255, 255, 255, 0.4);
        border-radius: 10px;
        padding: 15px;
        margin: 15px 0;
        text-align: center;
      }

      .status-phase {
        font-family: "Caveat", cursive;
        font-size: 1.4rem;
        font-weight: 600;
        color: #ffd93d;
        margin-bottom: 6px;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
      }

      .status-message {
        font-family: "Patrick Hand", cursive;
        font-size: 1.15rem;
        color: #fff;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
      }

      /* Result Banner */
      .result-banner {
        display: none;
        text-align: center;
        padding: 20px;
        border-radius: 12px;
        margin: 15px auto;
        max-width: 400px;
        animation: bounceIn 0.6s ease;
      }

      .result-banner.success {
        display: block;
        background: rgba(46, 204, 113, 0.3);
        border: 3px solid #2ecc71;
        box-shadow: 0 0 30px rgba(46, 204, 113, 0.4);
      }

      .result-banner.failure {
        display: block;
        background: rgba(231, 76, 60, 0.3);
        border: 3px solid #e74c3c;
        box-shadow: 0 0 30px rgba(231, 76, 60, 0.4);
      }

      .result-icon {
        font-size: 2.5rem;
        margin-bottom: 8px;
      }

      .result-text {
        font-family: "Caveat", cursive;
        font-size: 1.8rem;
        font-weight: 700;
      }

      .result-banner.success .result-text {
        color: #2ecc71;
      }
      .result-banner.failure .result-text {
        color: #e74c3c;
      }

      @keyframes bounceIn {
        0% {
          transform: scale(0.3);
          opacity: 0;
        }
        50% {
          transform: scale(1.05);
        }
        70% {
          transform: scale(0.9);
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      /* Controls */
      .controls {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 12px;
        margin: 20px 0;
        flex-wrap: wrap;
      }

      .btn {
        font-family: "Patrick Hand", cursive;
        font-size: 1.1rem;
        padding: 10px 24px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        position: relative;
        overflow: hidden;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
      }

      .btn:active {
        transform: translateY(1px);
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      }

      .btn-prev {
        background: linear-gradient(145deg, #f39c12, #d68910);
        color: #fff;
      }

      .btn-next {
        background: linear-gradient(145deg, #00cec9, #00b894);
        color: #fff;
      }

      .btn-reset {
        background: linear-gradient(145deg, #e74c3c, #c0392b);
        color: #fff;
      }

      .btn-auto {
        background: linear-gradient(145deg, #9b59b6, #8e44ad);
        color: #fff;
      }

      .btn:disabled {
        opacity: 0.4;
        cursor: not-allowed;
        transform: none;
      }

      .step-counter {
        font-family: "Caveat", cursive;
        font-size: 1.3rem;
        color: #fff;
        padding: 8px 20px;
        background: rgba(255, 255, 255, 0.1);
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 25px;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
      }

      .speed-control {
        display: flex;
        align-items: center;
        gap: 8px;
        font-family: "Patrick Hand", cursive;
        font-size: 1rem;
        color: #fff;
      }

      .speed-control input {
        width: 80px;
        accent-color: #9b59b6;
      }

      /* Legend */
      .legend {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 15px;
        flex-wrap: wrap;
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: 6px;
        font-family: "Patrick Hand", cursive;
        font-size: 0.9rem;
        color: rgba(255, 255, 255, 0.8);
      }

      .legend-color {
        width: 18px;
        height: 18px;
        border-radius: 4px;
        border: 2px solid rgba(255, 255, 255, 0.5);
      }

      .legend-color.front {
        background: rgba(46, 204, 113, 0.6);
      }
      .legend-color.recurse {
        background: rgba(241, 196, 15, 0.6);
      }
      .legend-color.unwind {
        background: rgba(155, 89, 182, 0.6);
      }
      .legend-color.matched {
        background: rgba(26, 188, 156, 0.6);
      }

      /* Recursion direction indicator */
      .direction-indicator {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        margin: 10px 0;
        font-family: "Caveat", cursive;
        font-size: 1.3rem;
        color: rgba(255, 255, 255, 0.8);
      }

      .direction-indicator .arrow-down {
        color: #f1c40f;
        font-size: 1.5rem;
        animation: bounceDown 1s infinite;
      }

      .direction-indicator .arrow-up {
        color: #9b59b6;
        font-size: 1.5rem;
        animation: bounceUp 1s infinite;
      }

      @keyframes bounceDown {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(5px);
        }
      }

      @keyframes bounceUp {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-5px);
        }
      }

      .direction-indicator.hidden {
        opacity: 0;
      }

      /* Variable State */
      .var-state {
        margin-top: 15px;
        padding: 12px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .var-state-title {
        font-family: "Caveat", cursive;
        font-size: 1.2rem;
        color: #ffd93d;
        margin-bottom: 8px;
      }

      .var-state-content {
        font-family: "Fira Code", monospace;
        font-size: 0.85rem;
        color: #dfe6e9;
        line-height: 1.6;
      }

      .var-state-content .var-name {
        color: #ffeaa7;
      }
      .var-state-content .var-value {
        color: #81ecec;
      }
    </style>
  </head>
  <body>
    <div class="chalkboard">
      <div class="content">
        <h1 class="title">ðŸ”„ Linked List Palindrome Check</h1>
        <p class="subtitle">
          Recursive Approach: Recurse to End â†’ Compare on Unwind
        </p>

        <div class="example-box">
          <span>Input: head = [1, 2, 2, 1]</span>
        </div>

        <div class="viz-container">
          <!-- Left Panel: Visualization -->
          <div class="section">
            <h2 class="section-title">
              <span class="icon">ðŸ”—</span> Linked List
            </h2>

            <!-- Linked List -->
            <div class="linked-list" id="linkedList">
              <div class="node" data-index="0">
                <div class="node-box" id="node-0">
                  1<span class="node-label">node 0</span>
                </div>
                <span class="arrow">â†’</span>
              </div>
              <div class="node" data-index="1">
                <div class="node-box" id="node-1">
                  2<span class="node-label">node 1</span>
                </div>
                <span class="arrow">â†’</span>
              </div>
              <div class="node" data-index="2">
                <div class="node-box" id="node-2">
                  2<span class="node-label">node 2</span>
                </div>
                <span class="arrow">â†’</span>
              </div>
              <div class="node" data-index="3">
                <div class="node-box" id="node-3">
                  1<span class="node-label">node 3</span>
                </div>
                <span class="arrow">â†’</span>
              </div>
              <div class="null-box">null</div>
            </div>

            <!-- Front Pointer Display -->
            <div class="front-pointer-display" id="frontPointerDisplay">
              <span class="label">frontPointer â†’</span>
              <span class="value" id="frontPointerValue">node(1)</span>
            </div>

            <!-- Direction Indicator -->
            <div class="direction-indicator hidden" id="directionIndicator">
              <span class="arrow-down" id="arrowDown">â¬‡</span>
              <span id="directionText">Recursing down...</span>
              <span class="arrow-up" id="arrowUp" style="display: none">â¬†</span>
            </div>

            <!-- Call Stack -->
            <div class="stack-container">
              <div class="stack-label">ðŸ“š Call Stack</div>
              <div class="stack" id="callStack">
                <div class="stack-frame" id="frame-base">
                  <span class="frame-label">isPalindrome(head)</span>
                </div>
                <div class="stack-frame" id="frame-0">
                  <span class="frame-label">recursiveCheck(</span
                  ><span class="frame-node">node 0</span
                  ><span class="frame-label">)</span>
                  <span class="frame-result" id="result-0"></span>
                </div>
                <div class="stack-frame" id="frame-1">
                  <span class="frame-label">recursiveCheck(</span
                  ><span class="frame-node">node 1</span
                  ><span class="frame-label">)</span>
                  <span class="frame-result" id="result-1"></span>
                </div>
                <div class="stack-frame" id="frame-2">
                  <span class="frame-label">recursiveCheck(</span
                  ><span class="frame-node">node 2</span
                  ><span class="frame-label">)</span>
                  <span class="frame-result" id="result-2"></span>
                </div>
                <div class="stack-frame" id="frame-3">
                  <span class="frame-label">recursiveCheck(</span
                  ><span class="frame-node">node 3</span
                  ><span class="frame-label">)</span>
                  <span class="frame-result" id="result-3"></span>
                </div>
                <div class="stack-frame" id="frame-null">
                  <span class="frame-label">recursiveCheck(</span
                  ><span class="frame-node">null</span
                  ><span class="frame-label">)</span>
                  <span class="frame-result" id="result-null"></span>
                </div>
              </div>
            </div>

            <!-- Comparison Box -->
            <div class="comparison-box" id="comparisonBox">
              <div class="comparison-title">Comparing Values</div>
              <div class="comparison-values">
                <span class="comp-val front" id="compFront">1</span>
                <span class="comp-operator" id="compOp">==</span>
                <span class="comp-val current" id="compCurrent">1</span>
              </div>
            </div>

            <!-- Status Box -->
            <div class="status-box">
              <div class="status-phase" id="statusPhase">Ready</div>
              <div class="status-message" id="statusMessage">
                Click "Next Step" to begin the recursive traversal
              </div>
            </div>

            <!-- Result Banner -->
            <div class="result-banner" id="resultBanner">
              <div class="result-icon" id="resultIcon">âœ“</div>
              <div class="result-text" id="resultText">It's a Palindrome!</div>
            </div>

            <!-- Legend -->
            <div class="legend">
              <div class="legend-item">
                <div class="legend-color front"></div>
                <span>Front Pointer</span>
              </div>
              <div class="legend-item">
                <div class="legend-color recurse"></div>
                <span>Recursing</span>
              </div>
              <div class="legend-item">
                <div class="legend-color unwind"></div>
                <span>Unwinding</span>
              </div>
              <div class="legend-item">
                <div class="legend-color matched"></div>
                <span>Matched</span>
              </div>
            </div>
          </div>

          <!-- Right Panel: Code -->
          <div class="section">
            <h2 class="section-title">
              <span class="icon">ðŸ’»</span> Code Execution
            </h2>

            <div class="code-panel">
              <div class="code-header">
                <div class="code-dot red"></div>
                <div class="code-dot yellow"></div>
                <div class="code-dot green"></div>
                <span class="code-title">recursivePalindrome.js</span>
              </div>
              <div class="code-content">
                <div class="code-line" data-line="1">
                  <span class="keyword">function</span>
                  <span class="function">isPalindrome</span>(head) {
                </div>
                <div class="code-line" data-line="2">
                  <span class="keyword">let</span>
                  <span class="variable">frontPointer</span>
                  <span class="operator">=</span> head;
                </div>
                <div class="code-line" data-line="3"></div>
                <div class="code-line" data-line="4">
                  <span class="keyword">function</span>
                  <span class="function">recursiveCheck</span>(current) {
                </div>
                <div class="code-line" data-line="5">
                  <span class="comment">// Base case: reached end</span>
                </div>
                <div class="code-line" data-line="6">
                  <span class="keyword">if</span> (current
                  <span class="operator">===</span>
                  <span class="keyword">null</span>) {
                </div>
                <div class="code-line" data-line="7">
                  <span class="keyword">return</span>
                  <span class="boolean">true</span>;
                </div>
                <div class="code-line" data-line="8">}</div>
                <div class="code-line" data-line="9"></div>
                <div class="code-line" data-line="10">
                  <span class="comment">// Recurse to end first</span>
                </div>
                <div class="code-line" data-line="11">
                  <span class="keyword">if</span> (<span class="operator"
                    >!</span
                  ><span class="function">recursiveCheck</span>(current.next)) {
                </div>
                <div class="code-line" data-line="12">
                  <span class="keyword">return</span>
                  <span class="boolean">false</span>;
                </div>
                <div class="code-line" data-line="13">}</div>
                <div class="code-line" data-line="14"></div>
                <div class="code-line" data-line="15">
                  <span class="comment">// Compare on unwind</span>
                </div>
                <div class="code-line" data-line="16">
                  <span class="keyword">if</span> (current.val
                  <span class="operator">!==</span>
                  <span class="variable">frontPointer</span>.val) {
                </div>
                <div class="code-line" data-line="17">
                  <span class="keyword">return</span>
                  <span class="boolean">false</span>;
                </div>
                <div class="code-line" data-line="18">}</div>
                <div class="code-line" data-line="19"></div>
                <div class="code-line" data-line="20">
                  <span class="comment">// Advance front pointer</span>
                </div>
                <div class="code-line" data-line="21">
                  <span class="variable">frontPointer</span>
                  <span class="operator">=</span>
                  <span class="variable">frontPointer</span>.next;
                </div>
                <div class="code-line" data-line="22">
                  <span class="keyword">return</span>
                  <span class="boolean">true</span>;
                </div>
                <div class="code-line" data-line="23">}</div>
                <div class="code-line" data-line="24"></div>
                <div class="code-line" data-line="25">
                  <span class="keyword">return</span>
                  <span class="function">recursiveCheck</span>(head);
                </div>
                <div class="code-line" data-line="26">}</div>
              </div>
            </div>

            <!-- Variable State -->
            <div class="var-state">
              <div class="var-state-title">ðŸ“Š Current State</div>
              <div class="var-state-content" id="variableState">
                <div>
                  <span class="var-name">frontPointer</span> =
                  <span class="var-value">head (node 0, val=1)</span>
                </div>
                <div>
                  <span class="var-name">current</span> =
                  <span class="var-value">â€”</span>
                </div>
                <div>
                  <span class="var-name">stack depth</span> =
                  <span class="var-value">0</span>
                </div>
              </div>
            </div>

            <!-- Key Insight Box -->
            <div
              style="
                margin-top: 15px;
                padding: 12px;
                background: rgba(155, 89, 182, 0.2);
                border: 2px solid #9b59b6;
                border-radius: 8px;
              "
            >
              <div
                style="
                  font-family: 'Caveat', cursive;
                  font-size: 1.2rem;
                  color: #d4a5e8;
                  margin-bottom: 5px;
                "
              >
                ðŸ’¡ Key Insight
              </div>
              <div
                style="
                  font-family: 'Patrick Hand', cursive;
                  font-size: 1rem;
                  color: rgba(255, 255, 255, 0.85);
                "
              >
                Recursion gives us reverse access! When unwinding,
                <code style="color: #81ecec">current</code> traverses backwards
                (from end to start), while
                <code style="color: #2ecc71">frontPointer</code> moves forward.
              </div>
            </div>
          </div>
        </div>

        <!-- Controls -->
        <div class="controls">
          <button class="btn btn-prev" id="prevBtn" disabled>â—€ Prev</button>
          <button class="btn btn-next" id="nextBtn">Next â–¶</button>
          <button class="btn btn-reset" id="resetBtn">â†º Reset</button>
          <button class="btn btn-auto" id="autoBtn">â–¶â–¶ Auto</button>
          <span class="step-counter"
            >Step: <span id="stepNum">0</span> /
            <span id="totalSteps">14</span></span
          >
          <div class="speed-control">
            <span>Speed:</span>
            <input
              type="range"
              id="speedSlider"
              min="300"
              max="2000"
              value="900"
            />
            <span id="speedLabel">0.9s</span>
          </div>
        </div>
      </div>
    </div>

    <script>
      const listValues = [1, 2, 2, 1];
      let currentStep = 0;
      let isAutoPlaying = false;
      let autoPlayInterval = null;
      let speed = 900;

      const steps = [
        {
          phase: "Initialization",
          message: "Ready to start! Click 'Next Step' to begin.",
          lines: [],
          lineType: "normal",
          frontPointer: 0,
          currentNode: null,
          stackFrames: [],
          activeFrame: null,
          comparison: null,
          variables: {
            frontPointer: "head (node 0, val=1)",
            current: "â€”",
            stackDepth: "0",
          },
        },
        {
          phase: "Initialization",
          message:
            "Set frontPointer = head. This pointer will advance during unwinding.",
          lines: [1, 2],
          lineType: "normal",
          frontPointer: 0,
          currentNode: null,
          stackFrames: ["base"],
          activeFrame: "base",
          comparison: null,
          direction: "down",
          variables: {
            frontPointer: "node 0 (val=1)",
            current: "â€”",
            stackDepth: "1",
          },
        },
        {
          phase: "Recursing Down",
          message: "Call recursiveCheck(node 0). current.val = 1",
          lines: [25, 4],
          lineType: "normal",
          frontPointer: 0,
          currentNode: 0,
          stackFrames: ["base", "0"],
          activeFrame: "0",
          comparison: null,
          direction: "down",
          variables: {
            frontPointer: "node 0 (val=1)",
            current: "node 0 (val=1)",
            stackDepth: "2",
          },
        },
        {
          phase: "Recursing Down",
          message: "current !== null, so recurse deeper with current.next",
          lines: [6, 11],
          lineType: "normal",
          frontPointer: 0,
          currentNode: 0,
          stackFrames: ["base", "0"],
          activeFrame: "0",
          comparison: null,
          direction: "down",
          variables: {
            frontPointer: "node 0 (val=1)",
            current: "node 0 (val=1)",
            stackDepth: "2",
          },
        },
        {
          phase: "Recursing Down",
          message: "Call recursiveCheck(node 1). current.val = 2",
          lines: [11, 4],
          lineType: "normal",
          frontPointer: 0,
          currentNode: 1,
          stackFrames: ["base", "0", "1"],
          activeFrame: "1",
          comparison: null,
          direction: "down",
          variables: {
            frontPointer: "node 0 (val=1)",
            current: "node 1 (val=2)",
            stackDepth: "3",
          },
        },
        {
          phase: "Recursing Down",
          message: "Call recursiveCheck(node 2). current.val = 2",
          lines: [11, 4],
          lineType: "normal",
          frontPointer: 0,
          currentNode: 2,
          stackFrames: ["base", "0", "1", "2"],
          activeFrame: "2",
          comparison: null,
          direction: "down",
          variables: {
            frontPointer: "node 0 (val=1)",
            current: "node 2 (val=2)",
            stackDepth: "4",
          },
        },
        {
          phase: "Recursing Down",
          message: "Call recursiveCheck(node 3). current.val = 1",
          lines: [11, 4],
          lineType: "normal",
          frontPointer: 0,
          currentNode: 3,
          stackFrames: ["base", "0", "1", "2", "3"],
          activeFrame: "3",
          comparison: null,
          direction: "down",
          variables: {
            frontPointer: "node 0 (val=1)",
            current: "node 3 (val=1)",
            stackDepth: "5",
          },
        },
        {
          phase: "Base Case Reached",
          message: "Call recursiveCheck(null). Base case! Return true.",
          lines: [6, 7],
          lineType: "normal",
          frontPointer: 0,
          currentNode: null,
          stackFrames: ["base", "0", "1", "2", "3", "null"],
          activeFrame: "null",
          frameResult: { frame: "null", result: "â†’ true" },
          comparison: null,
          direction: "down",
          variables: {
            frontPointer: "node 0 (val=1)",
            current: "null",
            stackDepth: "6",
          },
        },
        {
          phase: "Unwinding - Compare",
          message:
            "Back in frame 3: Compare current.val (1) with frontPointer.val (1). Match! âœ“",
          lines: [15, 16],
          lineType: "unwind",
          frontPointer: 0,
          currentNode: 3,
          stackFrames: ["base", "0", "1", "2", "3"],
          activeFrame: "3",
          comparison: { front: 1, current: 1, match: true },
          direction: "up",
          variables: {
            frontPointer: "node 0 (val=1)",
            current: "node 3 (val=1)",
            stackDepth: "5",
          },
        },
        {
          phase: "Unwinding - Advance",
          message: "Advance frontPointer to next node. Return true.",
          lines: [21, 22],
          lineType: "unwind",
          frontPointer: 1,
          currentNode: 3,
          stackFrames: ["base", "0", "1", "2", "3"],
          activeFrame: "3",
          frameResult: { frame: "3", result: "â†’ true" },
          matchedNodes: [3],
          comparison: null,
          direction: "up",
          variables: {
            frontPointer: "node 1 (val=2)",
            current: "node 3 (val=1)",
            stackDepth: "5",
          },
        },
        {
          phase: "Unwinding - Compare",
          message:
            "Back in frame 2: Compare current.val (2) with frontPointer.val (2). Match! âœ“",
          lines: [15, 16],
          lineType: "unwind",
          frontPointer: 1,
          currentNode: 2,
          stackFrames: ["base", "0", "1", "2"],
          activeFrame: "2",
          comparison: { front: 2, current: 2, match: true },
          matchedNodes: [3],
          direction: "up",
          variables: {
            frontPointer: "node 1 (val=2)",
            current: "node 2 (val=2)",
            stackDepth: "4",
          },
        },
        {
          phase: "Unwinding - Advance",
          message: "Advance frontPointer to next node. Return true.",
          lines: [21, 22],
          lineType: "unwind",
          frontPointer: 2,
          currentNode: 2,
          stackFrames: ["base", "0", "1", "2"],
          activeFrame: "2",
          frameResult: { frame: "2", result: "â†’ true" },
          matchedNodes: [3, 2],
          comparison: null,
          direction: "up",
          variables: {
            frontPointer: "node 2 (val=2)",
            current: "node 2 (val=2)",
            stackDepth: "4",
          },
        },
        {
          phase: "Unwinding - Compare",
          message:
            "Back in frame 1: Compare current.val (2) with frontPointer.val (2). Match! âœ“",
          lines: [15, 16],
          lineType: "unwind",
          frontPointer: 2,
          currentNode: 1,
          stackFrames: ["base", "0", "1"],
          activeFrame: "1",
          comparison: { front: 2, current: 2, match: true },
          matchedNodes: [3, 2],
          direction: "up",
          variables: {
            frontPointer: "node 2 (val=2)",
            current: "node 1 (val=2)",
            stackDepth: "3",
          },
        },
        {
          phase: "Unwinding - Compare",
          message:
            "Back in frame 0: Compare current.val (1) with frontPointer.val (1). Match! âœ“",
          lines: [15, 16],
          lineType: "unwind",
          frontPointer: 3,
          currentNode: 0,
          stackFrames: ["base", "0"],
          activeFrame: "0",
          frameResults: [{ frame: "1", result: "â†’ true" }],
          comparison: { front: 1, current: 1, match: true },
          matchedNodes: [3, 2, 1],
          direction: "up",
          variables: {
            frontPointer: "node 3 (val=1)",
            current: "node 0 (val=1)",
            stackDepth: "2",
          },
        },
        {
          phase: "Complete!",
          message: "All comparisons matched! Return TRUE ðŸŽ‰ It's a palindrome!",
          lines: [25],
          lineType: "unwind",
          frontPointer: 3,
          currentNode: 0,
          stackFrames: ["base"],
          activeFrame: "base",
          frameResults: [{ frame: "0", result: "â†’ true" }],
          matchedNodes: [0, 1, 2, 3],
          comparison: null,
          isPalindrome: true,
          direction: null,
          variables: {
            frontPointer: "node 3 (val=1)",
            current: "â€”",
            stackDepth: "1",
          },
        },
      ];

      // DOM Elements
      const prevBtn = document.getElementById("prevBtn");
      const nextBtn = document.getElementById("nextBtn");
      const resetBtn = document.getElementById("resetBtn");
      const autoBtn = document.getElementById("autoBtn");
      const stepNum = document.getElementById("stepNum");
      const totalSteps = document.getElementById("totalSteps");
      const speedSlider = document.getElementById("speedSlider");
      const speedLabel = document.getElementById("speedLabel");
      const statusPhase = document.getElementById("statusPhase");
      const statusMessage = document.getElementById("statusMessage");
      const variableState = document.getElementById("variableState");
      const frontPointerValue = document.getElementById("frontPointerValue");
      const directionIndicator = document.getElementById("directionIndicator");
      const directionText = document.getElementById("directionText");
      const arrowDown = document.getElementById("arrowDown");
      const arrowUp = document.getElementById("arrowUp");
      const comparisonBox = document.getElementById("comparisonBox");
      const resultBanner = document.getElementById("resultBanner");

      totalSteps.textContent = steps.length - 1;

      speedSlider.addEventListener("input", (e) => {
        speed = parseInt(e.target.value);
        speedLabel.textContent = (speed / 1000).toFixed(1) + "s";
      });

      function clearHighlights() {
        document.querySelectorAll(".node-box").forEach((n) => {
          n.classList.remove(
            "front-pointer",
            "current-recurse",
            "comparing",
            "matched"
          );
        });
        document.querySelectorAll(".stack-frame").forEach((f) => {
          f.classList.remove("visible", "active", "unwinding", "returned");
        });
        document.querySelectorAll(".code-line").forEach((l) => {
          l.classList.remove("active", "active-unwind");
        });
        comparisonBox.classList.remove("visible");
        directionIndicator.classList.add("hidden");
      }

      function highlightLines(lines, type) {
        if (!lines || lines.length === 0) return;
        lines.forEach((num) => {
          const line = document.querySelector(`.code-line[data-line="${num}"]`);
          if (line) {
            line.classList.add(type === "unwind" ? "active-unwind" : "active");
          }
        });
      }

      function updateVariables(vars) {
        variableState.innerHTML = `
                <div><span class="var-name">frontPointer</span> = <span class="var-value">${vars.frontPointer}</span></div>
                <div><span class="var-name">current</span> = <span class="var-value">${vars.current}</span></div>
                <div><span class="var-name">stack depth</span> = <span class="var-value">${vars.stackDepth}</span></div>
            `;
      }

      function executeStep(stepIndex) {
        const step = steps[stepIndex];
        clearHighlights();

        // Update status
        statusPhase.textContent = step.phase;
        statusMessage.textContent = step.message;
        updateVariables(step.variables);
        highlightLines(step.lines, step.lineType);

        // Hide result unless final
        if (!step.isPalindrome) {
          resultBanner.className = "result-banner";
        }

        // Front pointer on linked list
        if (step.frontPointer !== null && step.frontPointer !== undefined) {
          const fpNode = document.getElementById(`node-${step.frontPointer}`);
          if (fpNode) fpNode.classList.add("front-pointer");
          frontPointerValue.textContent = `node ${step.frontPointer} (val=${
            listValues[step.frontPointer]
          })`;
        }

        // Current node being processed
        if (step.currentNode !== null && step.currentNode !== undefined) {
          const currNode = document.getElementById(`node-${step.currentNode}`);
          if (currNode) {
            if (step.lineType === "unwind") {
              currNode.classList.add("comparing");
            } else {
              currNode.classList.add("current-recurse");
            }
          }
        }

        // Matched nodes
        if (step.matchedNodes) {
          step.matchedNodes.forEach((idx) => {
            document.getElementById(`node-${idx}`).classList.add("matched");
          });
        }

        // Stack frames
        if (step.stackFrames) {
          step.stackFrames.forEach((frameId) => {
            const frame = document.getElementById(`frame-${frameId}`);
            if (frame) {
              frame.classList.add("visible");
              if (frameId === step.activeFrame) {
                frame.classList.add(
                  step.lineType === "unwind" ? "unwinding" : "active"
                );
              }
            }
          });
        }

        // Frame results
        if (step.frameResult) {
          const resultEl = document.getElementById(
            `result-${step.frameResult.frame}`
          );
          if (resultEl) resultEl.textContent = step.frameResult.result;
        }
        if (step.frameResults) {
          step.frameResults.forEach((fr) => {
            const resultEl = document.getElementById(`result-${fr.frame}`);
            if (resultEl) resultEl.textContent = fr.result;
          });
        }

        // Direction indicator
        if (step.direction) {
          directionIndicator.classList.remove("hidden");
          if (step.direction === "down") {
            arrowDown.style.display = "inline";
            arrowUp.style.display = "none";
            directionText.textContent = "Recursing down...";
          } else {
            arrowDown.style.display = "none";
            arrowUp.style.display = "inline";
            directionText.textContent = "Unwinding up...";
          }
        }

        // Comparison
        if (step.comparison) {
          comparisonBox.classList.add("visible");
          document.getElementById("compFront").textContent =
            step.comparison.front;
          document.getElementById("compCurrent").textContent =
            step.comparison.current;
          const compOp = document.getElementById("compOp");
          if (step.comparison.match) {
            compOp.textContent = "==";
            compOp.className = "comp-operator equal";
          } else {
            compOp.textContent = "â‰ ";
            compOp.className = "comp-operator not-equal";
          }
        }

        // Final result
        if (step.isPalindrome !== undefined) {
          if (step.isPalindrome) {
            resultBanner.className = "result-banner success";
            document.getElementById("resultIcon").textContent = "âœ“";
            document.getElementById("resultText").textContent =
              "It's a Palindrome!";
          } else {
            resultBanner.className = "result-banner failure";
            document.getElementById("resultIcon").textContent = "âœ—";
            document.getElementById("resultText").textContent =
              "Not a Palindrome";
          }
        }

        // Update step counter
        stepNum.textContent = stepIndex;
        prevBtn.disabled = stepIndex === 0;
        nextBtn.disabled = stepIndex === steps.length - 1;
      }

      // Button handlers
      nextBtn.addEventListener("click", () => {
        if (currentStep < steps.length - 1) {
          currentStep++;
          executeStep(currentStep);
        }
      });

      prevBtn.addEventListener("click", () => {
        if (currentStep > 0) {
          currentStep--;
          // Reset frame results when going back
          document
            .querySelectorAll(".frame-result")
            .forEach((el) => (el.textContent = ""));
          executeStep(currentStep);
        }
      });

      resetBtn.addEventListener("click", () => {
        stopAutoPlay();
        currentStep = 0;
        document
          .querySelectorAll(".frame-result")
          .forEach((el) => (el.textContent = ""));
        executeStep(currentStep);
      });

      function stopAutoPlay() {
        isAutoPlaying = false;
        autoBtn.textContent = "â–¶â–¶ Auto";
        if (autoPlayInterval) {
          clearInterval(autoPlayInterval);
          autoPlayInterval = null;
        }
      }

      autoBtn.addEventListener("click", () => {
        if (isAutoPlaying) {
          stopAutoPlay();
        } else {
          isAutoPlaying = true;
          autoBtn.textContent = "â¸ Pause";
          autoPlayInterval = setInterval(() => {
            if (currentStep < steps.length - 1) {
              currentStep++;
              executeStep(currentStep);
            } else {
              stopAutoPlay();
            }
          }, speed);
        }
      });

      // Keyboard navigation
      document.addEventListener("keydown", (e) => {
        if (e.key === "ArrowRight" || e.key === " ") {
          e.preventDefault();
          if (currentStep < steps.length - 1) {
            currentStep++;
            executeStep(currentStep);
          }
        } else if (e.key === "ArrowLeft") {
          e.preventDefault();
          if (currentStep > 0) {
            currentStep--;
            document
              .querySelectorAll(".frame-result")
              .forEach((el) => (el.textContent = ""));
            executeStep(currentStep);
          }
        } else if (e.key === "r" || e.key === "R") {
          stopAutoPlay();
          currentStep = 0;
          document
            .querySelectorAll(".frame-result")
            .forEach((el) => (el.textContent = ""));
          executeStep(currentStep);
        }
      });

      // Initialize
      executeStep(0);
    </script>
  </body>
</html>
