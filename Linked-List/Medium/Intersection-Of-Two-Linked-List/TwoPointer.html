<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Two-Pointer Technique (Optimal) - Linked List Intersection | Whiteboard
    </title>
    <link
      href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;500;600;700&family=Patrick+Hand&family=Kalam:wght@300;400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Kalam", cursive;
        min-height: 100vh;
        overflow-x: hidden;
      }

      .whiteboard {
        min-height: 100vh;
        background: linear-gradient(
            rgba(200, 210, 220, 0.3) 1px,
            transparent 1px
          ),
          linear-gradient(90deg, rgba(200, 210, 220, 0.3) 1px, transparent 1px),
          linear-gradient(135deg, #f8f9fa 0%, #e9ecef 50%, #f1f3f5 100%);
        background-size: 30px 30px, 30px 30px, 100% 100%;
        padding: 30px;
        position: relative;
      }

      .whiteboard::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
        pointer-events: none;
        z-index: 1;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        position: relative;
        z-index: 2;
      }

      .title {
        font-family: "Caveat", cursive;
        font-size: 3.2rem;
        font-weight: 700;
        color: #2d3436;
        text-align: center;
        margin-bottom: 10px;
        transform: rotate(-1deg);
        text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.05);
      }

      .optimal-badge {
        display: inline-block;
        background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
        color: white;
        padding: 5px 15px;
        border-radius: 20px;
        font-family: "Patrick Hand", cursive;
        font-size: 1rem;
        margin-left: 10px;
        vertical-align: middle;
        animation: shine 2s ease infinite;
      }

      @keyframes shine {
        0%,
        100% {
          box-shadow: 0 0 10px rgba(0, 184, 148, 0.5);
        }
        50% {
          box-shadow: 0 0 20px rgba(0, 184, 148, 0.8);
        }
      }

      .subtitle {
        font-family: "Patrick Hand", cursive;
        font-size: 1.4rem;
        color: #636e72;
        text-align: center;
        margin-bottom: 40px;
        transform: rotate(0.5deg);
      }

      .section-box {
        background: rgba(255, 255, 255, 0.7);
        border: 3px solid #2d3436;
        border-radius: 3px;
        padding: 25px;
        margin-bottom: 30px;
        position: relative;
        box-shadow: 4px 4px 0px rgba(0, 0, 0, 0.1);
        transform: rotate(-0.3deg);
      }

      .section-box::before {
        content: "";
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        border: 2px solid rgba(45, 52, 54, 0.3);
        border-radius: 5px;
        transform: rotate(0.5deg);
        pointer-events: none;
      }

      .section-title {
        font-family: "Caveat", cursive;
        font-size: 2rem;
        font-weight: 600;
        color: #0984e3;
        margin-bottom: 15px;
        display: inline-block;
        padding: 5px 15px;
        background: linear-gradient(
          180deg,
          transparent 60%,
          rgba(116, 185, 255, 0.3) 60%
        );
        transform: rotate(-0.5deg);
      }

      /* Magic formula display */
      .magic-formula {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 15px;
        padding: 25px;
        margin: 20px auto;
        max-width: 800px;
        color: white;
        text-align: center;
        transform: rotate(-0.5deg);
        box-shadow: 5px 5px 0px rgba(102, 126, 234, 0.3);
      }

      .magic-formula h3 {
        font-family: "Caveat", cursive;
        font-size: 1.8rem;
        margin-bottom: 15px;
      }

      .magic-formula .formula {
        font-family: "Kalam", cursive;
        font-size: 1.3rem;
        background: rgba(255, 255, 255, 0.2);
        padding: 15px 20px;
        border-radius: 10px;
        margin: 10px 0;
      }

      .magic-formula .formula span {
        background: rgba(255, 255, 255, 0.3);
        padding: 2px 8px;
        border-radius: 5px;
        margin: 0 3px;
      }

      .magic-formula .formula .red {
        background: #d63031;
      }
      .magic-formula .formula .purple {
        background: #6c5ce7;
      }
      .magic-formula .formula .green {
        background: #00b894;
      }

      /* Path visualization */
      .path-container {
        display: flex;
        flex-direction: column;
        gap: 20px;
        margin: 20px 0;
        padding: 20px;
        background: rgba(255, 255, 255, 0.5);
        border-radius: 10px;
        border: 2px dashed #b2bec3;
      }

      .path-row {
        display: flex;
        align-items: center;
        gap: 5px;
        flex-wrap: wrap;
      }

      .path-label {
        font-family: "Caveat", cursive;
        font-size: 1.4rem;
        font-weight: 600;
        min-width: 100px;
      }

      .path-label.red {
        color: #d63031;
      }
      .path-label.purple {
        color: #6c5ce7;
      }

      .path-node {
        width: 45px;
        height: 45px;
        border: 3px solid #2d3436;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: "Kalam", cursive;
        font-size: 1.2rem;
        font-weight: 700;
        transition: all 0.3s ease;
        position: relative;
      }

      .path-node.from-a {
        background: linear-gradient(135deg, #fff5f5 0%, #ffe3e3 100%);
        border-color: #d63031;
      }

      .path-node.from-b {
        background: linear-gradient(135deg, #f3f0ff 0%, #e5dbff 100%);
        border-color: #6c5ce7;
      }

      .path-node.shared {
        background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%);
        border-color: #00b894;
      }

      .path-node.null-node {
        background: #dfe6e9;
        border-style: dashed;
        color: #636e72;
        font-size: 0.9rem;
      }

      .path-node.visited {
        opacity: 0.5;
        transform: scale(0.9);
      }

      .path-node.current {
        transform: scale(1.15);
        z-index: 10;
      }

      .path-node.current-a {
        box-shadow: 0 0 0 4px #d63031, 0 0 15px rgba(214, 48, 49, 0.5);
      }

      .path-node.current-b {
        box-shadow: 0 0 0 4px #6c5ce7, 0 0 15px rgba(108, 92, 231, 0.5);
      }

      .path-node.found {
        box-shadow: 0 0 0 5px #00b894, 0 0 25px rgba(0, 184, 148, 0.6);
        animation: pulse 0.5s ease infinite alternate;
      }

      @keyframes pulse {
        from {
          box-shadow: 0 0 0 5px #00b894, 0 0 25px rgba(0, 184, 148, 0.6);
        }
        to {
          box-shadow: 0 0 0 8px #00b894, 0 0 35px rgba(0, 184, 148, 0.8);
        }
      }

      .path-arrow {
        font-size: 1.2rem;
        color: #636e72;
      }

      .path-switch {
        background: #fdcb6e;
        color: #d35400;
        padding: 2px 8px;
        border-radius: 10px;
        font-family: "Patrick Hand", cursive;
        font-size: 0.9rem;
        margin: 0 5px;
      }

      /* Original lists */
      .lists-container {
        display: flex;
        flex-direction: column;
        gap: 40px;
        margin: 30px 0;
      }

      .list-row {
        display: flex;
        align-items: center;
        gap: 8px;
        flex-wrap: wrap;
      }

      .list-label {
        font-family: "Caveat", cursive;
        font-size: 1.6rem;
        font-weight: 600;
        min-width: 80px;
        transform: rotate(-2deg);
      }

      .list-a-label {
        color: #d63031;
      }
      .list-b-label {
        color: #6c5ce7;
      }

      .node {
        width: 50px;
        height: 50px;
        border: 3px solid #2d3436;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: "Kalam", cursive;
        font-size: 1.3rem;
        font-weight: 700;
        position: relative;
        transition: all 0.3s ease;
        background: white;
      }

      .node-a {
        background: linear-gradient(135deg, #fff5f5 0%, #ffe3e3 100%);
        border-color: #d63031;
      }

      .node-b {
        background: linear-gradient(135deg, #f3f0ff 0%, #e5dbff 100%);
        border-color: #6c5ce7;
      }

      .node-shared {
        background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%);
        border-color: #00b894;
      }

      .node.highlight-a {
        box-shadow: 0 0 0 4px #d63031, 0 0 15px rgba(214, 48, 49, 0.5);
        transform: scale(1.1);
      }

      .node.highlight-b {
        box-shadow: 0 0 0 4px #6c5ce7, 0 0 15px rgba(108, 92, 231, 0.5);
        transform: scale(1.1);
      }

      .node.found {
        box-shadow: 0 0 0 5px #00b894, 0 0 25px rgba(0, 184, 148, 0.6);
        animation: pulse 0.5s ease infinite alternate;
      }

      .arrow {
        width: 22px;
        height: 3px;
        background: #2d3436;
        position: relative;
        margin: 0 -2px;
      }

      .arrow::after {
        content: "";
        position: absolute;
        right: -2px;
        top: -4px;
        border: 5px solid transparent;
        border-left: 7px solid #2d3436;
      }

      /* Distance tracker */
      .distance-tracker {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin: 20px 0;
        flex-wrap: wrap;
      }

      .distance-box {
        background: white;
        border: 3px solid;
        border-radius: 12px;
        padding: 15px 25px;
        text-align: center;
        min-width: 160px;
        transition: all 0.3s ease;
      }

      .distance-box.box-a {
        border-color: #d63031;
        box-shadow: 3px 3px 0px rgba(214, 48, 49, 0.3);
      }

      .distance-box.box-b {
        border-color: #6c5ce7;
        box-shadow: 3px 3px 0px rgba(108, 92, 231, 0.3);
      }

      .distance-box.box-total {
        border-color: #00b894;
        background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%);
        box-shadow: 3px 3px 0px rgba(0, 184, 148, 0.3);
      }

      .distance-box-label {
        font-family: "Patrick Hand", cursive;
        font-size: 1rem;
        color: #636e72;
        margin-bottom: 5px;
      }

      .distance-box-value {
        font-family: "Caveat", cursive;
        font-size: 2rem;
        font-weight: 700;
      }

      .distance-box.box-a .distance-box-value {
        color: #d63031;
      }
      .distance-box.box-b .distance-box-value {
        color: #6c5ce7;
      }
      .distance-box.box-total .distance-box-value {
        color: #00b894;
      }

      /* Controls */
      .controls {
        display: flex;
        gap: 15px;
        justify-content: center;
        flex-wrap: wrap;
        margin: 30px 0;
      }

      .btn {
        font-family: "Patrick Hand", cursive;
        font-size: 1.2rem;
        padding: 12px 25px;
        border: 3px solid #2d3436;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
        position: relative;
        background: white;
      }

      .btn:hover {
        transform: translateY(-3px) rotate(-1deg);
        box-shadow: 4px 4px 0px rgba(0, 0, 0, 0.2);
      }

      .btn:active {
        transform: translateY(0);
        box-shadow: none;
      }

      .btn-primary {
        background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
        color: white;
        border-color: #0984e3;
      }

      .btn-success {
        background: linear-gradient(135deg, #55efc4 0%, #00b894 100%);
        color: white;
        border-color: #00b894;
      }

      .btn-danger {
        background: linear-gradient(135deg, #fab1a0 0%, #d63031 100%);
        color: white;
        border-color: #d63031;
      }

      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none !important;
      }

      .speed-control {
        display: flex;
        align-items: center;
        gap: 10px;
        font-family: "Patrick Hand", cursive;
        font-size: 1.1rem;
      }

      .speed-control input {
        width: 120px;
        accent-color: #0984e3;
      }

      /* Step info */
      .step-info {
        display: flex;
        justify-content: space-around;
        flex-wrap: wrap;
        gap: 15px;
        margin: 20px 0;
      }

      .step-box {
        background: white;
        border: 3px dashed #636e72;
        border-radius: 10px;
        padding: 12px 18px;
        text-align: center;
        min-width: 110px;
      }

      .step-box-label {
        font-family: "Patrick Hand", cursive;
        font-size: 0.9rem;
        color: #636e72;
        margin-bottom: 5px;
      }

      .step-box-value {
        font-family: "Caveat", cursive;
        font-size: 1.5rem;
        font-weight: 700;
      }

      .step-box-value.red {
        color: #d63031;
      }
      .step-box-value.purple {
        color: #6c5ce7;
      }
      .step-box-value.orange {
        color: #f39c12;
      }
      .step-box-value.blue {
        color: #0984e3;
      }
      .step-box-value.green {
        color: #00b894;
      }

      /* Explanation panel */
      .explanation-panel {
        background: rgba(255, 251, 235, 0.9);
        border: 3px solid #f39c12;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
        transform: rotate(0.3deg);
        box-shadow: 3px 3px 0px rgba(243, 156, 18, 0.3);
      }

      .explanation-title {
        font-family: "Caveat", cursive;
        font-size: 1.5rem;
        color: #e17055;
        margin-bottom: 10px;
      }

      .explanation-text {
        font-family: "Kalam", cursive;
        font-size: 1.1rem;
        color: #2d3436;
        line-height: 1.6;
      }

      /* Code panel */
      .code-panel {
        background: #2d3436;
        border-radius: 10px;
        padding: 20px;
        margin: 20px 0;
        overflow-x: auto;
        transform: rotate(-0.2deg);
        box-shadow: 5px 5px 0px rgba(0, 0, 0, 0.2);
      }

      .code-line {
        font-family: "Courier New", monospace;
        font-size: 0.9rem;
        color: #dfe6e9;
        padding: 3px 10px;
        border-radius: 3px;
        margin: 2px 0;
        transition: all 0.3s ease;
        white-space: pre;
      }

      .code-line.active {
        background: rgba(116, 185, 255, 0.3);
        border-left: 4px solid #74b9ff;
        color: #fff;
      }

      .code-keyword {
        color: #fd79a8;
      }
      .code-function {
        color: #74b9ff;
      }
      .code-variable {
        color: #55efc4;
      }
      .code-comment {
        color: #636e72;
        font-style: italic;
      }
      .code-operator {
        color: #ffeaa7;
      }
      .code-return {
        color: #fab1a0;
      }

      /* Result banner */
      .result-banner {
        display: none;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        margin: 20px 0;
        font-family: "Caveat", cursive;
        font-size: 2rem;
        animation: slideIn 0.5s ease;
      }

      @keyframes slideIn {
        from {
          transform: translateY(-20px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .result-banner.found {
        display: block;
        background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%);
        border: 4px solid #00b894;
        color: #00b894;
      }

      /* Complexity box */
      .complexity-box {
        background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%);
        border-radius: 10px;
        padding: 20px;
        color: white;
        margin: 20px 0;
        transform: rotate(0.5deg);
      }

      .complexity-title {
        font-family: "Caveat", cursive;
        font-size: 1.8rem;
        margin-bottom: 15px;
      }

      .complexity-content {
        display: flex;
        gap: 30px;
        flex-wrap: wrap;
      }

      .complexity-item {
        font-family: "Kalam", cursive;
        font-size: 1.1rem;
      }

      .complexity-item strong {
        font-family: "Caveat", cursive;
        font-size: 1.4rem;
      }

      /* Legend */
      .legend {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
        justify-content: center;
        margin: 20px 0;
        padding: 15px;
        background: rgba(255, 255, 255, 0.7);
        border-radius: 10px;
        border: 2px dashed #b2bec3;
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: 8px;
        font-family: "Patrick Hand", cursive;
        font-size: 1rem;
      }

      .legend-color {
        width: 22px;
        height: 22px;
        border-radius: 5px;
        border: 2px solid #2d3436;
      }

      .legend-color.red {
        background: linear-gradient(135deg, #fff5f5 0%, #ffe3e3 100%);
        border-color: #d63031;
      }
      .legend-color.purple {
        background: linear-gradient(135deg, #f3f0ff 0%, #e5dbff 100%);
        border-color: #6c5ce7;
      }
      .legend-color.green {
        background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%);
        border-color: #00b894;
      }

      /* Why it works box */
      .why-box {
        background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
        border-radius: 10px;
        padding: 20px;
        color: white;
        margin: 20px 0;
        transform: rotate(-0.5deg);
      }

      .why-box h3 {
        font-family: "Caveat", cursive;
        font-size: 1.8rem;
        margin-bottom: 15px;
      }

      .why-box p {
        font-family: "Kalam", cursive;
        font-size: 1.1rem;
        line-height: 1.5;
        margin-bottom: 10px;
      }

      .why-box .math {
        background: rgba(255, 255, 255, 0.2);
        padding: 10px 15px;
        border-radius: 8px;
        font-family: "Courier New", monospace;
        display: inline-block;
        margin: 5px 0;
      }

      @media (max-width: 768px) {
        .title {
          font-size: 2.2rem;
        }
        .node {
          width: 42px;
          height: 42px;
          font-size: 1.1rem;
        }
        .path-node {
          width: 38px;
          height: 38px;
          font-size: 1rem;
        }
        .controls {
          gap: 10px;
        }
        .btn {
          padding: 10px 15px;
          font-size: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="whiteboard">
      <div class="container">
        <h1 class="title">
          üéØ Two-Pointer Technique <span class="optimal-badge">‚ú® OPTIMAL</span>
        </h1>
        <p class="subtitle">
          The elegant solution: When pointerA finishes A, it goes to B. When
          pointerB finishes B, it goes to A. They WILL meet!
        </p>

        <!-- Magic Formula -->
        <div class="magic-formula">
          <h3>‚ú® The Magic Behind It</h3>
          <div class="formula">
            Pointer A travels: <span class="red">a</span> +
            <span class="green">c</span> + <span class="purple">b</span> =
            Pointer B travels: <span class="purple">b</span> +
            <span class="green">c</span> + <span class="red">a</span>
          </div>
          <p
            style="
              font-family: 'Patrick Hand';
              margin-top: 10px;
              font-size: 1.1rem;
            "
          >
            Both travel the SAME total distance ‚Üí They meet at the intersection!
            üéâ
          </p>
        </div>

        <!-- Legend -->
        <div class="legend">
          <div class="legend-item">
            <div class="legend-color red"></div>
            <span>List A unique (a=2)</span>
          </div>
          <div class="legend-item">
            <div class="legend-color purple"></div>
            <span>List B unique (b=3)</span>
          </div>
          <div class="legend-item">
            <div class="legend-color green"></div>
            <span>Shared nodes (c=3)</span>
          </div>
        </div>

        <!-- Original Lists -->
        <div class="section-box">
          <div class="section-title">üìä The Original Linked Lists</div>

          <div class="lists-container">
            <div class="list-row">
              <span class="list-label list-a-label">List A:</span>
              <div class="node node-a" data-list="a" data-index="0">4</div>
              <div class="arrow"></div>
              <div class="node node-a" data-list="a" data-index="1">1</div>
              <div class="arrow"></div>
              <div class="node node-shared" data-list="a" data-index="2">8</div>
              <div class="arrow"></div>
              <div class="node node-shared" data-list="a" data-index="3">4</div>
              <div class="arrow"></div>
              <div class="node node-shared" data-list="a" data-index="4">5</div>
              <div class="arrow"></div>
              <span
                style="font-family: 'Kalam'; font-size: 1rem; color: #636e72"
                >null</span
              >
            </div>

            <div class="list-row">
              <span class="list-label list-b-label">List B:</span>
              <div class="node node-b" data-list="b" data-index="0">5</div>
              <div class="arrow"></div>
              <div class="node node-b" data-list="b" data-index="1">6</div>
              <div class="arrow"></div>
              <div class="node node-b" data-list="b" data-index="2">1</div>
              <div class="arrow"></div>
              <div class="node node-shared" data-list="b" data-index="3">8</div>
              <div class="arrow"></div>
              <div class="node node-shared" data-list="b" data-index="4">4</div>
              <div class="arrow"></div>
              <div class="node node-shared" data-list="b" data-index="5">5</div>
              <div class="arrow"></div>
              <span
                style="font-family: 'Kalam'; font-size: 1rem; color: #636e72"
                >null</span
              >
            </div>
          </div>
        </div>

        <!-- Path Visualization -->
        <div class="section-box">
          <div class="section-title">üõ§Ô∏è The Paths Each Pointer Takes</div>

          <div class="path-container">
            <div class="path-row">
              <span class="path-label red">Pointer A:</span>
              <div class="path-node from-a" data-path="a" data-step="0">4</div>
              <span class="path-arrow">‚Üí</span>
              <div class="path-node from-a" data-path="a" data-step="1">1</div>
              <span class="path-arrow">‚Üí</span>
              <div class="path-node shared" data-path="a" data-step="2">8</div>
              <span class="path-arrow">‚Üí</span>
              <div class="path-node shared" data-path="a" data-step="3">4</div>
              <span class="path-arrow">‚Üí</span>
              <div class="path-node shared" data-path="a" data-step="4">5</div>
              <span class="path-arrow">‚Üí</span>
              <div class="path-node null-node" data-path="a" data-step="5">
                null
              </div>
              <span class="path-switch">‚ü≥ switch to B</span>
              <div class="path-node from-b" data-path="a" data-step="6">5</div>
              <span class="path-arrow">‚Üí</span>
              <div class="path-node from-b" data-path="a" data-step="7">6</div>
              <span class="path-arrow">‚Üí</span>
              <div class="path-node from-b" data-path="a" data-step="8">1</div>
              <span class="path-arrow">‚Üí</span>
              <div
                class="path-node shared"
                data-path="a"
                data-step="9"
                data-meet="true"
              >
                8
              </div>
            </div>

            <div class="path-row">
              <span class="path-label purple">Pointer B:</span>
              <div class="path-node from-b" data-path="b" data-step="0">5</div>
              <span class="path-arrow">‚Üí</span>
              <div class="path-node from-b" data-path="b" data-step="1">6</div>
              <span class="path-arrow">‚Üí</span>
              <div class="path-node from-b" data-path="b" data-step="2">1</div>
              <span class="path-arrow">‚Üí</span>
              <div class="path-node shared" data-path="b" data-step="3">8</div>
              <span class="path-arrow">‚Üí</span>
              <div class="path-node shared" data-path="b" data-step="4">4</div>
              <span class="path-arrow">‚Üí</span>
              <div class="path-node shared" data-path="b" data-step="5">5</div>
              <span class="path-arrow">‚Üí</span>
              <div class="path-node null-node" data-path="b" data-step="6">
                null
              </div>
              <span class="path-switch">‚ü≥ switch to A</span>
              <div class="path-node from-a" data-path="b" data-step="7">4</div>
              <span class="path-arrow">‚Üí</span>
              <div class="path-node from-a" data-path="b" data-step="8">1</div>
              <span class="path-arrow">‚Üí</span>
              <div
                class="path-node shared"
                data-path="b"
                data-step="9"
                data-meet="true"
              >
                8
              </div>
            </div>
          </div>

          <!-- Distance Tracker -->
          <div class="distance-tracker">
            <div class="distance-box box-a">
              <div class="distance-box-label">Pointer A Steps</div>
              <div class="distance-box-value" id="stepsAValue">0</div>
            </div>
            <div class="distance-box box-b">
              <div class="distance-box-label">Pointer B Steps</div>
              <div class="distance-box-value" id="stepsBValue">0</div>
            </div>
            <div class="distance-box box-total">
              <div class="distance-box-label">Meet at Step</div>
              <div class="distance-box-value" id="meetStepValue">?</div>
            </div>
          </div>
        </div>

        <!-- Controls -->
        <div class="controls">
          <button class="btn btn-primary" id="startBtn" onclick="start()">
            ‚ñ∂Ô∏è Start
          </button>
          <button
            class="btn btn-success"
            id="stepBtn"
            onclick="step()"
            disabled
          >
            ‚è≠Ô∏è Next Step
          </button>
          <button
            class="btn btn-primary"
            id="autoBtn"
            onclick="toggleAuto()"
            disabled
          >
            üîÑ Auto Play
          </button>
          <button class="btn btn-danger" id="resetBtn" onclick="reset()">
            üîÑ Reset
          </button>
          <div class="speed-control">
            <label>Speed:</label>
            <input
              type="range"
              id="speedSlider"
              min="100"
              max="1500"
              value="500"
              onchange="updateSpeed()"
            />
            <span id="speedLabel">500ms</span>
          </div>
        </div>

        <!-- Step Information -->
        <div class="step-info">
          <div class="step-box">
            <div class="step-box-label">Step #</div>
            <div class="step-box-value blue" id="stepNumDisplay">0</div>
          </div>
          <div class="step-box">
            <div class="step-box-label">Pointer A</div>
            <div class="step-box-value red" id="pointerADisplay">A[0]=4</div>
          </div>
          <div class="step-box">
            <div class="step-box-label">Pointer B</div>
            <div class="step-box-value purple" id="pointerBDisplay">B[0]=5</div>
          </div>
          <div class="step-box">
            <div class="step-box-label">A switched?</div>
            <div class="step-box-value orange" id="aSwitchedDisplay">No</div>
          </div>
          <div class="step-box">
            <div class="step-box-label">B switched?</div>
            <div class="step-box-value orange" id="bSwitchedDisplay">No</div>
          </div>
          <div class="step-box">
            <div class="step-box-label">Status</div>
            <div class="step-box-value green" id="statusDisplay">Ready</div>
          </div>
        </div>

        <!-- Explanation Panel -->
        <div class="explanation-panel">
          <div class="explanation-title">üìù What's Happening:</div>
          <div class="explanation-text" id="explanationText">
            Click "Start" to begin. Watch how both pointers traverse their
            respective lists, switch to the other list when reaching null, and
            eventually meet at the intersection point!
          </div>
        </div>

        <!-- Code Panel -->
        <div class="section-box">
          <div class="section-title">üíª The Elegant Code</div>
          <div class="code-panel">
            <div class="code-line" data-line="1">
              <span class="code-keyword">function</span>
              <span class="code-function">getIntersectionNode</span>(headA,
              headB) {
            </div>
            <div class="code-line" data-line="2">
              <span class="code-keyword">if</span> (!headA || !headB)
              <span class="code-return">return</span>
              <span class="code-keyword">null</span>;
            </div>
            <div class="code-line" data-line="3"></div>
            <div class="code-line" data-line="4">
              <span class="code-keyword">let</span>
              <span class="code-variable">pA</span> = headA;
            </div>
            <div class="code-line" data-line="5">
              <span class="code-keyword">let</span>
              <span class="code-variable">pB</span> = headB;
            </div>
            <div class="code-line" data-line="6"></div>
            <div class="code-line" data-line="7">
              <span class="code-keyword">while</span> (<span
                class="code-variable"
                >pA</span
              >
              <span class="code-operator">!==</span>
              <span class="code-variable">pB</span>) {
            </div>
            <div class="code-line" data-line="8">
              <span class="code-comment"
                >// If pA reaches end, switch to headB</span
              >
            </div>
            <div class="code-line" data-line="9">
              <span class="code-variable">pA</span> =
              <span class="code-variable">pA</span>
              <span class="code-operator">===</span>
              <span class="code-keyword">null</span> ? headB :
              <span class="code-variable">pA</span>.next;
            </div>
            <div class="code-line" data-line="10">
              <span class="code-comment"
                >// If pB reaches end, switch to headA</span
              >
            </div>
            <div class="code-line" data-line="11">
              <span class="code-variable">pB</span> =
              <span class="code-variable">pB</span>
              <span class="code-operator">===</span>
              <span class="code-keyword">null</span> ? headA :
              <span class="code-variable">pB</span>.next;
            </div>
            <div class="code-line" data-line="12">}</div>
            <div class="code-line" data-line="13"></div>
            <div class="code-line" data-line="14">
              <span class="code-return">return</span>
              <span class="code-variable">pA</span>;
              <span class="code-comment">// Either intersection or null</span>
            </div>
            <div class="code-line" data-line="15">}</div>
          </div>
        </div>

        <!-- Result Banner -->
        <div class="result-banner" id="resultBanner"></div>

        <!-- Why It Works Box -->
        <div class="why-box">
          <h3>üß† Why Does This Magic Work?</h3>
          <p>
            <strong>List A:</strong> 2 unique nodes (a) + 3 shared nodes (c) = 5
            total<br />
            <strong>List B:</strong> 3 unique nodes (b) + 3 shared nodes (c) = 6
            total
          </p>
          <p>
            <strong>Pointer A's journey:</strong>
            A‚ÜíA‚Üíshared‚Üíshared‚Üíshared‚Üínull‚ÜíB‚ÜíB‚ÜíB‚Üí<strong>MEET!</strong>
          </p>
          <div class="math">a + c + b = 2 + 3 + 3 = 8 steps</div>
          <p>
            <strong>Pointer B's journey:</strong>
            B‚ÜíB‚ÜíB‚Üíshared‚Üíshared‚Üíshared‚Üínull‚ÜíA‚ÜíA‚Üí<strong>MEET!</strong>
          </p>
          <div class="math">b + c + a = 3 + 3 + 2 = 8 steps</div>
          <p style="margin-top: 15px; font-size: 1.2rem">
            ‚ú®
            <strong
              >Both travel exactly 8 steps and meet at the intersection!</strong
            >
          </p>
        </div>

        <!-- Complexity Box -->
        <div class="complexity-box">
          <div class="complexity-title">‚è±Ô∏è Complexity Analysis</div>
          <div class="complexity-content">
            <div class="complexity-item">
              <strong>Time: O(m + n)</strong><br />
              Each pointer visits at most m+n nodes
            </div>
            <div class="complexity-item">
              <strong>Space: O(1)</strong><br />
              Only two pointer variables!
            </div>
            <div class="complexity-item">
              <strong>Why Optimal:</strong><br />
              Single pass, no extra data structures, no length calculation
              needed!
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Path definitions
      const pathA = [
        { val: 4, type: "from-a", id: "A0" },
        { val: 1, type: "from-a", id: "A1" },
        { val: 8, type: "shared", id: "C0" },
        { val: 4, type: "shared", id: "C1" },
        { val: 5, type: "shared", id: "C2" },
        { val: "null", type: "null", id: "null" },
        // After switch - now on B
        { val: 5, type: "from-b", id: "B0" },
        { val: 6, type: "from-b", id: "B1" },
        { val: 1, type: "from-b", id: "B2" },
        { val: 8, type: "shared", id: "C0", meet: true },
      ];

      const pathB = [
        { val: 5, type: "from-b", id: "B0" },
        { val: 6, type: "from-b", id: "B1" },
        { val: 1, type: "from-b", id: "B2" },
        { val: 8, type: "shared", id: "C0" },
        { val: 4, type: "shared", id: "C1" },
        { val: 5, type: "shared", id: "C2" },
        { val: "null", type: "null", id: "null" },
        // After switch - now on A
        { val: 4, type: "from-a", id: "A0" },
        { val: 1, type: "from-a", id: "A1" },
        { val: 8, type: "shared", id: "C0", meet: true },
      ];

      let currentStep = -1;
      let posA = -1;
      let posB = -1;
      let aSwitched = false;
      let bSwitched = false;
      let isRunning = false;
      let autoPlayInterval = null;
      let speed = 500;
      let found = false;

      function updateSpeed() {
        speed = parseInt(document.getElementById("speedSlider").value);
        document.getElementById("speedLabel").textContent = speed + "ms";
      }

      function start() {
        document.getElementById("startBtn").disabled = true;
        document.getElementById("stepBtn").disabled = false;
        document.getElementById("autoBtn").disabled = false;
        isRunning = true;
        currentStep = 0;
        posA = 0;
        posB = 0;

        highlightCode(4, 5);
        setExplanation(
          "Starting! Both pointers begin at their respective list heads. pA starts at A[0]=4, pB starts at B[0]=5."
        );
        document.getElementById("statusDisplay").textContent = "Running";

        updateDisplay();
        showCurrentPositions();
      }

      function step() {
        if (found || !isRunning) return;

        // Clear previous highlights
        clearPathHighlights();

        // Check if we've met
        if (pathA[posA].id === pathB[posB].id && pathA[posA].id !== "null") {
          // Found!
          found = true;

          const nodeA = document.querySelector(
            `.path-node[data-path="a"][data-step="${posA}"]`
          );
          const nodeB = document.querySelector(
            `.path-node[data-path="b"][data-step="${posB}"]`
          );
          if (nodeA) nodeA.classList.add("found");
          if (nodeB) nodeB.classList.add("found");

          // Also highlight in original lists
          highlightOriginalLists();

          highlightCode(7, 14);
          setExplanation(
            `üéâ FOUND! After ${currentStep} steps, both pointers meet at the node with value 8! pA traveled: A‚ÜíA‚ÜíC‚ÜíC‚ÜíC‚Üínull‚ÜíB‚ÜíB‚ÜíB‚ÜíC. pB traveled: B‚ÜíB‚ÜíB‚ÜíC‚ÜíC‚ÜíC‚Üínull‚ÜíA‚ÜíA‚ÜíC. Both traveled exactly ${currentStep} steps!`
          );
          document.getElementById("statusDisplay").textContent = "Found!";
          document.getElementById("meetStepValue").textContent = currentStep;
          showResult(8);
          stopAuto();
          document.getElementById("stepBtn").disabled = true;
          document.getElementById("autoBtn").disabled = true;
          return;
        }

        // Show current positions before moving
        showCurrentPositions();

        // Build explanation
        let explanation = `Step ${currentStep}: `;

        // Check for null and switch
        const aIsNull = pathA[posA].val === "null";
        const bIsNull = pathB[posB].val === "null";

        if (aIsNull && !aSwitched) {
          explanation += `pA reached null, switching to headB! `;
          aSwitched = true;
          document.getElementById("aSwitchedDisplay").textContent = "Yes ‚ü≥";
          highlightCode(8, 9);
        }

        if (bIsNull && !bSwitched) {
          explanation += `pB reached null, switching to headA! `;
          bSwitched = true;
          document.getElementById("bSwitchedDisplay").textContent = "Yes ‚ü≥";
          highlightCode(10, 11);
        }

        if (!aIsNull && !bIsNull) {
          explanation += `pA at ${pathA[posA].val} (${pathA[posA].id}), pB at ${pathB[posB].val} (${pathB[posB].id}). `;
          if (pathA[posA].id === pathB[posB].id) {
            explanation += `Same node! `;
          } else {
            explanation += `Different nodes, keep moving. `;
          }
          highlightCode(7, 9, 11);
        }

        setExplanation(explanation);

        // Move pointers
        posA++;
        posB++;
        currentStep++;

        updateDisplay();

        // Show new positions
        setTimeout(() => {
          showCurrentPositions();
        }, 100);
      }

      function showCurrentPositions() {
        clearPathHighlights();

        if (posA < pathA.length) {
          const nodeA = document.querySelector(
            `.path-node[data-path="a"][data-step="${posA}"]`
          );
          if (nodeA) {
            nodeA.classList.add("current", "current-a");
          }
        }

        if (posB < pathB.length) {
          const nodeB = document.querySelector(
            `.path-node[data-path="b"][data-step="${posB}"]`
          );
          if (nodeB) {
            nodeB.classList.add("current", "current-b");
          }
        }

        // Mark visited nodes
        for (let i = 0; i < posA; i++) {
          const node = document.querySelector(
            `.path-node[data-path="a"][data-step="${i}"]`
          );
          if (node) node.classList.add("visited");
        }
        for (let i = 0; i < posB; i++) {
          const node = document.querySelector(
            `.path-node[data-path="b"][data-step="${i}"]`
          );
          if (node) node.classList.add("visited");
        }
      }

      function highlightOriginalLists() {
        // Highlight intersection in original lists
        document
          .querySelector('.node[data-list="a"][data-index="2"]')
          .classList.add("found");
        document
          .querySelector('.node[data-list="b"][data-index="3"]')
          .classList.add("found");
      }

      function clearPathHighlights() {
        document.querySelectorAll(".path-node").forEach((node) => {
          node.classList.remove("current", "current-a", "current-b");
        });
      }

      function highlightCode(...lines) {
        document.querySelectorAll(".code-line").forEach((line) => {
          line.classList.remove("active");
        });
        lines.forEach((lineNum) => {
          const line = document.querySelector(
            `.code-line[data-line="${lineNum}"]`
          );
          if (line) line.classList.add("active");
        });
      }

      function updateDisplay() {
        document.getElementById("stepNumDisplay").textContent = currentStep;
        document.getElementById("stepsAValue").textContent = posA;
        document.getElementById("stepsBValue").textContent = posB;

        if (posA < pathA.length) {
          const nodeA = pathA[posA];
          const listIndicator = aSwitched ? "B" : "A";
          document.getElementById("pointerADisplay").textContent =
            nodeA.val === "null" ? "null" : `${listIndicator}:${nodeA.val}`;
        }

        if (posB < pathB.length) {
          const nodeB = pathB[posB];
          const listIndicator = bSwitched ? "A" : "B";
          document.getElementById("pointerBDisplay").textContent =
            nodeB.val === "null" ? "null" : `${listIndicator}:${nodeB.val}`;
        }
      }

      function setExplanation(text) {
        document.getElementById("explanationText").textContent = text;
      }

      function showResult(value) {
        const banner = document.getElementById("resultBanner");
        banner.className = "result-banner found";
        banner.textContent = `‚úÖ Intersection found at node with value ${value}! Both pointers met after ${currentStep} steps.`;
      }

      function toggleAuto() {
        if (autoPlayInterval) {
          stopAuto();
        } else {
          startAuto();
        }
      }

      function startAuto() {
        document.getElementById("autoBtn").textContent = "‚è∏Ô∏è Pause";
        document.getElementById("stepBtn").disabled = true;
        autoPlayInterval = setInterval(() => {
          if (found) {
            stopAuto();
          } else {
            step();
          }
        }, speed);
      }

      function stopAuto() {
        if (autoPlayInterval) {
          clearInterval(autoPlayInterval);
          autoPlayInterval = null;
        }
        document.getElementById("autoBtn").textContent = "üîÑ Auto Play";
        if (!found) {
          document.getElementById("stepBtn").disabled = false;
        }
      }

      function reset() {
        stopAuto();
        found = false;
        currentStep = -1;
        posA = -1;
        posB = -1;
        aSwitched = false;
        bSwitched = false;

        // Clear all highlights
        document.querySelectorAll(".path-node").forEach((node) => {
          node.classList.remove(
            "current",
            "current-a",
            "current-b",
            "visited",
            "found"
          );
        });

        document.querySelectorAll(".node").forEach((node) => {
          node.classList.remove("highlight-a", "highlight-b", "found");
        });

        document
          .querySelectorAll(".code-line")
          .forEach((line) => line.classList.remove("active"));

        document.getElementById("startBtn").disabled = false;
        document.getElementById("stepBtn").disabled = true;
        document.getElementById("autoBtn").disabled = true;

        document.getElementById("stepNumDisplay").textContent = "0";
        document.getElementById("pointerADisplay").textContent = "A[0]=4";
        document.getElementById("pointerBDisplay").textContent = "B[0]=5";
        document.getElementById("aSwitchedDisplay").textContent = "No";
        document.getElementById("bSwitchedDisplay").textContent = "No";
        document.getElementById("statusDisplay").textContent = "Ready";

        document.getElementById("stepsAValue").textContent = "0";
        document.getElementById("stepsBValue").textContent = "0";
        document.getElementById("meetStepValue").textContent = "?";

        document.getElementById("resultBanner").className = "result-banner";
        document.getElementById("resultBanner").style.display = "none";

        setExplanation(
          "Click 'Start' to begin. Watch how both pointers traverse their respective lists, switch to the other list when reaching null, and eventually meet at the intersection point!"
        );

        isRunning = false;
      }
    </script>
  </body>
</html>
