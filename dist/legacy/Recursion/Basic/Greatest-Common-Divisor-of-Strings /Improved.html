<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GCD of Strings - Optimal Concatenation Check</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg-dark: #050510;
        --bg-card: #0d0d1a;
        --bg-elevated: #151528;
        --bg-glass: rgba(255, 255, 255, 0.03);
        --accent-gold: #f59e0b;
        --accent-emerald: #10b981;
        --accent-violet: #8b5cf6;
        --accent-cyan: #06b6d4;
        --accent-rose: #f43f5e;
        --accent-blue: #3b82f6;
        --text-primary: #f1f5f9;
        --text-secondary: #94a3b8;
        --text-muted: #475569;
        --border-color: #1e293b;
        --glow-gold: rgba(245, 158, 11, 0.3);
        --glow-emerald: rgba(16, 185, 129, 0.3);
        --glow-violet: rgba(139, 92, 246, 0.3);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", sans-serif;
        background: var(--bg-dark);
        background-image: radial-gradient(
            ellipse at 10% 10%,
            rgba(245, 158, 11, 0.08) 0%,
            transparent 40%
          ),
          radial-gradient(
            ellipse at 90% 90%,
            rgba(16, 185, 129, 0.08) 0%,
            transparent 40%
          ),
          radial-gradient(
            ellipse at 50% 50%,
            rgba(139, 92, 246, 0.05) 0%,
            transparent 60%
          );
        color: var(--text-primary);
        min-height: 100vh;
        overflow-x: hidden;
      }

      .container {
        max-width: 1500px;
        margin: 0 auto;
        padding: 2rem;
      }

      /* Header */
      .header {
        text-align: center;
        margin-bottom: 2.5rem;
        padding: 3rem;
        background: linear-gradient(
          135deg,
          var(--bg-card) 0%,
          rgba(245, 158, 11, 0.08) 100%
        );
        border-radius: 28px;
        border: 1px solid var(--border-color);
        position: relative;
        overflow: hidden;
      }

      .header::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(
          90deg,
          var(--accent-gold),
          var(--accent-emerald),
          var(--accent-violet)
        );
      }

      .header::after {
        content: "‚ú®";
        position: absolute;
        top: 20px;
        right: 30px;
        font-size: 2rem;
        opacity: 0.5;
      }

      .header h1 {
        font-size: 3rem;
        font-weight: 800;
        background: linear-gradient(
          135deg,
          var(--accent-gold),
          var(--accent-emerald)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 0.75rem;
        letter-spacing: -1px;
      }

      .header .subtitle {
        color: var(--text-secondary);
        font-size: 1.2rem;
        max-width: 700px;
        margin: 0 auto;
      }

      .badge-row {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-top: 1.5rem;
        flex-wrap: wrap;
      }

      .badge {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.6rem 1.25rem;
        border-radius: 30px;
        font-size: 0.9rem;
        font-weight: 600;
      }

      .badge.gold {
        background: rgba(245, 158, 11, 0.15);
        color: var(--accent-gold);
        border: 1px solid rgba(245, 158, 11, 0.3);
      }

      .badge.emerald {
        background: rgba(16, 185, 129, 0.15);
        color: var(--accent-emerald);
        border: 1px solid rgba(16, 185, 129, 0.3);
      }

      /* Magic Formula Box */
      .magic-formula {
        background: linear-gradient(
          135deg,
          rgba(139, 92, 246, 0.1),
          rgba(245, 158, 11, 0.05)
        );
        border: 2px solid var(--accent-violet);
        border-radius: 20px;
        padding: 2rem;
        margin-bottom: 2rem;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .magic-formula::before {
        content: "üîÆ";
        position: absolute;
        top: 15px;
        left: 20px;
        font-size: 1.5rem;
      }

      .magic-label {
        font-size: 0.9rem;
        color: var(--accent-violet);
        text-transform: uppercase;
        letter-spacing: 3px;
        margin-bottom: 1rem;
        font-weight: 600;
      }

      .magic-text {
        font-family: "JetBrains Mono", monospace;
        font-size: 1.6rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 1rem;
      }

      .magic-text .keyword {
        color: var(--accent-gold);
      }

      .magic-text .op {
        color: var(--accent-emerald);
      }

      .magic-explanation {
        color: var(--text-secondary);
        font-size: 1rem;
        line-height: 1.7;
      }

      /* Whiteboard */
      .whiteboard {
        background: var(--bg-card);
        border-radius: 24px;
        border: 1px solid var(--border-color);
        padding: 2rem;
        margin-bottom: 2rem;
        position: relative;
      }

      .whiteboard-title {
        font-size: 1.3rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }

      .whiteboard-title .icon {
        width: 44px;
        height: 44px;
        background: linear-gradient(
          135deg,
          var(--accent-gold),
          var(--accent-emerald)
        );
        border-radius: 14px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.3rem;
      }

      /* Input Display */
      .input-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1.5rem;
        margin-bottom: 2rem;
      }

      @media (max-width: 768px) {
        .input-grid {
          grid-template-columns: 1fr;
        }
      }

      .input-card {
        background: var(--bg-elevated);
        border-radius: 16px;
        padding: 1.5rem;
        border: 1px solid var(--border-color);
      }

      .input-label {
        font-size: 0.75rem;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 2px;
        margin-bottom: 0.75rem;
      }

      .string-row {
        display: flex;
        gap: 5px;
        flex-wrap: wrap;
      }

      .char-cell {
        width: 50px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 12px;
        font-family: "JetBrains Mono", monospace;
        font-size: 1.2rem;
        font-weight: 600;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
      }

      .char-cell.str1 {
        background: linear-gradient(
          135deg,
          var(--accent-cyan),
          var(--accent-blue)
        );
      }

      .char-cell.str2 {
        background: linear-gradient(135deg, var(--accent-violet), #a855f7);
      }

      .char-cell.concat {
        background: linear-gradient(135deg, var(--accent-gold), #d97706);
      }

      .char-cell.candidate {
        background: linear-gradient(135deg, var(--accent-emerald), #059669);
        transform: scale(1.12);
        box-shadow: 0 0 30px var(--glow-emerald);
      }

      .char-cell.comparing {
        animation: compareFlash 0.6s ease-in-out;
      }

      @keyframes compareFlash {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.15);
          box-shadow: 0 0 25px var(--glow-gold);
        }
      }

      .char-cell.match {
        box-shadow: 0 0 20px var(--glow-emerald);
      }

      .char-cell.mismatch {
        box-shadow: 0 0 20px rgba(244, 63, 94, 0.5);
        background: linear-gradient(
          135deg,
          var(--accent-rose),
          #e11d48
        ) !important;
      }

      .char-cell.dimmed {
        opacity: 0.2;
        transform: scale(0.85);
      }

      .char-index {
        position: absolute;
        bottom: -18px;
        font-size: 0.65rem;
        color: var(--text-muted);
      }

      /* Concatenation Visualization */
      .concat-section {
        background: var(--bg-elevated);
        border-radius: 20px;
        padding: 2rem;
        margin-bottom: 2rem;
        border: 1px solid var(--border-color);
      }

      .concat-title {
        font-size: 1.1rem;
        font-weight: 600;
        margin-bottom: 1.5rem;
        color: var(--text-secondary);
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .concat-row {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1.5rem;
        flex-wrap: wrap;
      }

      .concat-label {
        font-family: "JetBrains Mono", monospace;
        font-size: 1rem;
        color: var(--text-muted);
        min-width: 120px;
      }

      .concat-display {
        display: flex;
        gap: 4px;
        flex-wrap: wrap;
        align-items: center;
      }

      .concat-display .char-cell {
        width: 42px;
        height: 42px;
        font-size: 1rem;
      }

      .concat-operator {
        font-size: 1.5rem;
        color: var(--text-muted);
        margin: 0 0.5rem;
      }

      .concat-divider {
        width: 3px;
        height: 42px;
        background: var(--text-muted);
        border-radius: 2px;
        margin: 0 0.25rem;
      }

      /* Comparison Result */
      .comparison-result {
        text-align: center;
        padding: 1.5rem;
        border-radius: 16px;
        margin-top: 1.5rem;
        transition: all 0.4s ease;
        opacity: 0;
        transform: translateY(10px);
      }

      .comparison-result.visible {
        opacity: 1;
        transform: translateY(0);
      }

      .comparison-result.equal {
        background: linear-gradient(
          135deg,
          rgba(16, 185, 129, 0.15),
          rgba(16, 185, 129, 0.05)
        );
        border: 2px solid var(--accent-emerald);
      }

      .comparison-result.not-equal {
        background: linear-gradient(
          135deg,
          rgba(244, 63, 94, 0.15),
          rgba(244, 63, 94, 0.05)
        );
        border: 2px solid var(--accent-rose);
      }

      .comparison-icon {
        font-size: 3rem;
        margin-bottom: 0.5rem;
      }

      .comparison-text {
        font-size: 1.25rem;
        font-weight: 700;
      }

      .comparison-result.equal .comparison-text {
        color: var(--accent-emerald);
      }

      .comparison-result.not-equal .comparison-text {
        color: var(--accent-rose);
      }

      .comparison-subtext {
        color: var(--text-secondary);
        margin-top: 0.5rem;
      }

      /* GCD Extraction */
      .gcd-extract-section {
        background: var(--bg-elevated);
        border-radius: 20px;
        padding: 2rem;
        border: 1px solid var(--border-color);
        display: none;
      }

      .gcd-extract-section.visible {
        display: block;
        animation: fadeIn 0.5s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .gcd-formula-display {
        text-align: center;
        padding: 1.5rem;
        background: var(--bg-dark);
        border-radius: 12px;
        margin-bottom: 1.5rem;
      }

      .gcd-formula-text {
        font-family: "JetBrains Mono", monospace;
        font-size: 1.3rem;
        color: var(--text-primary);
      }

      .gcd-formula-text .num {
        color: var(--accent-cyan);
        font-weight: 700;
      }

      .gcd-formula-text .result {
        color: var(--accent-emerald);
        font-weight: 700;
        font-size: 1.5rem;
      }

      .gcd-arrow {
        margin: 0 0.75rem;
        color: var(--text-muted);
      }

      /* Result Banner */
      .result-banner {
        background: linear-gradient(
          135deg,
          rgba(245, 158, 11, 0.2),
          rgba(16, 185, 129, 0.1)
        );
        border: 3px solid var(--accent-gold);
        border-radius: 24px;
        padding: 3rem;
        text-align: center;
        margin: 2rem 0;
        display: none;
        position: relative;
        overflow: hidden;
      }

      .result-banner.visible {
        display: block;
        animation: celebrateIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      }

      @keyframes celebrateIn {
        0% {
          opacity: 0;
          transform: scale(0.8);
        }
        50% {
          transform: scale(1.03);
        }
        100% {
          opacity: 1;
          transform: scale(1);
        }
      }

      .result-banner::before {
        content: "üéâ";
        position: absolute;
        top: 20px;
        left: 30px;
        font-size: 2rem;
      }

      .result-banner::after {
        content: "üéâ";
        position: absolute;
        top: 20px;
        right: 30px;
        font-size: 2rem;
      }

      .result-label {
        font-size: 1.2rem;
        color: var(--accent-gold);
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 3px;
        margin-bottom: 0.75rem;
      }

      .result-value {
        font-family: "JetBrains Mono", monospace;
        font-size: 4rem;
        font-weight: 800;
        background: linear-gradient(
          135deg,
          var(--accent-gold),
          var(--accent-emerald)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin: 1rem 0;
      }

      .result-explanation {
        color: var(--text-secondary);
        font-size: 1.1rem;
        line-height: 1.8;
        max-width: 600px;
        margin: 0 auto;
      }

      /* Step Progress */
      .step-progress {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 0;
        margin: 2rem 0;
        padding: 1.5rem;
        background: var(--bg-elevated);
        border-radius: 20px;
      }

      .progress-step {
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
        padding: 0 2.5rem;
      }

      .progress-step:not(:last-child)::after {
        content: "";
        position: absolute;
        right: -15px;
        top: 22px;
        width: 30px;
        height: 4px;
        background: var(--border-color);
        border-radius: 2px;
        transition: background 0.3s ease;
      }

      .progress-step.completed:not(:last-child)::after {
        background: var(--accent-emerald);
      }

      .progress-dot {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        background: var(--bg-dark);
        border: 3px solid var(--border-color);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.3rem;
        margin-bottom: 0.75rem;
        transition: all 0.3s ease;
      }

      .progress-step.active .progress-dot {
        border-color: var(--accent-gold);
        box-shadow: 0 0 25px var(--glow-gold);
        animation: pulseGlow 2s ease-in-out infinite;
      }

      @keyframes pulseGlow {
        0%,
        100% {
          box-shadow: 0 0 20px var(--glow-gold);
        }
        50% {
          box-shadow: 0 0 35px var(--glow-gold);
        }
      }

      .progress-step.completed .progress-dot {
        background: var(--accent-emerald);
        border-color: var(--accent-emerald);
      }

      .progress-label {
        font-size: 0.8rem;
        color: var(--text-muted);
        text-align: center;
        max-width: 90px;
      }

      .progress-step.active .progress-label,
      .progress-step.completed .progress-label {
        color: var(--text-primary);
      }

      /* Current Action Display */
      .current-action {
        background: linear-gradient(
          135deg,
          var(--bg-elevated),
          rgba(245, 158, 11, 0.05)
        );
        border: 1px solid var(--accent-gold);
        border-radius: 16px;
        padding: 1.25rem 2rem;
        text-align: center;
        margin-bottom: 2rem;
      }

      .action-label {
        font-size: 0.7rem;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 2px;
        margin-bottom: 0.5rem;
      }

      .action-text {
        font-size: 1.15rem;
        font-weight: 600;
        color: var(--accent-gold);
      }

      /* Controls */
      .controls {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin: 2rem 0;
        flex-wrap: wrap;
      }

      .btn {
        padding: 1rem 2.25rem;
        border-radius: 16px;
        font-size: 1rem;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border: none;
        display: flex;
        align-items: center;
        gap: 0.6rem;
      }

      .btn-primary {
        background: linear-gradient(135deg, var(--accent-gold), #d97706);
        color: var(--bg-dark);
      }

      .btn-primary:hover {
        transform: translateY(-3px);
        box-shadow: 0 15px 40px var(--glow-gold);
      }

      .btn-secondary {
        background: var(--bg-elevated);
        color: var(--text-primary);
        border: 2px solid var(--border-color);
      }

      .btn-secondary:hover {
        border-color: var(--accent-gold);
        box-shadow: 0 0 25px var(--glow-gold);
      }

      .btn:disabled {
        opacity: 0.4;
        cursor: not-allowed;
        transform: none !important;
        box-shadow: none !important;
      }

      .speed-control {
        display: flex;
        align-items: center;
        gap: 1rem;
        background: var(--bg-elevated);
        padding: 0.75rem 1.5rem;
        border-radius: 14px;
        border: 1px solid var(--border-color);
      }

      .speed-label {
        font-size: 0.85rem;
        color: var(--text-muted);
      }

      .speed-slider {
        -webkit-appearance: none;
        width: 100px;
        height: 6px;
        border-radius: 3px;
        background: var(--bg-dark);
      }

      .speed-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 22px;
        height: 22px;
        border-radius: 50%;
        background: linear-gradient(
          135deg,
          var(--accent-gold),
          var(--accent-emerald)
        );
        cursor: pointer;
      }

      /* Algorithm Summary */
      .algo-summary {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1.5rem;
        margin-top: 2rem;
      }

      @media (max-width: 900px) {
        .algo-summary {
          grid-template-columns: 1fr;
        }
      }

      .algo-card {
        background: var(--bg-elevated);
        border-radius: 16px;
        padding: 1.5rem;
        border: 1px solid var(--border-color);
        text-align: center;
      }

      .algo-card.highlight {
        border-color: var(--accent-emerald);
        background: linear-gradient(
          135deg,
          var(--bg-elevated),
          rgba(16, 185, 129, 0.08)
        );
      }

      .algo-card-icon {
        font-size: 2rem;
        margin-bottom: 0.75rem;
      }

      .algo-card-title {
        font-weight: 700;
        margin-bottom: 0.5rem;
        color: var(--text-primary);
      }

      .algo-card.highlight .algo-card-title {
        color: var(--accent-emerald);
      }

      .algo-card-value {
        font-family: "JetBrains Mono", monospace;
        font-size: 1.1rem;
        color: var(--accent-gold);
      }

      .algo-card.highlight .algo-card-value {
        color: var(--accent-emerald);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <div class="header">
        <h1>üèÜ Optimal Solution</h1>
        <p class="subtitle">
          The elegant one-liner insight: Concatenation order reveals
          divisibility!
        </p>
        <div class="badge-row">
          <span class="badge gold">‚ö° O(m + n) Time</span>
          <span class="badge emerald">‚úì Most Elegant</span>
        </div>
      </div>

      <!-- Magic Formula -->
      <div class="magic-formula">
        <div class="magic-label">The Magic Formula</div>
        <div class="magic-text">
          <span class="keyword">str1 + str2</span> <span class="op">===</span>
          <span class="keyword">str2 + str1</span>
          <span class="op"> ‚ü∫ </span> Common divisor exists
        </div>
        <div class="magic-explanation">
          If both strings are built from the same repeating pattern,
          concatenating them in either order produces the
          <strong>same result</strong>!
        </div>
      </div>

      <!-- Step Progress -->
      <div class="step-progress">
        <div class="progress-step" id="prog-1">
          <div class="progress-dot">üîó</div>
          <div class="progress-label">Concatenate</div>
        </div>
        <div class="progress-step" id="prog-2">
          <div class="progress-dot">‚öñÔ∏è</div>
          <div class="progress-label">Compare</div>
        </div>
        <div class="progress-step" id="prog-3">
          <div class="progress-dot">üî¢</div>
          <div class="progress-label">Find GCD</div>
        </div>
        <div class="progress-step" id="prog-4">
          <div class="progress-dot">‚úÇÔ∏è</div>
          <div class="progress-label">Extract</div>
        </div>
        <div class="progress-step" id="prog-5">
          <div class="progress-dot">üéâ</div>
          <div class="progress-label">Result</div>
        </div>
      </div>

      <!-- Current Action -->
      <div class="current-action">
        <div class="action-label">Current Step</div>
        <div class="action-text" id="action-text">
          Click "Start" to begin the visualization
        </div>
      </div>

      <!-- Input Display -->
      <div class="whiteboard">
        <div class="whiteboard-title">
          <span class="icon">üì•</span>
          Input Strings
        </div>

        <div class="input-grid">
          <div class="input-card">
            <div class="input-label">str1 (length: 6)</div>
            <div class="string-row" id="str1-display"></div>
          </div>
          <div class="input-card">
            <div class="input-label">str2 (length: 4)</div>
            <div class="string-row" id="str2-display"></div>
          </div>
        </div>
      </div>

      <!-- Concatenation Visualization -->
      <div class="whiteboard" id="concat-whiteboard" style="display: none">
        <div class="whiteboard-title">
          <span class="icon">üîó</span>
          Step 1: Build Concatenations
        </div>

        <div class="concat-section">
          <div class="concat-row" id="concat-row-1">
            <div class="concat-label">str1 + str2 =</div>
            <div class="concat-display" id="concat-display-1"></div>
          </div>
          <div class="concat-row" id="concat-row-2">
            <div class="concat-label">str2 + str1 =</div>
            <div class="concat-display" id="concat-display-2"></div>
          </div>

          <div class="comparison-result" id="comparison-result">
            <div class="comparison-icon" id="comparison-icon"></div>
            <div class="comparison-text" id="comparison-text"></div>
            <div class="comparison-subtext" id="comparison-subtext"></div>
          </div>
        </div>
      </div>

      <!-- GCD Extraction -->
      <div class="whiteboard" id="gcd-whiteboard" style="display: none">
        <div class="whiteboard-title">
          <span class="icon">üî¢</span>
          Steps 3-4: Find GCD and Extract Result
        </div>

        <div class="gcd-extract-section visible">
          <div class="gcd-formula-display">
            <div class="gcd-formula-text" id="gcd-formula-text">
              GCD(<span class="num">6</span>, <span class="num">4</span>)
              <span class="gcd-arrow">‚Üí</span>
              GCD(<span class="num">4</span>, <span class="num">2</span>)
              <span class="gcd-arrow">‚Üí</span>
              GCD(<span class="num">2</span>, <span class="num">0</span>)
              <span class="gcd-arrow">=</span>
              <span class="result">2</span>
            </div>
          </div>

          <div class="concat-section" style="margin-top: 1.5rem">
            <div class="concat-title">
              ‚úÇÔ∏è Extract first 2 characters from str1:
            </div>
            <div class="string-row" id="extract-display"></div>
          </div>
        </div>
      </div>

      <!-- Result Banner -->
      <div class="result-banner" id="result-banner">
        <div class="result-label">GCD of Strings</div>
        <div class="result-value">"AB"</div>
        <div class="result-explanation">
          The string <strong>"AB"</strong> is the largest string that divides
          both!<br />
          ‚Ä¢ "ABABAB" = "AB" √ó 3<br />
          ‚Ä¢ "ABAB" = "AB" √ó 2
        </div>
      </div>

      <!-- Controls -->
      <div class="controls">
        <button class="btn btn-primary" id="startBtn" onclick="start()">
          ‚ñ∂Ô∏è Start
        </button>
        <button
          class="btn btn-secondary"
          id="nextBtn"
          onclick="nextStep()"
          disabled
        >
          ‚è≠Ô∏è Next Step
        </button>
        <button class="btn btn-secondary" id="autoBtn" onclick="toggleAuto()">
          üîÑ Auto Play
        </button>
        <button class="btn btn-secondary" onclick="reset()">üîÅ Reset</button>
        <div class="speed-control">
          <span class="speed-label">Speed:</span>
          <input
            type="range"
            class="speed-slider"
            id="speedSlider"
            min="300"
            max="2000"
            value="1000"
          />
        </div>
      </div>

      <!-- Algorithm Summary -->
      <div class="algo-summary">
        <div class="algo-card">
          <div class="algo-card-icon">‚è±Ô∏è</div>
          <div class="algo-card-title">Time Complexity</div>
          <div class="algo-card-value">O(m + n)</div>
        </div>
        <div class="algo-card">
          <div class="algo-card-icon">üíæ</div>
          <div class="algo-card-title">Space Complexity</div>
          <div class="algo-card-value">O(m + n)</div>
        </div>
        <div class="algo-card highlight">
          <div class="algo-card-icon">üéØ</div>
          <div class="algo-card-title">Key Insight</div>
          <div class="algo-card-value">1 Comparison!</div>
        </div>
      </div>
    </div>

    <script>
      const str1 = "ABABAB";
      const str2 = "ABAB";
      const concat1 = str1 + str2; // "ABABABAB"
      const concat2 = str2 + str1; // "ABABAB"

      let phase = "init";
      let compareIndex = 0;
      let isAutoPlaying = false;
      let autoPlayInterval = null;

      function initDisplays() {
        document.getElementById("str1-display").innerHTML = str1
          .split("")
          .map(
            (c, i) =>
              `<div class="char-cell str1">${c}<span class="char-index">${i}</span></div>`
          )
          .join("");

        document.getElementById("str2-display").innerHTML = str2
          .split("")
          .map(
            (c, i) =>
              `<div class="char-cell str2">${c}<span class="char-index">${i}</span></div>`
          )
          .join("");
      }

      function setAction(text) {
        document.getElementById("action-text").textContent = text;
      }

      function updateProgress(step, status) {
        const el = document.getElementById(`prog-${step}`);
        el.classList.remove("active", "completed");
        if (status === "active") el.classList.add("active");
        if (status === "completed") el.classList.add("completed");
      }

      function start() {
        document.getElementById("startBtn").disabled = true;
        document.getElementById("nextBtn").disabled = false;
        phase = "show-concat-section";
        nextStep();
      }

      function nextStep() {
        if (phase === "show-concat-section") {
          document.getElementById("concat-whiteboard").style.display = "block";
          updateProgress(1, "active");
          setAction("Building concatenation: str1 + str2");
          phase = "build-concat1";
        } else if (phase === "build-concat1") {
          // Build str1 + str2
          let html = "";
          for (let i = 0; i < str1.length; i++) {
            html += `<div class="char-cell str1">${str1[i]}</div>`;
          }
          html += '<div class="concat-divider"></div>';
          for (let i = 0; i < str2.length; i++) {
            html += `<div class="char-cell str2">${str2[i]}</div>`;
          }
          document.getElementById("concat-display-1").innerHTML = html;
          setAction('str1 + str2 = "' + concat1 + '"');
          phase = "build-concat2";
        } else if (phase === "build-concat2") {
          setAction("Building concatenation: str2 + str1");
          // Build str2 + str1
          let html = "";
          for (let i = 0; i < str2.length; i++) {
            html += `<div class="char-cell str2">${str2[i]}</div>`;
          }
          html += '<div class="concat-divider"></div>';
          for (let i = 0; i < str1.length; i++) {
            html += `<div class="char-cell str1">${str1[i]}</div>`;
          }
          document.getElementById("concat-display-2").innerHTML = html;
          setAction('str2 + str1 = "' + concat2 + '"');

          updateProgress(1, "completed");
          phase = "start-compare";
        } else if (phase === "start-compare") {
          updateProgress(2, "active");
          setAction("Comparing character by character...");
          compareIndex = 0;
          phase = "compare";
        } else if (phase === "compare") {
          // Compare character by character
          if (compareIndex < concat1.length) {
            const cells1 = document.querySelectorAll(
              "#concat-display-1 .char-cell"
            );
            const cells2 = document.querySelectorAll(
              "#concat-display-2 .char-cell"
            );

            // Remove previous highlighting
            cells1.forEach((c) => c.classList.remove("comparing", "match"));
            cells2.forEach((c) => c.classList.remove("comparing", "match"));

            // Current cells (account for divider)
            const idx1 =
              compareIndex < str1.length ? compareIndex : compareIndex + 1;
            const idx2 =
              compareIndex < str2.length ? compareIndex : compareIndex + 1;

            if (cells1[idx1]) cells1[idx1].classList.add("comparing");
            if (cells2[idx2]) cells2[idx2].classList.add("comparing");

            // Mark as match
            setTimeout(() => {
              if (cells1[idx1]) {
                cells1[idx1].classList.remove("comparing");
                cells1[idx1].classList.add("match");
              }
              if (cells2[idx2]) {
                cells2[idx2].classList.remove("comparing");
                cells2[idx2].classList.add("match");
              }
            }, 200);

            setAction(
              `Comparing position ${compareIndex}: '${concat1[compareIndex]}' === '${concat2[compareIndex]}' ‚úì`
            );
            compareIndex++;

            if (compareIndex >= concat1.length) {
              phase = "compare-done";
            }
          }
        } else if (phase === "compare-done") {
          updateProgress(2, "completed");

          // Show comparison result
          const result = document.getElementById("comparison-result");
          result.classList.add("visible", "equal");
          document.getElementById("comparison-icon").textContent = "‚úÖ";
          document.getElementById("comparison-text").textContent =
            "str1 + str2 === str2 + str1";
          document.getElementById("comparison-subtext").textContent =
            "A common divisor EXISTS!";

          setAction("Strings are EQUAL! Common divisor exists.");
          phase = "show-gcd";
        } else if (phase === "show-gcd") {
          document.getElementById("gcd-whiteboard").style.display = "block";
          updateProgress(3, "active");
          setAction("Computing GCD(6, 4) = 2");
          phase = "show-extract";
        } else if (phase === "show-extract") {
          updateProgress(3, "completed");
          updateProgress(4, "active");

          // Show extraction
          const gcdLen = 2;
          let html = "";
          for (let i = 0; i < str1.length; i++) {
            const classes =
              i < gcdLen ? "char-cell candidate" : "char-cell str1 dimmed";
            html += `<div class="${classes}">${str1[i]}</div>`;
          }
          document.getElementById("extract-display").innerHTML = html;

          setAction('Extracting first 2 characters: "AB"');
          phase = "show-result";
        } else if (phase === "show-result") {
          updateProgress(4, "completed");
          updateProgress(5, "active");

          document.getElementById("result-banner").classList.add("visible");
          setAction('üéâ Complete! GCD of Strings = "AB"');

          updateProgress(5, "completed");

          document.getElementById("nextBtn").disabled = true;
          stopAuto();
          phase = "done";
        }
      }

      function toggleAuto() {
        if (isAutoPlaying) {
          stopAuto();
        } else {
          startAuto();
        }
      }

      function startAuto() {
        if (phase === "done" || phase === "init") return;
        isAutoPlaying = true;
        document.getElementById("autoBtn").textContent = "‚è∏Ô∏è Pause";
        const speed = 2300 - document.getElementById("speedSlider").value;
        autoPlayInterval = setInterval(() => {
          if (phase !== "done") {
            nextStep();
          } else {
            stopAuto();
          }
        }, speed);
      }

      function stopAuto() {
        isAutoPlaying = false;
        document.getElementById("autoBtn").textContent = "üîÑ Auto Play";
        if (autoPlayInterval) {
          clearInterval(autoPlayInterval);
          autoPlayInterval = null;
        }
      }

      function reset() {
        stopAuto();
        phase = "init";
        compareIndex = 0;

        document.getElementById("startBtn").disabled = false;
        document.getElementById("nextBtn").disabled = true;

        // Reset progress
        for (let i = 1; i <= 5; i++) {
          document
            .getElementById(`prog-${i}`)
            .classList.remove("active", "completed");
        }

        // Hide sections
        document.getElementById("concat-whiteboard").style.display = "none";
        document.getElementById("gcd-whiteboard").style.display = "none";
        document.getElementById("result-banner").classList.remove("visible");

        // Reset comparison result
        const result = document.getElementById("comparison-result");
        result.classList.remove("visible", "equal", "not-equal");

        // Clear concat displays
        document.getElementById("concat-display-1").innerHTML = "";
        document.getElementById("concat-display-2").innerHTML = "";
        document.getElementById("extract-display").innerHTML = "";

        setAction('Click "Start" to begin the visualization');
        initDisplays();
      }

      // Initialize
      initDisplays();
    </script>
  </body>
</html>
