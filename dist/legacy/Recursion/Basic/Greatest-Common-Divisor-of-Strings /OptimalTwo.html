<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GCD of Strings - Optimal Space-Efficient</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg-dark: #030712;
        --bg-card: #0f172a;
        --bg-elevated: #1e293b;
        --bg-code: #0c1222;
        --accent-lime: #84cc16;
        --accent-cyan: #22d3ee;
        --accent-purple: #a855f7;
        --accent-amber: #f59e0b;
        --accent-rose: #fb7185;
        --accent-emerald: #34d399;
        --text-primary: #f8fafc;
        --text-secondary: #94a3b8;
        --text-muted: #64748b;
        --border-color: #334155;
        --glow-lime: rgba(132, 204, 22, 0.3);
        --glow-cyan: rgba(34, 211, 238, 0.3);
        --glow-purple: rgba(168, 85, 247, 0.3);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", sans-serif;
        background: var(--bg-dark);
        background-image: radial-gradient(
            ellipse at 0% 0%,
            rgba(132, 204, 22, 0.08) 0%,
            transparent 50%
          ),
          radial-gradient(
            ellipse at 100% 100%,
            rgba(34, 211, 238, 0.08) 0%,
            transparent 50%
          );
        color: var(--text-primary);
        min-height: 100vh;
        overflow-x: hidden;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 2rem;
      }

      /* Header */
      .header {
        text-align: center;
        margin-bottom: 2.5rem;
        padding: 3rem;
        background: linear-gradient(
          135deg,
          var(--bg-card) 0%,
          rgba(132, 204, 22, 0.08) 100%
        );
        border-radius: 28px;
        border: 1px solid var(--border-color);
        position: relative;
        overflow: hidden;
      }

      .header::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(
          90deg,
          var(--accent-lime),
          var(--accent-cyan),
          var(--accent-purple)
        );
      }

      .header h1 {
        font-size: 2.75rem;
        font-weight: 800;
        background: linear-gradient(
          135deg,
          var(--accent-lime),
          var(--accent-cyan)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 0.75rem;
      }

      .header .subtitle {
        color: var(--text-secondary);
        font-size: 1.15rem;
      }

      .badge-row {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-top: 1.5rem;
        flex-wrap: wrap;
      }

      .badge {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.6rem 1.25rem;
        border-radius: 30px;
        font-size: 0.9rem;
        font-weight: 600;
      }

      .badge.lime {
        background: rgba(132, 204, 22, 0.15);
        color: var(--accent-lime);
        border: 1px solid rgba(132, 204, 22, 0.3);
      }

      .badge.cyan {
        background: rgba(34, 211, 238, 0.15);
        color: var(--accent-cyan);
        border: 1px solid rgba(34, 211, 238, 0.3);
      }

      .badge.purple {
        background: rgba(168, 85, 247, 0.15);
        color: var(--accent-purple);
        border: 1px solid rgba(168, 85, 247, 0.3);
      }

      /* Key Insight Box */
      .insight-box {
        background: linear-gradient(
          135deg,
          rgba(132, 204, 22, 0.1),
          rgba(34, 211, 238, 0.05)
        );
        border: 2px solid var(--accent-lime);
        border-radius: 20px;
        padding: 2rem;
        margin-bottom: 2rem;
        position: relative;
      }

      .insight-icon {
        position: absolute;
        top: -15px;
        left: 25px;
        background: var(--bg-dark);
        padding: 0 0.75rem;
        font-size: 1.5rem;
      }

      .insight-title {
        font-size: 1.1rem;
        font-weight: 700;
        color: var(--accent-lime);
        margin-bottom: 1rem;
      }

      .insight-text {
        color: var(--text-secondary);
        line-height: 1.8;
      }

      .insight-text code {
        background: var(--bg-code);
        padding: 0.25rem 0.6rem;
        border-radius: 6px;
        font-family: "JetBrains Mono", monospace;
        font-size: 0.9rem;
        color: var(--accent-cyan);
      }

      .insight-text strong {
        color: var(--accent-lime);
      }

      /* Whiteboard */
      .whiteboard {
        background: var(--bg-card);
        border-radius: 24px;
        border: 1px solid var(--border-color);
        padding: 2rem;
        margin-bottom: 2rem;
      }

      .whiteboard-title {
        font-size: 1.25rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }

      .whiteboard-title .icon {
        width: 44px;
        height: 44px;
        background: linear-gradient(
          135deg,
          var(--accent-lime),
          var(--accent-cyan)
        );
        border-radius: 14px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.3rem;
      }

      /* Input Strings */
      .strings-section {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1.5rem;
        margin-bottom: 2rem;
      }

      @media (max-width: 768px) {
        .strings-section {
          grid-template-columns: 1fr;
        }
      }

      .string-card {
        background: var(--bg-elevated);
        border-radius: 16px;
        padding: 1.5rem;
        border: 1px solid var(--border-color);
      }

      .string-label {
        font-size: 0.75rem;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 2px;
        margin-bottom: 1rem;
      }

      .string-chars {
        display: flex;
        gap: 6px;
        flex-wrap: wrap;
      }

      .char-box {
        width: 52px;
        height: 52px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        border-radius: 12px;
        font-family: "JetBrains Mono", monospace;
        font-size: 1.25rem;
        font-weight: 600;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
      }

      .char-box .idx {
        position: absolute;
        bottom: -20px;
        font-size: 0.7rem;
        color: var(--text-muted);
        font-weight: 400;
      }

      .char-box.str1 {
        background: linear-gradient(135deg, var(--accent-cyan), #0891b2);
      }

      .char-box.str2 {
        background: linear-gradient(135deg, var(--accent-purple), #7c3aed);
      }

      .char-box.active {
        transform: scale(1.15);
        box-shadow: 0 0 30px var(--glow-cyan);
        z-index: 10;
      }

      .char-box.active.str2 {
        box-shadow: 0 0 30px var(--glow-purple);
      }

      .char-box.match {
        background: linear-gradient(
          135deg,
          var(--accent-lime),
          #65a30d
        ) !important;
        box-shadow: 0 0 20px var(--glow-lime);
      }

      .char-box.dimmed {
        opacity: 0.25;
      }

      .char-box.result {
        background: linear-gradient(135deg, var(--accent-emerald), #10b981);
        transform: scale(1.1);
        box-shadow: 0 0 25px rgba(52, 211, 153, 0.4);
      }

      /* Virtual Concatenation Display */
      .virtual-concat-section {
        background: var(--bg-elevated);
        border-radius: 20px;
        padding: 2rem;
        margin-bottom: 2rem;
        border: 1px solid var(--border-color);
      }

      .virtual-title {
        font-size: 1rem;
        font-weight: 600;
        color: var(--text-secondary);
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .virtual-row {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1.5rem;
        flex-wrap: wrap;
      }

      .virtual-label {
        font-family: "JetBrains Mono", monospace;
        font-size: 0.95rem;
        color: var(--text-muted);
        min-width: 140px;
      }

      .virtual-chars {
        display: flex;
        gap: 4px;
        flex-wrap: wrap;
        position: relative;
      }

      .virtual-chars .char-box {
        width: 44px;
        height: 44px;
        font-size: 1.05rem;
      }

      .divider-line {
        width: 3px;
        height: 44px;
        background: var(--text-muted);
        border-radius: 2px;
        margin: 0 4px;
      }

      /* Pointer Display */
      .pointer-section {
        background: var(--bg-code);
        border-radius: 16px;
        padding: 1.5rem;
        margin-top: 1.5rem;
        border: 1px solid var(--border-color);
      }

      .pointer-title {
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--accent-amber);
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .pointer-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
      }

      .pointer-item {
        background: var(--bg-elevated);
        border-radius: 12px;
        padding: 1rem;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .pointer-name {
        font-size: 0.8rem;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .pointer-value {
        font-family: "JetBrains Mono", monospace;
        font-size: 1.25rem;
        font-weight: 700;
        color: var(--accent-amber);
      }

      .pointer-formula {
        font-family: "JetBrains Mono", monospace;
        font-size: 0.85rem;
        color: var(--text-secondary);
      }

      /* Comparison Display */
      .comparison-section {
        background: var(--bg-elevated);
        border-radius: 16px;
        padding: 1.5rem;
        margin-top: 1.5rem;
        text-align: center;
        border: 2px solid transparent;
        transition: all 0.3s ease;
      }

      .comparison-section.active {
        border-color: var(--accent-cyan);
      }

      .comparison-section.equal {
        border-color: var(--accent-lime);
        background: rgba(132, 204, 22, 0.1);
      }

      .comparison-title {
        font-size: 0.85rem;
        color: var(--text-muted);
        margin-bottom: 1rem;
      }

      .comparison-display {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 1.5rem;
        flex-wrap: wrap;
      }

      .compare-char {
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 14px;
        font-family: "JetBrains Mono", monospace;
        font-size: 1.5rem;
        font-weight: 700;
        transition: all 0.3s ease;
      }

      .compare-char.char1 {
        background: linear-gradient(135deg, var(--accent-cyan), #0891b2);
      }

      .compare-char.char2 {
        background: linear-gradient(135deg, var(--accent-purple), #7c3aed);
      }

      .compare-char.match {
        background: linear-gradient(
          135deg,
          var(--accent-lime),
          #65a30d
        ) !important;
        box-shadow: 0 0 25px var(--glow-lime);
      }

      .compare-operator {
        font-size: 2rem;
        color: var(--text-muted);
      }

      .compare-result {
        font-size: 2.5rem;
      }

      /* Result Banner */
      .result-banner {
        background: linear-gradient(
          135deg,
          rgba(132, 204, 22, 0.2),
          rgba(34, 211, 238, 0.1)
        );
        border: 3px solid var(--accent-lime);
        border-radius: 24px;
        padding: 3rem;
        text-align: center;
        margin: 2rem 0;
        display: none;
        animation: popIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .result-banner.visible {
        display: block;
      }

      @keyframes popIn {
        0% {
          opacity: 0;
          transform: scale(0.9);
        }
        50% {
          transform: scale(1.02);
        }
        100% {
          opacity: 1;
          transform: scale(1);
        }
      }

      .result-icon {
        font-size: 4rem;
        margin-bottom: 1rem;
      }

      .result-value {
        font-family: "JetBrains Mono", monospace;
        font-size: 3.5rem;
        font-weight: 800;
        background: linear-gradient(
          135deg,
          var(--accent-lime),
          var(--accent-cyan)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin: 0.5rem 0;
      }

      .result-explanation {
        color: var(--text-secondary);
        font-size: 1.1rem;
        line-height: 1.8;
      }

      /* Progress Timeline */
      .progress-bar {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0;
        margin: 2rem 0;
        padding: 1.5rem 2rem;
        background: var(--bg-elevated);
        border-radius: 20px;
        overflow-x: auto;
      }

      .progress-step {
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
        padding: 0 1.5rem;
        min-width: 100px;
      }

      .progress-step:not(:last-child)::after {
        content: "";
        position: absolute;
        right: -10px;
        top: 20px;
        width: 20px;
        height: 4px;
        background: var(--border-color);
        border-radius: 2px;
      }

      .progress-step.completed:not(:last-child)::after {
        background: var(--accent-lime);
      }

      .progress-dot {
        width: 44px;
        height: 44px;
        border-radius: 50%;
        background: var(--bg-dark);
        border: 3px solid var(--border-color);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        margin-bottom: 0.5rem;
        transition: all 0.3s ease;
      }

      .progress-step.active .progress-dot {
        border-color: var(--accent-cyan);
        box-shadow: 0 0 20px var(--glow-cyan);
        animation: pulseDot 1.5s ease-in-out infinite;
      }

      @keyframes pulseDot {
        0%,
        100% {
          box-shadow: 0 0 15px var(--glow-cyan);
        }
        50% {
          box-shadow: 0 0 30px var(--glow-cyan);
        }
      }

      .progress-step.completed .progress-dot {
        background: var(--accent-lime);
        border-color: var(--accent-lime);
      }

      .progress-label {
        font-size: 0.75rem;
        color: var(--text-muted);
        text-align: center;
      }

      .progress-step.active .progress-label,
      .progress-step.completed .progress-label {
        color: var(--text-primary);
      }

      /* Current Action */
      .current-action {
        background: linear-gradient(
          135deg,
          var(--bg-elevated),
          rgba(34, 211, 238, 0.05)
        );
        border: 1px solid var(--accent-cyan);
        border-radius: 16px;
        padding: 1.25rem 2rem;
        text-align: center;
        margin-bottom: 2rem;
      }

      .action-label {
        font-size: 0.7rem;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 2px;
        margin-bottom: 0.5rem;
      }

      .action-text {
        font-size: 1.15rem;
        font-weight: 600;
        color: var(--accent-cyan);
      }

      /* Memory Comparison */
      .memory-section {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1.5rem;
        margin-top: 2rem;
      }

      @media (max-width: 800px) {
        .memory-section {
          grid-template-columns: 1fr;
        }
      }

      .memory-card {
        background: var(--bg-elevated);
        border-radius: 16px;
        padding: 1.5rem;
        border: 1px solid var(--border-color);
        text-align: center;
      }

      .memory-card.optimal {
        border-color: var(--accent-lime);
        background: linear-gradient(
          135deg,
          var(--bg-elevated),
          rgba(132, 204, 22, 0.08)
        );
      }

      .memory-icon {
        font-size: 2.5rem;
        margin-bottom: 0.75rem;
      }

      .memory-title {
        font-weight: 700;
        margin-bottom: 0.75rem;
        color: var(--text-primary);
      }

      .memory-card.optimal .memory-title {
        color: var(--accent-lime);
      }

      .memory-value {
        font-family: "JetBrains Mono", monospace;
        font-size: 1.3rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
      }

      .memory-card:not(.optimal) .memory-value {
        color: var(--accent-rose);
      }

      .memory-card.optimal .memory-value {
        color: var(--accent-lime);
      }

      .memory-desc {
        font-size: 0.85rem;
        color: var(--text-muted);
      }

      /* Controls */
      .controls {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin: 2rem 0;
        flex-wrap: wrap;
      }

      .btn {
        padding: 1rem 2rem;
        border-radius: 14px;
        font-size: 1rem;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border: none;
        display: flex;
        align-items: center;
        gap: 0.6rem;
      }

      .btn-primary {
        background: linear-gradient(135deg, var(--accent-lime), #65a30d);
        color: var(--bg-dark);
      }

      .btn-primary:hover {
        transform: translateY(-3px);
        box-shadow: 0 15px 40px var(--glow-lime);
      }

      .btn-secondary {
        background: var(--bg-elevated);
        color: var(--text-primary);
        border: 2px solid var(--border-color);
      }

      .btn-secondary:hover {
        border-color: var(--accent-lime);
      }

      .btn:disabled {
        opacity: 0.4;
        cursor: not-allowed;
        transform: none !important;
      }

      .speed-control {
        display: flex;
        align-items: center;
        gap: 1rem;
        background: var(--bg-elevated);
        padding: 0.75rem 1.5rem;
        border-radius: 12px;
      }

      .speed-label {
        font-size: 0.85rem;
        color: var(--text-muted);
      }

      .speed-slider {
        -webkit-appearance: none;
        width: 100px;
        height: 6px;
        border-radius: 3px;
        background: var(--bg-dark);
      }

      .speed-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: linear-gradient(
          135deg,
          var(--accent-lime),
          var(--accent-cyan)
        );
        cursor: pointer;
      }

      /* Code Display */
      .code-section {
        background: var(--bg-code);
        border-radius: 16px;
        padding: 1.5rem;
        margin-top: 2rem;
        border: 1px solid var(--border-color);
        overflow-x: auto;
      }

      .code-title {
        font-size: 0.9rem;
        color: var(--accent-amber);
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .code-block {
        font-family: "JetBrains Mono", monospace;
        font-size: 0.9rem;
        line-height: 1.8;
        color: var(--text-secondary);
      }

      .code-block .keyword {
        color: var(--accent-purple);
      }

      .code-block .function {
        color: var(--accent-cyan);
      }

      .code-block .number {
        color: var(--accent-amber);
      }

      .code-block .string {
        color: var(--accent-lime);
      }

      .code-block .comment {
        color: var(--text-muted);
        font-style: italic;
      }

      .code-block .highlight {
        background: rgba(34, 211, 238, 0.2);
        padding: 0 4px;
        border-radius: 4px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <div class="header">
        <h1>üß† Space-Efficient Solution</h1>
        <p class="subtitle">
          Compare concatenations character-by-character without creating new
          strings!
        </p>
        <div class="badge-row">
          <span class="badge lime">üíæ O(1) Auxiliary Space</span>
          <span class="badge cyan">‚è±Ô∏è O(m + n) Time</span>
          <span class="badge purple">üéØ No String Allocation</span>
        </div>
      </div>

      <!-- Key Insight -->
      <div class="insight-box">
        <span class="insight-icon">üí°</span>
        <div class="insight-title">The Space-Saving Trick</div>
        <div class="insight-text">
          Instead of creating <code>str1 + str2</code> and
          <code>str2 + str1</code> as new strings, we
          <strong>virtually</strong> access characters using index math:<br /><br />
          ‚Ä¢ Position <code>i</code> in "str1 + str2" ‚Üí
          <code>i &lt; m ? str1[i] : str2[i - m]</code><br />
          ‚Ä¢ Position <code>i</code> in "str2 + str1" ‚Üí
          <code>i &lt; n ? str2[i] : str1[i - n]</code><br /><br />
          This avoids allocating <strong>O(m + n)</strong> extra space for
          concatenated strings!
        </div>
      </div>

      <!-- Progress Bar -->
      <div class="progress-bar">
        <div class="progress-step" id="prog-1">
          <div class="progress-dot">üìè</div>
          <div class="progress-label">Get Lengths</div>
        </div>
        <div class="progress-step" id="prog-2">
          <div class="progress-dot">üîÑ</div>
          <div class="progress-label">Iterate i</div>
        </div>
        <div class="progress-step" id="prog-3">
          <div class="progress-dot">üìç</div>
          <div class="progress-label">Calculate Chars</div>
        </div>
        <div class="progress-step" id="prog-4">
          <div class="progress-dot">‚öñÔ∏è</div>
          <div class="progress-label">Compare</div>
        </div>
        <div class="progress-step" id="prog-5">
          <div class="progress-dot">üî¢</div>
          <div class="progress-label">GCD</div>
        </div>
        <div class="progress-step" id="prog-6">
          <div class="progress-dot">‚úÇÔ∏è</div>
          <div class="progress-label">Extract</div>
        </div>
      </div>

      <!-- Current Action -->
      <div class="current-action">
        <div class="action-label">Current Operation</div>
        <div class="action-text" id="action-text">
          Click "Start" to begin visualization
        </div>
      </div>

      <!-- Input Strings -->
      <div class="whiteboard">
        <div class="whiteboard-title">
          <span class="icon">üì•</span>
          Input Strings (Original - Never Modified)
        </div>

        <div class="strings-section">
          <div class="string-card">
            <div class="string-label">str1 (m = 6)</div>
            <div class="string-chars" id="str1-display"></div>
          </div>
          <div class="string-card">
            <div class="string-label">str2 (n = 4)</div>
            <div class="string-chars" id="str2-display"></div>
          </div>
        </div>
      </div>

      <!-- Virtual Concatenation -->
      <div class="whiteboard" id="virtual-whiteboard" style="display: none">
        <div class="whiteboard-title">
          <span class="icon">üîÆ</span>
          Virtual Concatenation Access (No New Strings Created!)
        </div>

        <div class="virtual-concat-section">
          <div class="virtual-title">
            üîó Conceptual View (for understanding only)
          </div>

          <div class="virtual-row">
            <div class="virtual-label">"str1 + str2":</div>
            <div class="virtual-chars" id="virtual-concat1"></div>
          </div>

          <div class="virtual-row">
            <div class="virtual-label">"str2 + str1":</div>
            <div class="virtual-chars" id="virtual-concat2"></div>
          </div>

          <!-- Pointer Section -->
          <div
            class="pointer-section"
            id="pointer-section"
            style="display: none"
          >
            <div class="pointer-title">üìç Current Index & Character Access</div>
            <div class="pointer-grid">
              <div class="pointer-item">
                <div class="pointer-name">Index i</div>
                <div class="pointer-value" id="pointer-i">0</div>
              </div>
              <div class="pointer-item">
                <div class="pointer-name">char1 (from str1+str2)</div>
                <div class="pointer-value" id="pointer-char1">?</div>
                <div class="pointer-formula" id="formula-char1">
                  i &lt; 6 ? str1[i] : str2[i-6]
                </div>
              </div>
              <div class="pointer-item">
                <div class="pointer-name">char2 (from str2+str1)</div>
                <div class="pointer-value" id="pointer-char2">?</div>
                <div class="pointer-formula" id="formula-char2">
                  i &lt; 4 ? str2[i] : str1[i-4]
                </div>
              </div>
            </div>
          </div>

          <!-- Comparison Display -->
          <div
            class="comparison-section"
            id="comparison-section"
            style="display: none"
          >
            <div class="comparison-title">Character Comparison</div>
            <div class="comparison-display">
              <div class="compare-char char1" id="compare-char1">?</div>
              <div class="compare-operator">=?=</div>
              <div class="compare-char char2" id="compare-char2">?</div>
              <div class="compare-result" id="compare-result">‚è≥</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Result Banner -->
      <div class="result-banner" id="result-banner">
        <div class="result-icon">üéâ</div>
        <div class="result-value">"AB"</div>
        <div class="result-explanation">
          All characters matched! GCD(6, 4) = 2<br />
          Result: str1.substring(0, 2) = <strong>"AB"</strong><br /><br />
          <strong>Zero additional string allocations!</strong>
        </div>
      </div>

      <!-- Controls -->
      <div class="controls">
        <button class="btn btn-primary" id="startBtn" onclick="start()">
          ‚ñ∂Ô∏è Start
        </button>
        <button
          class="btn btn-secondary"
          id="nextBtn"
          onclick="nextStep()"
          disabled
        >
          ‚è≠Ô∏è Next Step
        </button>
        <button class="btn btn-secondary" id="autoBtn" onclick="toggleAuto()">
          üîÑ Auto Play
        </button>
        <button class="btn btn-secondary" onclick="reset()">üîÅ Reset</button>
        <div class="speed-control">
          <span class="speed-label">Speed:</span>
          <input
            type="range"
            class="speed-slider"
            id="speedSlider"
            min="200"
            max="1500"
            value="800"
          />
        </div>
      </div>

      <!-- Memory Comparison -->
      <div class="memory-section">
        <div class="memory-card">
          <div class="memory-icon">üì¶</div>
          <div class="memory-title">Standard Approach</div>
          <div class="memory-value">O(m + n) Space</div>
          <div class="memory-desc">Creates two new concatenated strings</div>
        </div>
        <div class="memory-card optimal">
          <div class="memory-icon">üß†</div>
          <div class="memory-title">Space-Efficient</div>
          <div class="memory-value">O(1) Space</div>
          <div class="memory-desc">Uses index math - no new strings!</div>
        </div>
      </div>

      <!-- Code Section -->
      <div class="code-section">
        <div class="code-title">üíª The Key Logic</div>
        <div class="code-block">
          <span class="keyword">for</span> (<span class="keyword">let</span> i =
          <span class="number">0</span>; i &lt; m + n; i++) {<br />
          &nbsp;&nbsp;<span class="comment"
            >// Virtual access to position i in "str1 + str2"</span
          ><br />
          &nbsp;&nbsp;<span class="keyword">const</span> char1 = i &lt; m ?
          str1[i] : str2[i - m];<br />
          &nbsp;&nbsp;<br />
          &nbsp;&nbsp;<span class="comment"
            >// Virtual access to position i in "str2 + str1"</span
          ><br />
          &nbsp;&nbsp;<span class="keyword">const</span> char2 = i &lt; n ?
          str2[i] : str1[i - n];<br />
          &nbsp;&nbsp;<br />
          &nbsp;&nbsp;<span class="keyword">if</span> (char1 !== char2)
          <span class="keyword">return</span>
          <span class="string">""</span>;<br />
          }
        </div>
      </div>
    </div>

    <script>
      const str1 = "ABABAB";
      const str2 = "ABAB";
      const m = str1.length;
      const n = str2.length;

      let phase = "init";
      let currentIndex = 0;
      let isAutoPlaying = false;
      let autoPlayInterval = null;

      function initDisplays() {
        document.getElementById("str1-display").innerHTML = str1
          .split("")
          .map(
            (c, i) =>
              `<div class="char-box str1" id="s1-${i}">${c}<span class="idx">${i}</span></div>`
          )
          .join("");

        document.getElementById("str2-display").innerHTML = str2
          .split("")
          .map(
            (c, i) =>
              `<div class="char-box str2" id="s2-${i}">${c}<span class="idx">${i}</span></div>`
          )
          .join("");
      }

      function setAction(text) {
        document.getElementById("action-text").textContent = text;
      }

      function updateProgress(step, status) {
        const el = document.getElementById(`prog-${step}`);
        el.classList.remove("active", "completed");
        if (status === "active") el.classList.add("active");
        if (status === "completed") el.classList.add("completed");
      }

      function buildVirtualConcat() {
        // Build visual representation of str1 + str2
        let html1 = "";
        for (let i = 0; i < m; i++) {
          html1 += `<div class="char-box str1" id="vc1-${i}">${str1[i]}</div>`;
        }
        html1 += '<div class="divider-line"></div>';
        for (let i = 0; i < n; i++) {
          html1 += `<div class="char-box str2" id="vc1-${m + i}">${
            str2[i]
          }</div>`;
        }
        document.getElementById("virtual-concat1").innerHTML = html1;

        // Build visual representation of str2 + str1
        let html2 = "";
        for (let i = 0; i < n; i++) {
          html2 += `<div class="char-box str2" id="vc2-${i}">${str2[i]}</div>`;
        }
        html2 += '<div class="divider-line"></div>';
        for (let i = 0; i < m; i++) {
          html2 += `<div class="char-box str1" id="vc2-${n + i}">${
            str1[i]
          }</div>`;
        }
        document.getElementById("virtual-concat2").innerHTML = html2;
      }

      function clearHighlights() {
        document.querySelectorAll(".char-box").forEach((el) => {
          el.classList.remove("active", "match");
        });
      }

      function highlightIndex(idx) {
        clearHighlights();

        // Highlight in virtual concat 1
        const vc1El = document.getElementById(`vc1-${idx}`);
        if (vc1El) vc1El.classList.add("active");

        // Highlight in virtual concat 2
        const vc2El = document.getElementById(`vc2-${idx}`);
        if (vc2El) vc2El.classList.add("active");

        // Calculate actual source indices
        const src1Idx = idx < m ? idx : idx - m;
        const src1Str = idx < m ? "s1" : "s2";
        const src2Idx = idx < n ? idx : idx - n;
        const src2Str = idx < n ? "s2" : "s1";

        // Highlight source characters
        const srcEl1 = document.getElementById(`${src1Str}-${src1Idx}`);
        const srcEl2 = document.getElementById(`${src2Str}-${src2Idx}`);
        if (srcEl1) srcEl1.classList.add("active");
        if (srcEl2) srcEl2.classList.add("active");
      }

      function markMatch(idx) {
        const vc1El = document.getElementById(`vc1-${idx}`);
        const vc2El = document.getElementById(`vc2-${idx}`);
        if (vc1El) {
          vc1El.classList.remove("active");
          vc1El.classList.add("match");
        }
        if (vc2El) {
          vc2El.classList.remove("active");
          vc2El.classList.add("match");
        }
      }

      function start() {
        document.getElementById("startBtn").disabled = true;
        document.getElementById("nextBtn").disabled = false;
        phase = "show-lengths";
        nextStep();
      }

      function nextStep() {
        if (phase === "show-lengths") {
          updateProgress(1, "active");
          setAction(`m = ${m}, n = ${n}, total length = ${m + n}`);
          phase = "show-virtual";
        } else if (phase === "show-virtual") {
          updateProgress(1, "completed");
          document.getElementById("virtual-whiteboard").style.display = "block";
          buildVirtualConcat();
          setAction("Virtual concatenations built (conceptual view only)");
          phase = "start-loop";
        } else if (phase === "start-loop") {
          updateProgress(2, "active");
          document.getElementById("pointer-section").style.display = "block";
          document.getElementById("comparison-section").style.display = "block";
          currentIndex = 0;
          setAction("Starting iteration: i = 0 to " + (m + n - 1));
          phase = "iterate";
        } else if (phase === "iterate") {
          if (currentIndex < m + n) {
            updateProgress(3, "active");

            // Calculate characters
            const char1 =
              currentIndex < m ? str1[currentIndex] : str2[currentIndex - m];
            const char2 =
              currentIndex < n ? str2[currentIndex] : str1[currentIndex - n];

            // Update pointer display
            document.getElementById("pointer-i").textContent = currentIndex;
            document.getElementById("pointer-char1").textContent = `'${char1}'`;
            document.getElementById("pointer-char2").textContent = `'${char2}'`;

            // Update formulas
            if (currentIndex < m) {
              document.getElementById(
                "formula-char1"
              ).textContent = `${currentIndex} < 6 ‚Üí str1[${currentIndex}] = '${char1}'`;
            } else {
              document.getElementById(
                "formula-char1"
              ).textContent = `${currentIndex} >= 6 ‚Üí str2[${currentIndex}-6] = str2[${
                currentIndex - m
              }] = '${char1}'`;
            }

            if (currentIndex < n) {
              document.getElementById(
                "formula-char2"
              ).textContent = `${currentIndex} < 4 ‚Üí str2[${currentIndex}] = '${char2}'`;
            } else {
              document.getElementById(
                "formula-char2"
              ).textContent = `${currentIndex} >= 4 ‚Üí str1[${currentIndex}-4] = str1[${
                currentIndex - n
              }] = '${char2}'`;
            }

            // Highlight
            highlightIndex(currentIndex);

            // Update comparison display
            document.getElementById("compare-char1").textContent = char1;
            document.getElementById("compare-char2").textContent = char2;
            document.getElementById("compare-result").textContent = "‚è≥";
            document
              .getElementById("comparison-section")
              .classList.add("active");
            document
              .getElementById("comparison-section")
              .classList.remove("equal");

            setAction(
              `i = ${currentIndex}: char1 = '${char1}', char2 = '${char2}'`
            );

            phase = "compare";
          } else {
            phase = "all-match";
            nextStep();
          }
        } else if (phase === "compare") {
          updateProgress(3, "completed");
          updateProgress(4, "active");

          const char1 =
            currentIndex < m ? str1[currentIndex] : str2[currentIndex - m];
          const char2 =
            currentIndex < n ? str2[currentIndex] : str1[currentIndex - n];

          // They match
          document.getElementById("compare-result").textContent = "‚úì";
          document.getElementById("compare-char1").classList.add("match");
          document.getElementById("compare-char2").classList.add("match");
          document
            .getElementById("comparison-section")
            .classList.remove("active");
          document.getElementById("comparison-section").classList.add("equal");

          markMatch(currentIndex);

          setAction(`i = ${currentIndex}: '${char1}' === '${char2}' ‚úì Match!`);

          currentIndex++;
          updateProgress(4, "completed");
          updateProgress(2, "active");

          if (currentIndex >= m + n) {
            phase = "all-match";
          } else {
            phase = "iterate";
          }
        } else if (phase === "all-match") {
          updateProgress(2, "completed");
          updateProgress(5, "active");
          setAction("All characters matched! Computing GCD(6, 4) = 2");
          phase = "gcd-done";
        } else if (phase === "gcd-done") {
          updateProgress(5, "completed");
          updateProgress(6, "active");
          setAction('Extracting str1.substring(0, 2) = "AB"');

          // Highlight result characters
          document
            .querySelectorAll(".char-box")
            .forEach((el) => el.classList.add("dimmed"));
          document.getElementById("s1-0").classList.remove("dimmed");
          document.getElementById("s1-0").classList.add("result");
          document.getElementById("s1-1").classList.remove("dimmed");
          document.getElementById("s1-1").classList.add("result");

          phase = "show-result";
        } else if (phase === "show-result") {
          updateProgress(6, "completed");
          document.getElementById("result-banner").classList.add("visible");
          setAction('üéâ Complete! Result = "AB" with O(1) auxiliary space!');

          document.getElementById("nextBtn").disabled = true;
          stopAuto();
          phase = "done";
        }
      }

      function toggleAuto() {
        if (isAutoPlaying) {
          stopAuto();
        } else {
          startAuto();
        }
      }

      function startAuto() {
        if (phase === "done" || phase === "init") return;
        isAutoPlaying = true;
        document.getElementById("autoBtn").textContent = "‚è∏Ô∏è Pause";
        const speed = 1700 - document.getElementById("speedSlider").value;
        autoPlayInterval = setInterval(() => {
          if (phase !== "done") {
            nextStep();
          } else {
            stopAuto();
          }
        }, speed);
      }

      function stopAuto() {
        isAutoPlaying = false;
        document.getElementById("autoBtn").textContent = "üîÑ Auto Play";
        if (autoPlayInterval) {
          clearInterval(autoPlayInterval);
          autoPlayInterval = null;
        }
      }

      function reset() {
        stopAuto();
        phase = "init";
        currentIndex = 0;

        document.getElementById("startBtn").disabled = false;
        document.getElementById("nextBtn").disabled = true;

        // Reset progress
        for (let i = 1; i <= 6; i++) {
          document
            .getElementById(`prog-${i}`)
            .classList.remove("active", "completed");
        }

        // Hide sections
        document.getElementById("virtual-whiteboard").style.display = "none";
        document.getElementById("pointer-section").style.display = "none";
        document.getElementById("comparison-section").style.display = "none";
        document.getElementById("result-banner").classList.remove("visible");

        // Reset comparison section
        document
          .getElementById("comparison-section")
          .classList.remove("active", "equal");
        document.getElementById("compare-char1").classList.remove("match");
        document.getElementById("compare-char2").classList.remove("match");

        setAction('Click "Start" to begin visualization');
        initDisplays();
      }

      // Initialize
      initDisplays();
    </script>
  </body>
</html>
