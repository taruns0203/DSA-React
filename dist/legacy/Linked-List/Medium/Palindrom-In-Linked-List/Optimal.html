<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Linked List Palindrome - Reverse Second Half In-Place</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Architects+Daughter&family=Indie+Flower&family=Fira+Code:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Indie Flower", cursive;
        background: #0a192f;
        min-height: 100vh;
        overflow-x: hidden;
      }

      /* Blueprint Container */
      .blueprint {
        background: linear-gradient(
          135deg,
          #0a192f 0%,
          #112240 50%,
          #0a192f 100%
        );
        min-height: 100vh;
        padding: 30px;
        position: relative;
        overflow: hidden;
      }

      /* Grid pattern */
      .blueprint::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-image: linear-gradient(
            rgba(100, 255, 218, 0.05) 1px,
            transparent 1px
          ),
          linear-gradient(90deg, rgba(100, 255, 218, 0.05) 1px, transparent 1px);
        background-size: 20px 20px;
        pointer-events: none;
        z-index: 0;
      }

      /* Corner marks */
      .blueprint::after {
        content: "";
        position: absolute;
        top: 20px;
        left: 20px;
        right: 20px;
        bottom: 20px;
        border: 2px solid rgba(100, 255, 218, 0.2);
        pointer-events: none;
        z-index: 0;
      }

      .content {
        position: relative;
        z-index: 1;
        max-width: 1500px;
        margin: 0 auto;
      }

      /* Title */
      .title {
        font-family: "Architects Daughter", cursive;
        font-size: 2.8rem;
        font-weight: 400;
        color: #64ffda;
        text-align: center;
        margin-bottom: 8px;
        text-shadow: 0 0 20px rgba(100, 255, 218, 0.5);
        letter-spacing: 2px;
      }

      .subtitle {
        font-family: "Indie Flower", cursive;
        font-size: 1.3rem;
        color: #8892b0;
        text-align: center;
        margin-bottom: 25px;
      }

      .subtitle .highlight {
        color: #64ffda;
        font-weight: bold;
      }

      /* Phase indicator */
      .phase-tabs {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-bottom: 20px;
        flex-wrap: wrap;
      }

      .phase-tab {
        padding: 8px 20px;
        background: rgba(100, 255, 218, 0.1);
        border: 2px solid rgba(100, 255, 218, 0.3);
        border-radius: 25px;
        font-family: "Architects Daughter", cursive;
        font-size: 1rem;
        color: #8892b0;
        transition: all 0.3s ease;
      }

      .phase-tab.active {
        background: rgba(100, 255, 218, 0.2);
        border-color: #64ffda;
        color: #64ffda;
        box-shadow: 0 0 15px rgba(100, 255, 218, 0.3);
      }

      .phase-tab.completed {
        background: rgba(100, 255, 218, 0.15);
        border-color: rgba(100, 255, 218, 0.5);
        color: #64ffda;
      }

      /* Example box */
      .example-box {
        background: rgba(100, 255, 218, 0.1);
        border: 2px solid rgba(100, 255, 218, 0.3);
        border-radius: 8px;
        padding: 10px 25px;
        margin-bottom: 20px;
        display: inline-block;
      }

      .example-box span {
        font-family: "Fira Code", monospace;
        font-size: 1rem;
        color: #64ffda;
      }

      /* Main visualization area */
      .viz-container {
        display: grid;
        grid-template-columns: 1.2fr 0.8fr;
        gap: 25px;
        margin-bottom: 20px;
      }

      @media (max-width: 1100px) {
        .viz-container {
          grid-template-columns: 1fr;
        }
      }

      /* Sections */
      .section {
        background: rgba(17, 34, 64, 0.8);
        border: 2px solid rgba(100, 255, 218, 0.3);
        border-radius: 12px;
        padding: 20px;
        position: relative;
      }

      .section-title {
        font-family: "Architects Daughter", cursive;
        font-size: 1.4rem;
        color: #64ffda;
        margin-bottom: 15px;
        padding-bottom: 8px;
        border-bottom: 1px solid rgba(100, 255, 218, 0.3);
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .section-title .icon {
        font-size: 1.3rem;
      }

      /* Linked List Visualization */
      .list-container {
        margin: 15px 0;
      }

      .list-label {
        font-family: "Architects Daughter", cursive;
        font-size: 1.1rem;
        color: #8892b0;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .list-label .tag {
        padding: 2px 10px;
        background: rgba(100, 255, 218, 0.15);
        border-radius: 12px;
        font-size: 0.9rem;
        color: #64ffda;
      }

      .linked-list {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 3px;
        margin: 10px 0;
        flex-wrap: wrap;
        min-height: 80px;
      }

      .node {
        display: flex;
        align-items: center;
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .node-box {
        width: 52px;
        height: 52px;
        background: rgba(100, 255, 218, 0.1);
        border: 2px solid rgba(100, 255, 218, 0.5);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: "Architects Daughter", cursive;
        font-size: 1.6rem;
        color: #ccd6f6;
        position: relative;
        transition: all 0.3s ease;
      }

      .node-box.slow-pointer {
        background: rgba(255, 107, 107, 0.3);
        border-color: #ff6b6b;
        box-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
      }

      .node-box.fast-pointer {
        background: rgba(78, 205, 196, 0.3);
        border-color: #4ecdc4;
        box-shadow: 0 0 20px rgba(78, 205, 196, 0.5);
      }

      .node-box.both-pointers {
        background: linear-gradient(
          135deg,
          rgba(255, 107, 107, 0.3),
          rgba(78, 205, 196, 0.3)
        );
        border-color: #ffd93d;
        box-shadow: 0 0 20px rgba(255, 217, 61, 0.5);
      }

      .node-box.first-half {
        background: rgba(100, 255, 218, 0.2);
        border-color: #64ffda;
      }

      .node-box.second-half {
        background: rgba(255, 107, 107, 0.2);
        border-color: #ff6b6b;
      }

      .node-box.reversing {
        background: rgba(189, 147, 249, 0.3);
        border-color: #bd93f9;
        box-shadow: 0 0 20px rgba(189, 147, 249, 0.5);
        animation: pulse 0.5s ease;
      }

      .node-box.comparing {
        background: rgba(255, 217, 61, 0.3);
        border-color: #ffd93d;
        box-shadow: 0 0 20px rgba(255, 217, 61, 0.5);
      }

      .node-box.matched {
        background: rgba(80, 250, 123, 0.3);
        border-color: #50fa7b;
      }

      .node-box.p1-pointer {
        border-bottom: 4px solid #64ffda;
      }

      .node-box.p2-pointer {
        border-bottom: 4px solid #ff79c6;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
      }

      .node-label {
        position: absolute;
        bottom: -20px;
        font-family: "Fira Code", monospace;
        font-size: 0.7rem;
        color: rgba(100, 255, 218, 0.6);
      }

      .pointer-label {
        position: absolute;
        top: -22px;
        font-family: "Fira Code", monospace;
        font-size: 0.7rem;
        padding: 1px 6px;
        border-radius: 4px;
        white-space: nowrap;
      }

      .pointer-label.slow {
        background: rgba(255, 107, 107, 0.3);
        color: #ff6b6b;
      }

      .pointer-label.fast {
        background: rgba(78, 205, 196, 0.3);
        color: #4ecdc4;
      }

      .pointer-label.p1 {
        background: rgba(100, 255, 218, 0.3);
        color: #64ffda;
      }

      .pointer-label.p2 {
        background: rgba(255, 121, 198, 0.3);
        color: #ff79c6;
      }

      .arrow {
        font-size: 1.4rem;
        color: rgba(100, 255, 218, 0.5);
        margin: 0 1px;
        transition: all 0.3s ease;
      }

      .arrow.reversed {
        color: #ff6b6b;
        transform: scaleX(-1);
      }

      .arrow.broken {
        opacity: 0.2;
      }

      .null-box {
        font-family: "Fira Code", monospace;
        font-size: 0.8rem;
        color: rgba(100, 255, 218, 0.4);
        padding: 6px 10px;
        background: rgba(100, 255, 218, 0.05);
        border-radius: 4px;
        border: 1px dashed rgba(100, 255, 218, 0.3);
      }

      /* Split visualization */
      .split-view {
        display: none;
        flex-direction: column;
        gap: 20px;
        margin: 15px 0;
      }

      .split-view.visible {
        display: flex;
      }

      .half-list {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .half-label {
        font-family: "Architects Daughter", cursive;
        font-size: 1rem;
        margin-bottom: 8px;
        padding: 4px 15px;
        border-radius: 15px;
      }

      .half-label.first {
        background: rgba(100, 255, 218, 0.2);
        color: #64ffda;
      }

      .half-label.second {
        background: rgba(255, 107, 107, 0.2);
        color: #ff6b6b;
      }

      /* Pointer indicators */
      .pointers-display {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin: 15px 0;
        flex-wrap: wrap;
      }

      .pointer-box {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px 16px;
        border-radius: 8px;
        border: 2px solid;
      }

      .pointer-box.slow {
        background: rgba(255, 107, 107, 0.15);
        border-color: #ff6b6b;
      }

      .pointer-box.fast {
        background: rgba(78, 205, 196, 0.15);
        border-color: #4ecdc4;
      }

      .pointer-box.p1 {
        background: rgba(100, 255, 218, 0.15);
        border-color: #64ffda;
      }

      .pointer-box.p2 {
        background: rgba(255, 121, 198, 0.15);
        border-color: #ff79c6;
      }

      .pointer-box .label {
        font-family: "Fira Code", monospace;
        font-size: 0.85rem;
      }

      .pointer-box.slow .label {
        color: #ff6b6b;
      }
      .pointer-box.fast .label {
        color: #4ecdc4;
      }
      .pointer-box.p1 .label {
        color: #64ffda;
      }
      .pointer-box.p2 .label {
        color: #ff79c6;
      }

      .pointer-box .value {
        font-family: "Architects Daughter", cursive;
        font-size: 1.3rem;
        color: #ccd6f6;
      }

      /* Comparison display */
      .comparison-display {
        display: none;
        justify-content: center;
        align-items: center;
        gap: 20px;
        margin: 15px 0;
        padding: 15px;
        background: rgba(255, 217, 61, 0.1);
        border: 2px solid rgba(255, 217, 61, 0.3);
        border-radius: 10px;
      }

      .comparison-display.visible {
        display: flex;
      }

      .comp-value {
        font-family: "Architects Daughter", cursive;
        font-size: 2rem;
        padding: 10px 25px;
        border-radius: 10px;
      }

      .comp-value.v1 {
        background: rgba(100, 255, 218, 0.2);
        border: 2px solid #64ffda;
        color: #64ffda;
      }

      .comp-value.v2 {
        background: rgba(255, 121, 198, 0.2);
        border: 2px solid #ff79c6;
        color: #ff79c6;
      }

      .comp-op {
        font-size: 2.5rem;
      }

      .comp-op.match {
        color: #50fa7b;
      }
      .comp-op.no-match {
        color: #ff5555;
      }

      /* Code Panel */
      .code-panel {
        background: #1a1a2e;
        border-radius: 10px;
        padding: 15px;
        overflow: hidden;
        border: 1px solid rgba(100, 255, 218, 0.2);
      }

      .code-header {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 10px;
        padding-bottom: 8px;
        border-bottom: 1px solid rgba(100, 255, 218, 0.2);
      }

      .code-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
      }

      .code-dot.red {
        background: #ff5555;
      }
      .code-dot.yellow {
        background: #f1fa8c;
      }
      .code-dot.green {
        background: #50fa7b;
      }

      .code-title {
        font-family: "Fira Code", monospace;
        font-size: 0.7rem;
        color: #6272a4;
        margin-left: 10px;
      }

      .code-content {
        font-family: "Fira Code", monospace;
        font-size: 0.7rem;
        line-height: 1.6;
        color: #f8f8f2;
        max-height: 350px;
        overflow-y: auto;
      }

      .code-content::-webkit-scrollbar {
        width: 6px;
      }

      .code-content::-webkit-scrollbar-thumb {
        background: rgba(100, 255, 218, 0.3);
        border-radius: 3px;
      }

      .code-line {
        padding: 2px 8px;
        margin: 1px 0;
        border-radius: 3px;
        transition: all 0.3s ease;
        white-space: pre;
      }

      .code-line.active {
        background: rgba(100, 255, 218, 0.15);
        border-left: 3px solid #64ffda;
      }

      .code-line.active-reverse {
        background: rgba(189, 147, 249, 0.15);
        border-left: 3px solid #bd93f9;
      }

      .code-line.active-compare {
        background: rgba(255, 217, 61, 0.15);
        border-left: 3px solid #ffd93d;
      }

      .code-line .keyword {
        color: #ff79c6;
      }
      .code-line .function {
        color: #50fa7b;
      }
      .code-line .variable {
        color: #f8f8f2;
      }
      .code-line .param {
        color: #ffb86c;
      }
      .code-line .operator {
        color: #ff79c6;
      }
      .code-line .number {
        color: #bd93f9;
      }
      .code-line .comment {
        color: #6272a4;
        font-style: italic;
      }
      .code-line .boolean {
        color: #bd93f9;
      }
      .code-line .null {
        color: #bd93f9;
      }

      /* Status Box */
      .status-box {
        background: rgba(100, 255, 218, 0.1);
        border: 2px solid rgba(100, 255, 218, 0.3);
        border-radius: 10px;
        padding: 15px;
        margin: 15px 0;
        text-align: center;
      }

      .status-phase {
        font-family: "Architects Daughter", cursive;
        font-size: 1.3rem;
        color: #64ffda;
        margin-bottom: 5px;
      }

      .status-message {
        font-family: "Indie Flower", cursive;
        font-size: 1.1rem;
        color: #ccd6f6;
      }

      /* Result Banner */
      .result-banner {
        display: none;
        text-align: center;
        padding: 20px;
        border-radius: 12px;
        margin: 15px auto;
        max-width: 400px;
        animation: glow 1.5s ease infinite alternate;
      }

      .result-banner.success {
        display: block;
        background: rgba(80, 250, 123, 0.2);
        border: 3px solid #50fa7b;
      }

      .result-banner.failure {
        display: block;
        background: rgba(255, 85, 85, 0.2);
        border: 3px solid #ff5555;
      }

      @keyframes glow {
        from {
          box-shadow: 0 0 20px rgba(80, 250, 123, 0.3);
        }
        to {
          box-shadow: 0 0 40px rgba(80, 250, 123, 0.6);
        }
      }

      .result-icon {
        font-size: 2.5rem;
        margin-bottom: 8px;
      }

      .result-text {
        font-family: "Architects Daughter", cursive;
        font-size: 1.6rem;
      }

      .result-banner.success .result-text {
        color: #50fa7b;
      }
      .result-banner.failure .result-text {
        color: #ff5555;
      }

      /* Controls */
      .controls {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 12px;
        margin: 20px 0;
        flex-wrap: wrap;
      }

      .btn {
        font-family: "Architects Daughter", cursive;
        font-size: 1rem;
        padding: 10px 22px;
        border: 2px solid;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
        background: transparent;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
      }

      .btn:active {
        transform: translateY(1px);
      }

      .btn-prev {
        border-color: #ffb86c;
        color: #ffb86c;
      }

      .btn-prev:hover {
        background: rgba(255, 184, 108, 0.2);
      }

      .btn-next {
        border-color: #50fa7b;
        color: #50fa7b;
      }

      .btn-next:hover {
        background: rgba(80, 250, 123, 0.2);
      }

      .btn-reset {
        border-color: #ff5555;
        color: #ff5555;
      }

      .btn-reset:hover {
        background: rgba(255, 85, 85, 0.2);
      }

      .btn-auto {
        border-color: #bd93f9;
        color: #bd93f9;
      }

      .btn-auto:hover {
        background: rgba(189, 147, 249, 0.2);
      }

      .btn:disabled {
        opacity: 0.3;
        cursor: not-allowed;
        transform: none;
      }

      .step-counter {
        font-family: "Architects Daughter", cursive;
        font-size: 1.1rem;
        color: #8892b0;
        padding: 8px 18px;
        background: rgba(100, 255, 218, 0.1);
        border: 1px solid rgba(100, 255, 218, 0.3);
        border-radius: 20px;
      }

      .step-counter .current {
        color: #64ffda;
      }

      .speed-control {
        display: flex;
        align-items: center;
        gap: 8px;
        font-family: "Indie Flower", cursive;
        font-size: 0.95rem;
        color: #8892b0;
      }

      .speed-control input {
        width: 80px;
        accent-color: #64ffda;
      }

      /* Legend */
      .legend {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 15px;
        flex-wrap: wrap;
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: 6px;
        font-family: "Indie Flower", cursive;
        font-size: 0.85rem;
        color: #8892b0;
      }

      .legend-color {
        width: 16px;
        height: 16px;
        border-radius: 4px;
      }

      .legend-color.slow {
        background: rgba(255, 107, 107, 0.5);
        border: 1px solid #ff6b6b;
      }
      .legend-color.fast {
        background: rgba(78, 205, 196, 0.5);
        border: 1px solid #4ecdc4;
      }
      .legend-color.reverse {
        background: rgba(189, 147, 249, 0.5);
        border: 1px solid #bd93f9;
      }
      .legend-color.compare {
        background: rgba(255, 217, 61, 0.5);
        border: 1px solid #ffd93d;
      }
      .legend-color.match {
        background: rgba(80, 250, 123, 0.5);
        border: 1px solid #50fa7b;
      }

      /* Complexity badge */
      .complexity-badge {
        display: inline-flex;
        gap: 15px;
        margin-top: 10px;
        padding: 8px 15px;
        background: rgba(100, 255, 218, 0.1);
        border: 1px solid rgba(100, 255, 218, 0.3);
        border-radius: 8px;
      }

      .complexity-item {
        font-family: "Fira Code", monospace;
        font-size: 0.8rem;
      }

      .complexity-item .label {
        color: #8892b0;
      }

      .complexity-item .value {
        color: #50fa7b;
        font-weight: 500;
      }
    </style>
  </head>
  <body>
    <div class="blueprint">
      <div class="content">
        <h1 class="title">âš¡ Linked List Palindrome</h1>
        <p class="subtitle">
          Optimal: <span class="highlight">Reverse Second Half In-Place</span> â€”
          O(n) time, O(1) space
        </p>

        <div class="phase-tabs">
          <div class="phase-tab" id="tab-1">1. Find Middle</div>
          <div class="phase-tab" id="tab-2">2. Reverse 2nd Half</div>
          <div class="phase-tab" id="tab-3">3. Compare</div>
        </div>

        <div class="example-box">
          <span>Input: head = [1, 2, 2, 1]</span>
        </div>

        <div class="viz-container">
          <!-- Left Panel: Visualization -->
          <div class="section">
            <h2 class="section-title">
              <span class="icon">ðŸ”—</span> Linked List Transformation
            </h2>

            <!-- Original List View -->
            <div class="list-container" id="originalListContainer">
              <div class="list-label">Original List</div>
              <div class="linked-list" id="linkedList">
                <div class="node" data-index="0">
                  <div class="node-box" id="node-0">
                    1
                    <span class="node-label">0</span>
                    <span
                      class="pointer-label slow"
                      id="slowLabel"
                      style="display: none"
                      >slow</span
                    >
                    <span
                      class="pointer-label fast"
                      id="fastLabel"
                      style="display: none"
                      >fast</span
                    >
                    <span
                      class="pointer-label p1"
                      id="p1Label"
                      style="display: none"
                      >p1</span
                    >
                    <span
                      class="pointer-label p2"
                      id="p2Label"
                      style="display: none"
                      >p2</span
                    >
                  </div>
                  <span class="arrow" id="arrow-0">â†’</span>
                </div>
                <div class="node" data-index="1">
                  <div class="node-box" id="node-1">
                    2
                    <span class="node-label">1</span>
                  </div>
                  <span class="arrow" id="arrow-1">â†’</span>
                </div>
                <div class="node" data-index="2">
                  <div class="node-box" id="node-2">
                    2
                    <span class="node-label">2</span>
                  </div>
                  <span class="arrow" id="arrow-2">â†’</span>
                </div>
                <div class="node" data-index="3">
                  <div class="node-box" id="node-3">
                    1
                    <span class="node-label">3</span>
                  </div>
                  <span class="arrow" id="arrow-3">â†’</span>
                </div>
                <div class="null-box">null</div>
              </div>
            </div>

            <!-- Pointers Display -->
            <div class="pointers-display" id="pointersDisplay">
              <div class="pointer-box slow" id="slowBox" style="display: none">
                <span class="label">slow:</span>
                <span class="value" id="slowValue">0</span>
              </div>
              <div class="pointer-box fast" id="fastBox" style="display: none">
                <span class="label">fast:</span>
                <span class="value" id="fastValue">0</span>
              </div>
              <div class="pointer-box p1" id="p1Box" style="display: none">
                <span class="label">p1:</span>
                <span class="value" id="p1Value">0</span>
              </div>
              <div class="pointer-box p2" id="p2Box" style="display: none">
                <span class="label">p2:</span>
                <span class="value" id="p2Value">0</span>
              </div>
            </div>

            <!-- Comparison Display -->
            <div class="comparison-display" id="comparisonDisplay">
              <span class="comp-value v1" id="compV1">1</span>
              <span class="comp-op" id="compOp">=</span>
              <span class="comp-value v2" id="compV2">1</span>
            </div>

            <!-- Status Box -->
            <div class="status-box">
              <div class="status-phase" id="statusPhase">Ready</div>
              <div class="status-message" id="statusMessage">
                Click "Next" to begin finding the middle
              </div>
            </div>

            <!-- Result Banner -->
            <div class="result-banner" id="resultBanner">
              <div class="result-icon" id="resultIcon">âœ“</div>
              <div class="result-text" id="resultText">Palindrome!</div>
            </div>

            <!-- Legend -->
            <div class="legend">
              <div class="legend-item">
                <div class="legend-color slow"></div>
                <span>Slow</span>
              </div>
              <div class="legend-item">
                <div class="legend-color fast"></div>
                <span>Fast</span>
              </div>
              <div class="legend-item">
                <div class="legend-color reverse"></div>
                <span>Reversing</span>
              </div>
              <div class="legend-item">
                <div class="legend-color compare"></div>
                <span>Comparing</span>
              </div>
              <div class="legend-item">
                <div class="legend-color match"></div>
                <span>Matched</span>
              </div>
            </div>

            <div class="complexity-badge">
              <div class="complexity-item">
                <span class="label">Time:</span>
                <span class="value">O(n)</span>
              </div>
              <div class="complexity-item">
                <span class="label">Space:</span>
                <span class="value">O(1)</span>
              </div>
            </div>
          </div>

          <!-- Right Panel: Code -->
          <div class="section">
            <h2 class="section-title"><span class="icon">ðŸ’»</span> Code</h2>

            <div class="code-panel">
              <div class="code-header">
                <div class="code-dot red"></div>
                <div class="code-dot yellow"></div>
                <div class="code-dot green"></div>
                <span class="code-title">optimalPalindrome.js</span>
              </div>
              <div class="code-content">
                <div class="code-line" data-line="1">
                  <span class="keyword">function</span>
                  <span class="function">isPalindrome</span>(<span class="param"
                    >head</span
                  >) {
                </div>
                <div class="code-line" data-line="2">
                  <span class="keyword">if</span> (!head || !head.next)
                  <span class="keyword">return</span>
                  <span class="boolean">true</span>;
                </div>
                <div class="code-line" data-line="3"></div>
                <div class="code-line" data-line="4">
                  <span class="comment">// Step 1: Find middle</span>
                </div>
                <div class="code-line" data-line="5">
                  <span class="keyword">let</span>
                  <span class="variable">slow</span> = head,
                  <span class="variable">fast</span> = head;
                </div>
                <div class="code-line" data-line="6">
                  <span class="keyword">while</span> (fast.next &&
                  fast.next.next) {
                </div>
                <div class="code-line" data-line="7">slow = slow.next;</div>
                <div class="code-line" data-line="8">
                  fast = fast.next.next;
                </div>
                <div class="code-line" data-line="9">}</div>
                <div class="code-line" data-line="10"></div>
                <div class="code-line" data-line="11">
                  <span class="comment">// Step 2: Reverse second half</span>
                </div>
                <div class="code-line" data-line="12">
                  <span class="keyword">let</span>
                  <span class="variable">prev</span> =
                  <span class="null">null</span>;
                </div>
                <div class="code-line" data-line="13">
                  <span class="keyword">let</span>
                  <span class="variable">curr</span> = slow.next;
                </div>
                <div class="code-line" data-line="14">
                  <span class="keyword">while</span> (curr) {
                </div>
                <div class="code-line" data-line="15">
                  <span class="keyword">let</span>
                  <span class="variable">next</span> = curr.next;
                </div>
                <div class="code-line" data-line="16">curr.next = prev;</div>
                <div class="code-line" data-line="17">prev = curr;</div>
                <div class="code-line" data-line="18">curr = next;</div>
                <div class="code-line" data-line="19">}</div>
                <div class="code-line" data-line="20"></div>
                <div class="code-line" data-line="21">
                  <span class="comment">// Step 3: Compare halves</span>
                </div>
                <div class="code-line" data-line="22">
                  <span class="keyword">let</span>
                  <span class="variable">p1</span> = head,
                  <span class="variable">p2</span> = prev;
                </div>
                <div class="code-line" data-line="23">
                  <span class="keyword">while</span> (p2) {
                </div>
                <div class="code-line" data-line="24">
                  <span class="keyword">if</span> (p1.val !== p2.val) {
                </div>
                <div class="code-line" data-line="25">
                  <span class="keyword">return</span>
                  <span class="boolean">false</span>;
                </div>
                <div class="code-line" data-line="26">}</div>
                <div class="code-line" data-line="27">p1 = p1.next;</div>
                <div class="code-line" data-line="28">p2 = p2.next;</div>
                <div class="code-line" data-line="29">}</div>
                <div class="code-line" data-line="30">
                  <span class="keyword">return</span>
                  <span class="boolean">true</span>;
                </div>
                <div class="code-line" data-line="31">}</div>
              </div>
            </div>

            <!-- Variable State -->
            <div
              style="
                margin-top: 12px;
                padding: 12px;
                background: rgba(100, 255, 218, 0.05);
                border: 1px solid rgba(100, 255, 218, 0.2);
                border-radius: 8px;
              "
            >
              <div
                style="
                  font-family: 'Architects Daughter', cursive;
                  font-size: 1rem;
                  color: #64ffda;
                  margin-bottom: 6px;
                "
              >
                ðŸ“Š Variables
              </div>
              <div
                id="variableState"
                style="
                  font-family: 'Fira Code', monospace;
                  font-size: 0.8rem;
                  color: #ccd6f6;
                  line-height: 1.5;
                "
              >
                <div>slow = head</div>
                <div>fast = head</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Controls -->
        <div class="controls">
          <button class="btn btn-prev" id="prevBtn" disabled>â—€ Prev</button>
          <button class="btn btn-next" id="nextBtn">Next â–¶</button>
          <button class="btn btn-reset" id="resetBtn">â†º Reset</button>
          <button class="btn btn-auto" id="autoBtn">â–¶â–¶ Auto</button>
          <span class="step-counter"
            >Step: <span class="current" id="stepNum">0</span> /
            <span id="totalSteps">15</span></span
          >
          <div class="speed-control">
            <span>Speed:</span>
            <input
              type="range"
              id="speedSlider"
              min="300"
              max="2000"
              value="800"
            />
            <span id="speedLabel">0.8s</span>
          </div>
        </div>
      </div>
    </div>

    <script>
      const listValues = [1, 2, 2, 1];
      let currentStep = 0;
      let isAutoPlaying = false;
      let autoPlayInterval = null;
      let speed = 800;

      const steps = [
        {
          phase: 1,
          phaseLabel: "Ready",
          message:
            "Click 'Next' to start. We'll find middle, reverse 2nd half, then compare.",
          lines: [],
          lineType: "normal",
          pointers: {},
          nodeStates: {},
          variables: ["slow = head", "fast = head"],
        },
        {
          phase: 1,
          phaseLabel: "Step 1: Find Middle",
          message: "Initialize slow and fast pointers at head",
          lines: [5],
          lineType: "normal",
          pointers: { slow: 0, fast: 0 },
          nodeStates: { 0: "both-pointers" },
          variables: ["slow = node 0 (val=1)", "fast = node 0 (val=1)"],
        },
        {
          phase: 1,
          phaseLabel: "Step 1: Find Middle",
          message:
            "Check: fast.next (node 1) && fast.next.next (node 2) exist? YES âœ“",
          lines: [6],
          lineType: "normal",
          pointers: { slow: 0, fast: 0 },
          nodeStates: { 0: "both-pointers" },
          variables: [
            "slow = node 0",
            "fast = node 0",
            "fast.next = node 1 âœ“",
            "fast.next.next = node 2 âœ“",
          ],
        },
        {
          phase: 1,
          phaseLabel: "Step 1: Find Middle",
          message: "Move slow one step (0â†’1), fast two steps (0â†’2)",
          lines: [7, 8],
          lineType: "normal",
          pointers: { slow: 1, fast: 2 },
          nodeStates: { 1: "slow-pointer", 2: "fast-pointer" },
          variables: ["slow = node 1 (val=2)", "fast = node 2 (val=2)"],
        },
        {
          phase: 1,
          phaseLabel: "Step 1: Find Middle",
          message:
            "Check: fast.next (node 3) exists but fast.next.next is null â†’ EXIT loop",
          lines: [6, 9],
          lineType: "normal",
          pointers: { slow: 1, fast: 2 },
          nodeStates: { 1: "slow-pointer", 2: "fast-pointer" },
          variables: [
            "slow = node 1 (MIDDLE)",
            "fast = node 2",
            "fast.next.next = null âœ—",
          ],
        },
        {
          phase: 2,
          phaseLabel: "Step 2: Reverse Second Half",
          message:
            "Middle found at slow (node 1). Now reverse from slow.next (node 2)",
          lines: [11, 12, 13],
          lineType: "reverse",
          pointers: {},
          nodeStates: {
            0: "first-half",
            1: "first-half",
            2: "second-half",
            3: "second-half",
          },
          variables: [
            "prev = null",
            "curr = node 2 (slow.next)",
            "Second half: [2, 1]",
          ],
        },
        {
          phase: 2,
          phaseLabel: "Step 2: Reverse Second Half",
          message:
            "Reversing: Save next (node 3), point curr.next to prev (null)",
          lines: [14, 15, 16],
          lineType: "reverse",
          pointers: {},
          nodeStates: {
            0: "first-half",
            1: "first-half",
            2: "reversing",
            3: "second-half",
          },
          arrowStates: { 2: "broken" },
          variables: [
            "prev = null",
            "curr = node 2",
            "next = node 3",
            "curr.next = null",
          ],
        },
        {
          phase: 2,
          phaseLabel: "Step 2: Reverse Second Half",
          message: "Move prev to curr (node 2), curr to next (node 3)",
          lines: [17, 18],
          lineType: "reverse",
          pointers: {},
          nodeStates: {
            0: "first-half",
            1: "first-half",
            2: "second-half",
            3: "reversing",
          },
          arrowStates: { 2: "broken" },
          variables: ["prev = node 2", "curr = node 3", "next = null"],
        },
        {
          phase: 2,
          phaseLabel: "Step 2: Reverse Second Half",
          message: "Reversing: Point node 3's next to prev (node 2)",
          lines: [15, 16],
          lineType: "reverse",
          pointers: {},
          nodeStates: {
            0: "first-half",
            1: "first-half",
            2: "second-half",
            3: "reversing",
          },
          arrowStates: { 2: "reversed", 3: "broken" },
          variables: [
            "prev = node 2",
            "curr = node 3",
            "curr.next = node 2 (reversed!)",
          ],
        },
        {
          phase: 2,
          phaseLabel: "Step 2: Reverse Second Half",
          message:
            "curr becomes null â†’ Exit loop. Reversal complete! prev = new head of 2nd half",
          lines: [17, 18, 19],
          lineType: "reverse",
          pointers: {},
          nodeStates: {
            0: "first-half",
            1: "first-half",
            2: "second-half",
            3: "second-half",
          },
          arrowStates: { 2: "reversed", 3: "broken" },
          variables: [
            "prev = node 3 (head of reversed)",
            "curr = null",
            "Reversed: [1, 2]",
          ],
        },
        {
          phase: 3,
          phaseLabel: "Step 3: Compare Halves",
          message:
            "Set p1 = head (first half), p2 = prev (reversed second half)",
          lines: [21, 22],
          lineType: "compare",
          pointers: { p1: 0, p2: 3 },
          nodeStates: {
            0: "comparing",
            1: "first-half",
            2: "second-half",
            3: "comparing",
          },
          arrowStates: { 2: "reversed", 3: "broken" },
          variables: ["p1 = node 0 (val=1)", "p2 = node 3 (val=1)"],
        },
        {
          phase: 3,
          phaseLabel: "Step 3: Compare Halves",
          message: "Compare p1.val (1) with p2.val (1) â†’ MATCH! âœ“",
          lines: [23, 24],
          lineType: "compare",
          pointers: { p1: 0, p2: 3 },
          nodeStates: { 0: "comparing", 3: "comparing" },
          comparison: { v1: 1, v2: 1, match: true },
          arrowStates: { 2: "reversed", 3: "broken" },
          variables: ["p1.val = 1", "p2.val = 1", "1 === 1 âœ“"],
        },
        {
          phase: 3,
          phaseLabel: "Step 3: Compare Halves",
          message: "Move both pointers: p1 to node 1, p2 to node 2",
          lines: [27, 28],
          lineType: "compare",
          pointers: { p1: 1, p2: 2 },
          nodeStates: {
            0: "matched",
            1: "comparing",
            2: "comparing",
            3: "matched",
          },
          arrowStates: { 2: "reversed", 3: "broken" },
          variables: ["p1 = node 1 (val=2)", "p2 = node 2 (val=2)"],
        },
        {
          phase: 3,
          phaseLabel: "Step 3: Compare Halves",
          message: "Compare p1.val (2) with p2.val (2) â†’ MATCH! âœ“",
          lines: [23, 24],
          lineType: "compare",
          pointers: { p1: 1, p2: 2 },
          nodeStates: {
            0: "matched",
            1: "comparing",
            2: "comparing",
            3: "matched",
          },
          comparison: { v1: 2, v2: 2, match: true },
          arrowStates: { 2: "reversed", 3: "broken" },
          variables: ["p1.val = 2", "p2.val = 2", "2 === 2 âœ“"],
        },
        {
          phase: 3,
          phaseLabel: "Step 3: Compare Halves",
          message: "p2.next is null â†’ Exit loop. All matched!",
          lines: [28, 29],
          lineType: "compare",
          pointers: { p1: 1, p2: 2 },
          nodeStates: {
            0: "matched",
            1: "matched",
            2: "matched",
            3: "matched",
          },
          arrowStates: { 2: "reversed", 3: "broken" },
          variables: ["p2 = node 2", "p2.next = null", "Exit loop"],
        },
        {
          phase: 3,
          phaseLabel: "Complete!",
          message: "Return TRUE ðŸŽ‰ It's a palindrome! All pairs matched.",
          lines: [30],
          lineType: "compare",
          pointers: {},
          nodeStates: {
            0: "matched",
            1: "matched",
            2: "matched",
            3: "matched",
          },
          arrowStates: { 2: "reversed", 3: "broken" },
          isPalindrome: true,
          variables: ["return true", "âœ“ Palindrome confirmed!"],
        },
      ];

      // DOM Elements
      const prevBtn = document.getElementById("prevBtn");
      const nextBtn = document.getElementById("nextBtn");
      const resetBtn = document.getElementById("resetBtn");
      const autoBtn = document.getElementById("autoBtn");
      const stepNum = document.getElementById("stepNum");
      const totalSteps = document.getElementById("totalSteps");
      const speedSlider = document.getElementById("speedSlider");
      const speedLabel = document.getElementById("speedLabel");
      const statusPhase = document.getElementById("statusPhase");
      const statusMessage = document.getElementById("statusMessage");
      const variableState = document.getElementById("variableState");
      const comparisonDisplay = document.getElementById("comparisonDisplay");
      const resultBanner = document.getElementById("resultBanner");

      totalSteps.textContent = steps.length - 1;

      speedSlider.addEventListener("input", (e) => {
        speed = parseInt(e.target.value);
        speedLabel.textContent = (speed / 1000).toFixed(1) + "s";
      });

      function clearHighlights() {
        // Clear node states
        document.querySelectorAll(".node-box").forEach((n) => {
          n.className = "node-box";
        });
        // Clear arrows
        document.querySelectorAll(".arrow").forEach((a) => {
          a.className = "arrow";
          a.textContent = "â†’";
        });
        // Clear code lines
        document.querySelectorAll(".code-line").forEach((l) => {
          l.className = "code-line";
        });
        // Hide pointer boxes
        ["slowBox", "fastBox", "p1Box", "p2Box"].forEach((id) => {
          document.getElementById(id).style.display = "none";
        });
        // Hide comparison
        comparisonDisplay.classList.remove("visible");
        // Reset phase tabs
        document.querySelectorAll(".phase-tab").forEach((t) => {
          t.classList.remove("active", "completed");
        });
      }

      function highlightLines(lines, type) {
        if (!lines || lines.length === 0) return;
        const lineClass =
          type === "reverse"
            ? "active-reverse"
            : type === "compare"
            ? "active-compare"
            : "active";
        lines.forEach((num) => {
          const line = document.querySelector(`.code-line[data-line="${num}"]`);
          if (line) line.classList.add(lineClass);
        });
      }

      function updateVariables(vars) {
        variableState.innerHTML = vars.map((v) => `<div>${v}</div>`).join("");
      }

      function updatePhaseTabs(currentPhase) {
        for (let i = 1; i <= 3; i++) {
          const tab = document.getElementById(`tab-${i}`);
          if (i < currentPhase) {
            tab.classList.add("completed");
            tab.classList.remove("active");
          } else if (i === currentPhase) {
            tab.classList.add("active");
            tab.classList.remove("completed");
          }
        }
      }

      function executeStep(stepIndex) {
        const step = steps[stepIndex];
        clearHighlights();

        // Update status
        statusPhase.textContent = step.phaseLabel;
        statusMessage.textContent = step.message;
        updateVariables(step.variables);
        highlightLines(step.lines, step.lineType);
        updatePhaseTabs(step.phase);

        // Hide result unless final
        if (!step.isPalindrome) {
          resultBanner.className = "result-banner";
        }

        // Apply node states
        if (step.nodeStates) {
          Object.entries(step.nodeStates).forEach(([idx, state]) => {
            const node = document.getElementById(`node-${idx}`);
            if (node) node.classList.add(state);
          });
        }

        // Apply arrow states
        if (step.arrowStates) {
          Object.entries(step.arrowStates).forEach(([idx, state]) => {
            const arrow = document.getElementById(`arrow-${idx}`);
            if (arrow) {
              arrow.classList.add(state);
              if (state === "reversed") {
                arrow.textContent = "â†";
              }
            }
          });
        }

        // Show pointers
        if (step.pointers) {
          if (step.pointers.slow !== undefined) {
            document.getElementById("slowBox").style.display = "flex";
            document.getElementById(
              "slowValue"
            ).textContent = `node ${step.pointers.slow}`;
          }
          if (step.pointers.fast !== undefined) {
            document.getElementById("fastBox").style.display = "flex";
            document.getElementById(
              "fastValue"
            ).textContent = `node ${step.pointers.fast}`;
          }
          if (step.pointers.p1 !== undefined) {
            document.getElementById("p1Box").style.display = "flex";
            document.getElementById(
              "p1Value"
            ).textContent = `node ${step.pointers.p1}`;
          }
          if (step.pointers.p2 !== undefined) {
            document.getElementById("p2Box").style.display = "flex";
            document.getElementById(
              "p2Value"
            ).textContent = `node ${step.pointers.p2}`;
          }
        }

        // Show comparison
        if (step.comparison) {
          comparisonDisplay.classList.add("visible");
          document.getElementById("compV1").textContent = step.comparison.v1;
          document.getElementById("compV2").textContent = step.comparison.v2;
          const compOp = document.getElementById("compOp");
          if (step.comparison.match) {
            compOp.textContent = "=";
            compOp.className = "comp-op match";
          } else {
            compOp.textContent = "â‰ ";
            compOp.className = "comp-op no-match";
          }
        }

        // Final result
        if (step.isPalindrome !== undefined) {
          if (step.isPalindrome) {
            resultBanner.className = "result-banner success";
            document.getElementById("resultIcon").textContent = "âœ“";
            document.getElementById("resultText").textContent =
              "It's a Palindrome!";
          } else {
            resultBanner.className = "result-banner failure";
            document.getElementById("resultIcon").textContent = "âœ—";
            document.getElementById("resultText").textContent =
              "Not a Palindrome";
          }
        }

        // Update step counter
        stepNum.textContent = stepIndex;
        prevBtn.disabled = stepIndex === 0;
        nextBtn.disabled = stepIndex === steps.length - 1;
      }

      // Button handlers
      nextBtn.addEventListener("click", () => {
        if (currentStep < steps.length - 1) {
          currentStep++;
          executeStep(currentStep);
        }
      });

      prevBtn.addEventListener("click", () => {
        if (currentStep > 0) {
          currentStep--;
          executeStep(currentStep);
        }
      });

      resetBtn.addEventListener("click", () => {
        stopAutoPlay();
        currentStep = 0;
        executeStep(currentStep);
      });

      function stopAutoPlay() {
        isAutoPlaying = false;
        autoBtn.textContent = "â–¶â–¶ Auto";
        if (autoPlayInterval) {
          clearInterval(autoPlayInterval);
          autoPlayInterval = null;
        }
      }

      autoBtn.addEventListener("click", () => {
        if (isAutoPlaying) {
          stopAutoPlay();
        } else {
          isAutoPlaying = true;
          autoBtn.textContent = "â¸ Pause";
          autoPlayInterval = setInterval(() => {
            if (currentStep < steps.length - 1) {
              currentStep++;
              executeStep(currentStep);
            } else {
              stopAutoPlay();
            }
          }, speed);
        }
      });

      // Keyboard navigation
      document.addEventListener("keydown", (e) => {
        if (e.key === "ArrowRight" || e.key === " ") {
          e.preventDefault();
          if (currentStep < steps.length - 1) {
            currentStep++;
            executeStep(currentStep);
          }
        } else if (e.key === "ArrowLeft") {
          e.preventDefault();
          if (currentStep > 0) {
            currentStep--;
            executeStep(currentStep);
          }
        } else if (e.key === "r" || e.key === "R") {
          stopAutoPlay();
          currentStep = 0;
          executeStep(currentStep);
        }
      });

      // Initialize
      executeStep(0);
    </script>
  </body>
</html>
