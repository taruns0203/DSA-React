<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Linked List Palindrome - Brute Force Whiteboard</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;600;700&family=Patrick+Hand&family=Fira+Code:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Patrick Hand", cursive;
        background: #f5f5f0;
        min-height: 100vh;
        overflow-x: hidden;
      }

      /* Whiteboard Container */
      .whiteboard {
        background: linear-gradient(
          135deg,
          #fefefe 0%,
          #f8f8f5 50%,
          #f5f5f0 100%
        );
        min-height: 100vh;
        padding: 30px;
        position: relative;
        overflow: hidden;
      }

      /* Grid pattern overlay */
      .whiteboard::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-image: linear-gradient(
            rgba(200, 200, 200, 0.3) 1px,
            transparent 1px
          ),
          linear-gradient(90deg, rgba(200, 200, 200, 0.3) 1px, transparent 1px);
        background-size: 25px 25px;
        pointer-events: none;
        z-index: 0;
      }

      /* Subtle paper texture */
      .whiteboard::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%' height='100%' filter='url(%23noise)'/%3E%3C/svg%3E");
        opacity: 0.03;
        pointer-events: none;
        z-index: 0;
      }

      .content {
        position: relative;
        z-index: 1;
        max-width: 1400px;
        margin: 0 auto;
      }

      /* Title */
      .title {
        font-family: "Caveat", cursive;
        font-size: 3.2rem;
        font-weight: 700;
        color: #2c3e50;
        text-align: center;
        margin-bottom: 10px;
        text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.05);
        transform: rotate(-1deg);
      }

      .subtitle {
        font-family: "Patrick Hand", cursive;
        font-size: 1.4rem;
        color: #e74c3c;
        text-align: center;
        margin-bottom: 30px;
        transform: rotate(0.5deg);
      }

      /* Example box */
      .example-box {
        background: rgba(255, 248, 220, 0.7);
        border: 3px dashed #d4a574;
        border-radius: 8px;
        padding: 15px 25px;
        margin-bottom: 30px;
        display: inline-block;
        transform: rotate(-0.5deg);
        box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.1);
      }

      .example-box span {
        font-family: "Fira Code", monospace;
        font-size: 1.2rem;
        color: #8b4513;
      }

      /* Main visualization area */
      .viz-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 40px;
        margin-bottom: 30px;
      }

      @media (max-width: 1000px) {
        .viz-container {
          grid-template-columns: 1fr;
        }
      }

      /* Sections */
      .section {
        background: rgba(255, 255, 255, 0.6);
        border: 3px solid #34495e;
        border-radius: 12px;
        padding: 25px;
        position: relative;
        box-shadow: 6px 6px 0 rgba(0, 0, 0, 0.1);
      }

      .section::before {
        content: "";
        position: absolute;
        top: -3px;
        left: -3px;
        right: -3px;
        bottom: -3px;
        border: 2px solid transparent;
        border-radius: 14px;
        background: linear-gradient(45deg, #3498db, #e74c3c, #2ecc71, #f39c12)
          border-box;
        -webkit-mask: linear-gradient(#fff 0 0) padding-box,
          linear-gradient(#fff 0 0);
        mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: exclude;
        mask-composite: exclude;
        opacity: 0.5;
      }

      .section-title {
        font-family: "Caveat", cursive;
        font-size: 1.8rem;
        font-weight: 600;
        color: #2c3e50;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px dashed #bdc3c7;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .section-title .icon {
        font-size: 1.5rem;
      }

      /* Linked List Visualization */
      .linked-list {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 5px;
        margin: 30px 0;
        flex-wrap: wrap;
      }

      .node {
        display: flex;
        align-items: center;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .node-box {
        width: 60px;
        height: 60px;
        background: linear-gradient(145deg, #fff, #f0f0f0);
        border: 3px solid #34495e;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: "Caveat", cursive;
        font-size: 2rem;
        font-weight: 700;
        color: #2c3e50;
        position: relative;
        transition: all 0.3s ease;
        box-shadow: 3px 3px 0 rgba(0, 0, 0, 0.15);
      }

      .node-box.active {
        background: linear-gradient(145deg, #ffeaa7, #fdcb6e);
        border-color: #f39c12;
        transform: scale(1.15);
        box-shadow: 0 0 20px rgba(243, 156, 18, 0.5);
      }

      .node-box.copied {
        background: linear-gradient(145deg, #81ecec, #00cec9);
        border-color: #00b894;
      }

      .node-index {
        position: absolute;
        bottom: -22px;
        font-family: "Patrick Hand", cursive;
        font-size: 0.9rem;
        color: #7f8c8d;
      }

      .arrow {
        font-size: 1.8rem;
        color: #34495e;
        margin: 0 2px;
        transition: all 0.3s ease;
      }

      .null-box {
        font-family: "Fira Code", monospace;
        font-size: 0.9rem;
        color: #95a5a6;
        padding: 8px 12px;
        background: rgba(149, 165, 166, 0.2);
        border-radius: 6px;
        border: 2px dashed #bdc3c7;
      }

      /* Array Visualization */
      .array-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin: 20px 0;
      }

      .array-label {
        font-family: "Caveat", cursive;
        font-size: 1.4rem;
        color: #8e44ad;
        margin-bottom: 10px;
      }

      .array {
        display: flex;
        align-items: center;
        gap: 0;
        background: rgba(142, 68, 173, 0.1);
        padding: 10px 15px;
        border-radius: 8px;
        border: 2px solid #8e44ad;
      }

      .array-bracket {
        font-family: "Fira Code", monospace;
        font-size: 2.5rem;
        color: #8e44ad;
        font-weight: bold;
      }

      .array-element {
        width: 50px;
        height: 50px;
        background: linear-gradient(145deg, #fff, #f8f8f8);
        border: 2px solid #9b59b6;
        margin: 0 3px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: "Caveat", cursive;
        font-size: 1.8rem;
        font-weight: 600;
        color: #8e44ad;
        border-radius: 6px;
        position: relative;
        transition: all 0.3s ease;
        opacity: 0;
        transform: translateY(-20px);
      }

      .array-element.visible {
        opacity: 1;
        transform: translateY(0);
      }

      .array-element.highlight-left {
        background: linear-gradient(145deg, #a8e6cf, #88d4ab);
        border-color: #27ae60;
        box-shadow: 0 0 15px rgba(39, 174, 96, 0.5);
      }

      .array-element.highlight-right {
        background: linear-gradient(145deg, #ffd3b6, #ffaaa5);
        border-color: #e74c3c;
        box-shadow: 0 0 15px rgba(231, 76, 60, 0.5);
      }

      .array-element.match {
        background: linear-gradient(145deg, #dfe6e9, #b2bec3);
        border-color: #636e72;
      }

      .array-index {
        position: absolute;
        bottom: -20px;
        font-family: "Patrick Hand", cursive;
        font-size: 0.85rem;
        color: #7f8c8d;
      }

      /* Pointers */
      .pointers-container {
        display: flex;
        justify-content: center;
        gap: 40px;
        margin-top: 30px;
      }

      .pointer {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 10px 20px;
        border-radius: 8px;
        transition: all 0.3s ease;
      }

      .pointer.left {
        background: rgba(39, 174, 96, 0.15);
        border: 2px solid #27ae60;
      }

      .pointer.right {
        background: rgba(231, 76, 60, 0.15);
        border: 2px solid #e74c3c;
      }

      .pointer-label {
        font-family: "Fira Code", monospace;
        font-size: 1rem;
        font-weight: 500;
      }

      .pointer.left .pointer-label {
        color: #27ae60;
      }

      .pointer.right .pointer-label {
        color: #e74c3c;
      }

      .pointer-value {
        font-family: "Caveat", cursive;
        font-size: 2rem;
        font-weight: 700;
      }

      .pointer.left .pointer-value {
        color: #1e8449;
      }

      .pointer.right .pointer-value {
        color: #c0392b;
      }

      /* Code Panel */
      .code-panel {
        background: #2d3436;
        border-radius: 12px;
        padding: 20px;
        overflow: hidden;
        box-shadow: 6px 6px 0 rgba(0, 0, 0, 0.2);
      }

      .code-header {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid #636e72;
      }

      .code-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
      }

      .code-dot.red {
        background: #ff5f56;
      }
      .code-dot.yellow {
        background: #ffbd2e;
      }
      .code-dot.green {
        background: #27c93f;
      }

      .code-title {
        font-family: "Fira Code", monospace;
        font-size: 0.85rem;
        color: #b2bec3;
        margin-left: 10px;
      }

      .code-content {
        font-family: "Fira Code", monospace;
        font-size: 0.85rem;
        line-height: 1.8;
        color: #dfe6e9;
      }

      .code-line {
        padding: 3px 10px;
        margin: 2px 0;
        border-radius: 4px;
        transition: all 0.3s ease;
        white-space: pre;
      }

      .code-line.active {
        background: rgba(116, 185, 255, 0.25);
        border-left: 3px solid #74b9ff;
      }

      .code-line .keyword {
        color: #fd79a8;
      }
      .code-line .function {
        color: #74b9ff;
      }
      .code-line .variable {
        color: #ffeaa7;
      }
      .code-line .operator {
        color: #81ecec;
      }
      .code-line .number {
        color: #ff7675;
      }
      .code-line .comment {
        color: #636e72;
        font-style: italic;
      }
      .code-line .string {
        color: #a8e6cf;
      }

      /* Status Box */
      .status-box {
        background: linear-gradient(145deg, #fff9e6, #fff3cd);
        border: 3px solid #f39c12;
        border-radius: 10px;
        padding: 20px;
        margin: 25px 0;
        text-align: center;
        transform: rotate(0.3deg);
        box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.1);
      }

      .status-phase {
        font-family: "Caveat", cursive;
        font-size: 1.6rem;
        font-weight: 600;
        color: #d68910;
        margin-bottom: 8px;
      }

      .status-message {
        font-family: "Patrick Hand", cursive;
        font-size: 1.3rem;
        color: #856404;
      }

      /* Controls */
      .controls {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 15px;
        margin: 30px 0;
        flex-wrap: wrap;
      }

      .btn {
        font-family: "Patrick Hand", cursive;
        font-size: 1.2rem;
        padding: 12px 28px;
        border: 3px solid;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.2s ease;
        box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.2);
        position: relative;
        overflow: hidden;
      }

      .btn:hover {
        transform: translate(-2px, -2px);
        box-shadow: 6px 6px 0 rgba(0, 0, 0, 0.2);
      }

      .btn:active {
        transform: translate(2px, 2px);
        box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.2);
      }

      .btn-prev {
        background: linear-gradient(145deg, #ffeaa7, #fdcb6e);
        border-color: #f39c12;
        color: #8a6d3b;
      }

      .btn-next {
        background: linear-gradient(145deg, #81ecec, #00cec9);
        border-color: #00b894;
        color: #0a6352;
      }

      .btn-reset {
        background: linear-gradient(145deg, #fab1a0, #e17055);
        border-color: #d63031;
        color: #fff;
      }

      .btn-auto {
        background: linear-gradient(145deg, #a29bfe, #6c5ce7);
        border-color: #5f27cd;
        color: #fff;
      }

      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      /* Step counter */
      .step-counter {
        font-family: "Caveat", cursive;
        font-size: 1.5rem;
        color: #2c3e50;
        padding: 10px 25px;
        background: rgba(255, 255, 255, 0.8);
        border: 2px solid #34495e;
        border-radius: 30px;
        box-shadow: 3px 3px 0 rgba(0, 0, 0, 0.1);
      }

      /* Speed control */
      .speed-control {
        display: flex;
        align-items: center;
        gap: 10px;
        font-family: "Patrick Hand", cursive;
        font-size: 1.1rem;
        color: #2c3e50;
      }

      .speed-control input {
        width: 100px;
        accent-color: #6c5ce7;
      }

      /* Result Banner */
      .result-banner {
        display: none;
        text-align: center;
        padding: 25px;
        border-radius: 15px;
        margin: 20px auto;
        max-width: 500px;
        animation: bounceIn 0.6s ease;
      }

      .result-banner.success {
        display: block;
        background: linear-gradient(145deg, #d4edda, #c3e6cb);
        border: 4px solid #28a745;
        box-shadow: 6px 6px 0 rgba(40, 167, 69, 0.3);
      }

      .result-banner.failure {
        display: block;
        background: linear-gradient(145deg, #f8d7da, #f5c6cb);
        border: 4px solid #dc3545;
        box-shadow: 6px 6px 0 rgba(220, 53, 69, 0.3);
      }

      .result-icon {
        font-size: 3rem;
        margin-bottom: 10px;
      }

      .result-text {
        font-family: "Caveat", cursive;
        font-size: 2rem;
        font-weight: 700;
      }

      .result-banner.success .result-text {
        color: #155724;
      }
      .result-banner.failure .result-text {
        color: #721c24;
      }

      @keyframes bounceIn {
        0% {
          transform: scale(0.3);
          opacity: 0;
        }
        50% {
          transform: scale(1.05);
        }
        70% {
          transform: scale(0.9);
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      /* Comparison indicator */
      .comparison-indicator {
        display: none;
        justify-content: center;
        align-items: center;
        gap: 20px;
        margin: 15px 0;
        font-family: "Caveat", cursive;
        font-size: 2rem;
      }

      .comparison-indicator.visible {
        display: flex;
      }

      .comparison-value {
        padding: 10px 20px;
        border-radius: 10px;
        font-weight: 700;
      }

      .comparison-value.left-val {
        background: linear-gradient(145deg, #a8e6cf, #88d4ab);
        border: 3px solid #27ae60;
        color: #1e8449;
      }

      .comparison-value.right-val {
        background: linear-gradient(145deg, #ffd3b6, #ffaaa5);
        border: 3px solid #e74c3c;
        color: #c0392b;
      }

      .comparison-operator {
        font-size: 2.5rem;
      }

      .comparison-operator.equal {
        color: #27ae60;
      }
      .comparison-operator.not-equal {
        color: #e74c3c;
      }

      /* Legend */
      .legend {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin-top: 20px;
        flex-wrap: wrap;
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: 8px;
        font-family: "Patrick Hand", cursive;
        font-size: 1rem;
        color: #2c3e50;
      }

      .legend-color {
        width: 20px;
        height: 20px;
        border-radius: 4px;
        border: 2px solid #34495e;
      }

      .legend-color.current {
        background: linear-gradient(145deg, #ffeaa7, #fdcb6e);
      }
      .legend-color.copied {
        background: linear-gradient(145deg, #81ecec, #00cec9);
      }
      .legend-color.left-ptr {
        background: linear-gradient(145deg, #a8e6cf, #88d4ab);
      }
      .legend-color.right-ptr {
        background: linear-gradient(145deg, #ffd3b6, #ffaaa5);
      }

      /* Marker drawings */
      .marker-circle {
        position: absolute;
        border: 3px solid;
        border-radius: 50%;
        pointer-events: none;
        opacity: 0.6;
      }

      /* Handwritten annotations */
      .annotation {
        font-family: "Caveat", cursive;
        position: absolute;
        color: #e74c3c;
        font-size: 1.1rem;
        transform: rotate(-5deg);
        pointer-events: none;
      }
    </style>
  </head>
  <body>
    <div class="whiteboard">
      <div class="content">
        <h1 class="title">ðŸ“‹ Linked List Palindrome Check</h1>
        <p class="subtitle">
          Brute-Force Approach: Copy to Array â†’ Two-Pointer Compare
        </p>

        <div class="example-box">
          <span>Input: head = [1, 2, 2, 1]</span>
        </div>

        <div class="viz-container">
          <!-- Left Panel: Visualization -->
          <div class="section">
            <h2 class="section-title">
              <span class="icon">ðŸ”—</span> Linked List & Array
            </h2>

            <!-- Linked List -->
            <div class="linked-list" id="linkedList">
              <div class="node" data-index="0">
                <div class="node-box" id="node-0">
                  1<span class="node-index">0</span>
                </div>
                <span class="arrow">â†’</span>
              </div>
              <div class="node" data-index="1">
                <div class="node-box" id="node-1">
                  2<span class="node-index">1</span>
                </div>
                <span class="arrow">â†’</span>
              </div>
              <div class="node" data-index="2">
                <div class="node-box" id="node-2">
                  2<span class="node-index">2</span>
                </div>
                <span class="arrow">â†’</span>
              </div>
              <div class="node" data-index="3">
                <div class="node-box" id="node-3">
                  1<span class="node-index">3</span>
                </div>
                <span class="arrow">â†’</span>
              </div>
              <div class="null-box">null</div>
            </div>

            <!-- Array -->
            <div class="array-container">
              <div class="array-label">values[] array:</div>
              <div class="array">
                <span class="array-bracket">[</span>
                <div class="array-element" id="arr-0">
                  1<span class="array-index">0</span>
                </div>
                <div class="array-element" id="arr-1">
                  2<span class="array-index">1</span>
                </div>
                <div class="array-element" id="arr-2">
                  2<span class="array-index">2</span>
                </div>
                <div class="array-element" id="arr-3">
                  1<span class="array-index">3</span>
                </div>
                <span class="array-bracket">]</span>
              </div>
            </div>

            <!-- Comparison Indicator -->
            <div class="comparison-indicator" id="comparisonIndicator">
              <span class="comparison-value left-val" id="leftVal">1</span>
              <span class="comparison-operator" id="compOp">==</span>
              <span class="comparison-value right-val" id="rightVal">1</span>
            </div>

            <!-- Pointers -->
            <div
              class="pointers-container"
              id="pointersContainer"
              style="display: none"
            >
              <div class="pointer left">
                <span class="pointer-label">left</span>
                <span class="pointer-value" id="leftPointer">0</span>
              </div>
              <div class="pointer right">
                <span class="pointer-label">right</span>
                <span class="pointer-value" id="rightPointer">3</span>
              </div>
            </div>

            <!-- Status Box -->
            <div class="status-box">
              <div class="status-phase" id="statusPhase">
                Phase 1: Copy to Array
              </div>
              <div class="status-message" id="statusMessage">
                Ready to start! Click "Next Step" to begin.
              </div>
            </div>

            <!-- Result Banner -->
            <div class="result-banner" id="resultBanner">
              <div class="result-icon" id="resultIcon">âœ“</div>
              <div class="result-text" id="resultText">It's a Palindrome!</div>
            </div>

            <!-- Legend -->
            <div class="legend">
              <div class="legend-item">
                <div class="legend-color current"></div>
                <span>Current Node</span>
              </div>
              <div class="legend-item">
                <div class="legend-color copied"></div>
                <span>Copied to Array</span>
              </div>
              <div class="legend-item">
                <div class="legend-color left-ptr"></div>
                <span>Left Pointer</span>
              </div>
              <div class="legend-item">
                <div class="legend-color right-ptr"></div>
                <span>Right Pointer</span>
              </div>
            </div>
          </div>

          <!-- Right Panel: Code -->
          <div class="section">
            <h2 class="section-title">
              <span class="icon">ðŸ’»</span> Code Execution
            </h2>

            <div class="code-panel">
              <div class="code-header">
                <div class="code-dot red"></div>
                <div class="code-dot yellow"></div>
                <div class="code-dot green"></div>
                <span class="code-title">isPalindrome.js</span>
              </div>
              <div class="code-content">
                <div class="code-line" data-line="1">
                  <span class="keyword">function</span>
                  <span class="function">isPalindrome</span>(head) {
                </div>
                <div class="code-line" data-line="2">
                  <span class="keyword">const</span>
                  <span class="variable">values</span>
                  <span class="operator">=</span> [];
                </div>
                <div class="code-line" data-line="3"></div>
                <div class="code-line" data-line="4">
                  <span class="comment">// Phase 1: Copy to array</span>
                </div>
                <div class="code-line" data-line="5">
                  <span class="keyword">let</span>
                  <span class="variable">current</span>
                  <span class="operator">=</span> head;
                </div>
                <div class="code-line" data-line="6">
                  <span class="keyword">while</span> (<span class="variable"
                    >current</span
                  >
                  <span class="operator">!==</span>
                  <span class="keyword">null</span>) {
                </div>
                <div class="code-line" data-line="7">
                  <span class="variable">values</span>.<span class="function"
                    >push</span
                  >(<span class="variable">current</span>.val);
                </div>
                <div class="code-line" data-line="8">
                  <span class="variable">current</span>
                  <span class="operator">=</span>
                  <span class="variable">current</span>.next;
                </div>
                <div class="code-line" data-line="9">}</div>
                <div class="code-line" data-line="10"></div>
                <div class="code-line" data-line="11">
                  <span class="comment">// Phase 2: Two-pointer check</span>
                </div>
                <div class="code-line" data-line="12">
                  <span class="keyword">let</span>
                  <span class="variable">left</span>
                  <span class="operator">=</span> <span class="number">0</span>;
                </div>
                <div class="code-line" data-line="13">
                  <span class="keyword">let</span>
                  <span class="variable">right</span>
                  <span class="operator">=</span>
                  <span class="variable">values</span>.length
                  <span class="operator">-</span> <span class="number">1</span>;
                </div>
                <div class="code-line" data-line="14"></div>
                <div class="code-line" data-line="15">
                  <span class="keyword">while</span> (<span class="variable"
                    >left</span
                  >
                  <span class="operator">&lt;</span>
                  <span class="variable">right</span>) {
                </div>
                <div class="code-line" data-line="16">
                  <span class="keyword">if</span> (<span class="variable"
                    >values</span
                  >[<span class="variable">left</span>]
                  <span class="operator">!==</span>
                  <span class="variable">values</span>[<span class="variable"
                    >right</span
                  >]) {
                </div>
                <div class="code-line" data-line="17">
                  <span class="keyword">return</span>
                  <span class="keyword">false</span>;
                </div>
                <div class="code-line" data-line="18">}</div>
                <div class="code-line" data-line="19">
                  <span class="variable">left</span
                  ><span class="operator">++</span>;
                </div>
                <div class="code-line" data-line="20">
                  <span class="variable">right</span
                  ><span class="operator">--</span>;
                </div>
                <div class="code-line" data-line="21">}</div>
                <div class="code-line" data-line="22"></div>
                <div class="code-line" data-line="23">
                  <span class="keyword">return</span>
                  <span class="keyword">true</span>;
                </div>
                <div class="code-line" data-line="24">}</div>
              </div>
            </div>

            <!-- Variable State -->
            <div
              style="
                margin-top: 20px;
                padding: 15px;
                background: rgba(255, 255, 255, 0.5);
                border-radius: 8px;
                border: 2px dashed #7f8c8d;
              "
            >
              <div
                style="
                  font-family: 'Caveat', cursive;
                  font-size: 1.4rem;
                  color: #2c3e50;
                  margin-bottom: 10px;
                "
              >
                ðŸ“Š Variable State:
              </div>
              <div
                id="variableState"
                style="
                  font-family: 'Fira Code', monospace;
                  font-size: 0.95rem;
                  color: #34495e;
                  line-height: 1.8;
                "
              >
                <div>values = []</div>
                <div>current = null</div>
                <div>left = undefined</div>
                <div>right = undefined</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Controls -->
        <div class="controls">
          <button class="btn btn-prev" id="prevBtn" disabled>â—€ Previous</button>
          <button class="btn btn-next" id="nextBtn">Next Step â–¶</button>
          <button class="btn btn-reset" id="resetBtn">â†º Reset</button>
          <button class="btn btn-auto" id="autoBtn">â–¶â–¶ Auto Play</button>
          <span class="step-counter"
            >Step: <span id="stepNum">0</span> /
            <span id="totalSteps">12</span></span
          >
          <div class="speed-control">
            <span>Speed:</span>
            <input
              type="range"
              id="speedSlider"
              min="200"
              max="2000"
              value="800"
            />
            <span id="speedLabel">0.8s</span>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Animation state
      const listValues = [1, 2, 2, 1];
      let currentStep = 0;
      let isAutoPlaying = false;
      let autoPlayInterval = null;
      let speed = 800;

      // Steps definition
      const steps = [
        {
          phase: "Phase 1: Copy to Array",
          message: "Ready to start! Click 'Next Step' to begin.",
          line: null,
          action: "init",
          variables: {
            values: "[]",
            current: "null",
            left: "undefined",
            right: "undefined",
          },
        },
        {
          phase: "Phase 1: Copy to Array",
          message: "Initialize empty array and set current = head (node 0)",
          line: [2, 5],
          action: "initCopy",
          nodeActive: 0,
          variables: {
            values: "[]",
            current: "node(1)",
            left: "undefined",
            right: "undefined",
          },
        },
        {
          phase: "Phase 1: Copy to Array",
          message: "Push current.val (1) to array, move current to next",
          line: [7, 8],
          action: "copy",
          nodeIndex: 0,
          variables: {
            values: "[1]",
            current: "node(2)",
            left: "undefined",
            right: "undefined",
          },
        },
        {
          phase: "Phase 1: Copy to Array",
          message: "Push current.val (2) to array, move current to next",
          line: [7, 8],
          action: "copy",
          nodeIndex: 1,
          variables: {
            values: "[1, 2]",
            current: "node(2)",
            left: "undefined",
            right: "undefined",
          },
        },
        {
          phase: "Phase 1: Copy to Array",
          message: "Push current.val (2) to array, move current to next",
          line: [7, 8],
          action: "copy",
          nodeIndex: 2,
          variables: {
            values: "[1, 2, 2]",
            current: "node(1)",
            left: "undefined",
            right: "undefined",
          },
        },
        {
          phase: "Phase 1: Copy to Array",
          message: "Push current.val (1) to array, move current to next (null)",
          line: [7, 8],
          action: "copy",
          nodeIndex: 3,
          variables: {
            values: "[1, 2, 2, 1]",
            current: "null",
            left: "undefined",
            right: "undefined",
          },
        },
        {
          phase: "Phase 1: Copy to Array",
          message: "current is null - exit while loop. Array copy complete!",
          line: [6, 9],
          action: "copyDone",
          variables: {
            values: "[1, 2, 2, 1]",
            current: "null",
            left: "undefined",
            right: "undefined",
          },
        },
        {
          phase: "Phase 2: Two-Pointer Check",
          message: "Initialize left = 0, right = 3 (length - 1)",
          line: [12, 13],
          action: "initPointers",
          variables: {
            values: "[1, 2, 2, 1]",
            current: "â€”",
            left: "0",
            right: "3",
          },
        },
        {
          phase: "Phase 2: Two-Pointer Check",
          message: "Compare values[0]=1 with values[3]=1. They match! âœ“",
          line: [15, 16],
          action: "compare",
          left: 0,
          right: 3,
          variables: {
            values: "[1, 2, 2, 1]",
            current: "â€”",
            left: "0",
            right: "3",
          },
        },
        {
          phase: "Phase 2: Two-Pointer Check",
          message: "Move pointers: left++ (0â†’1), right-- (3â†’2)",
          line: [19, 20],
          action: "movePointers",
          left: 1,
          right: 2,
          variables: {
            values: "[1, 2, 2, 1]",
            current: "â€”",
            left: "1",
            right: "2",
          },
        },
        {
          phase: "Phase 2: Two-Pointer Check",
          message: "Compare values[1]=2 with values[2]=2. They match! âœ“",
          line: [15, 16],
          action: "compare",
          left: 1,
          right: 2,
          variables: {
            values: "[1, 2, 2, 1]",
            current: "â€”",
            left: "1",
            right: "2",
          },
        },
        {
          phase: "Phase 2: Two-Pointer Check",
          message: "Move pointers: left++ (1â†’2), right-- (2â†’1)",
          line: [19, 20],
          action: "movePointers",
          left: 2,
          right: 1,
          variables: {
            values: "[1, 2, 2, 1]",
            current: "â€”",
            left: "2",
            right: "1",
          },
        },
        {
          phase: "Phase 2: Two-Pointer Check",
          message: "left (2) â‰¥ right (1) - exit loop. Return TRUE! ðŸŽ‰",
          line: [23],
          action: "result",
          isPalindrome: true,
          variables: {
            values: "[1, 2, 2, 1]",
            current: "â€”",
            left: "2",
            right: "1",
          },
        },
      ];

      // DOM Elements
      const prevBtn = document.getElementById("prevBtn");
      const nextBtn = document.getElementById("nextBtn");
      const resetBtn = document.getElementById("resetBtn");
      const autoBtn = document.getElementById("autoBtn");
      const stepNum = document.getElementById("stepNum");
      const totalSteps = document.getElementById("totalSteps");
      const speedSlider = document.getElementById("speedSlider");
      const speedLabel = document.getElementById("speedLabel");
      const statusPhase = document.getElementById("statusPhase");
      const statusMessage = document.getElementById("statusMessage");
      const variableState = document.getElementById("variableState");
      const pointersContainer = document.getElementById("pointersContainer");
      const leftPointer = document.getElementById("leftPointer");
      const rightPointer = document.getElementById("rightPointer");
      const comparisonIndicator = document.getElementById(
        "comparisonIndicator"
      );
      const resultBanner = document.getElementById("resultBanner");

      totalSteps.textContent = steps.length - 1;

      // Speed control
      speedSlider.addEventListener("input", (e) => {
        speed = parseInt(e.target.value);
        speedLabel.textContent = (speed / 1000).toFixed(1) + "s";
      });

      // Clear all highlights
      function clearHighlights() {
        document.querySelectorAll(".node-box").forEach((n) => {
          n.classList.remove("active", "copied");
        });
        document.querySelectorAll(".array-element").forEach((e) => {
          e.classList.remove("highlight-left", "highlight-right", "match");
        });
        document.querySelectorAll(".code-line").forEach((l) => {
          l.classList.remove("active");
        });
        comparisonIndicator.classList.remove("visible");
      }

      // Highlight code lines
      function highlightLines(lines) {
        if (!lines) return;
        const lineNums = Array.isArray(lines) ? lines : [lines];
        lineNums.forEach((num) => {
          const line = document.querySelector(`.code-line[data-line="${num}"]`);
          if (line) line.classList.add("active");
        });
      }

      // Update variable state display
      function updateVariables(vars) {
        variableState.innerHTML = `
                <div>values = ${vars.values}</div>
                <div>current = ${vars.current}</div>
                <div>left = ${vars.left}</div>
                <div>right = ${vars.right}</div>
            `;
      }

      // Execute step
      function executeStep(stepIndex) {
        const step = steps[stepIndex];
        clearHighlights();

        // Update status
        statusPhase.textContent = step.phase;
        statusMessage.textContent = step.message;
        updateVariables(step.variables);
        highlightLines(step.line);

        // Hide result banner unless it's the result step
        if (step.action !== "result") {
          resultBanner.className = "result-banner";
        }

        switch (step.action) {
          case "init":
            pointersContainer.style.display = "none";
            break;

          case "initCopy":
            document
              .getElementById(`node-${step.nodeActive}`)
              .classList.add("active");
            break;

          case "copy":
            // Mark node as copied
            for (let i = 0; i <= step.nodeIndex; i++) {
              document.getElementById(`node-${i}`).classList.add("copied");
            }
            // Highlight current node
            if (step.nodeIndex < listValues.length - 1) {
              document
                .getElementById(`node-${step.nodeIndex + 1}`)
                .classList.add("active");
            }
            // Show array elements
            for (let i = 0; i <= step.nodeIndex; i++) {
              document.getElementById(`arr-${i}`).classList.add("visible");
            }
            break;

          case "copyDone":
            // All nodes copied
            for (let i = 0; i < listValues.length; i++) {
              document.getElementById(`node-${i}`).classList.add("copied");
              document.getElementById(`arr-${i}`).classList.add("visible");
            }
            break;

          case "initPointers":
            // Show all array elements
            for (let i = 0; i < listValues.length; i++) {
              document.getElementById(`arr-${i}`).classList.add("visible");
            }
            pointersContainer.style.display = "flex";
            leftPointer.textContent = "0";
            rightPointer.textContent = "3";
            document.getElementById("arr-0").classList.add("highlight-left");
            document.getElementById("arr-3").classList.add("highlight-right");
            break;

          case "compare":
            // Show all array elements
            for (let i = 0; i < listValues.length; i++) {
              document.getElementById(`arr-${i}`).classList.add("visible");
            }
            pointersContainer.style.display = "flex";
            leftPointer.textContent = step.left;
            rightPointer.textContent = step.right;

            document
              .getElementById(`arr-${step.left}`)
              .classList.add("highlight-left");
            document
              .getElementById(`arr-${step.right}`)
              .classList.add("highlight-right");

            // Show comparison
            comparisonIndicator.classList.add("visible");
            document.getElementById("leftVal").textContent =
              listValues[step.left];
            document.getElementById("rightVal").textContent =
              listValues[step.right];
            document.getElementById("compOp").textContent = "==";
            document.getElementById("compOp").className =
              "comparison-operator equal";
            break;

          case "movePointers":
            // Show all array elements
            for (let i = 0; i < listValues.length; i++) {
              document.getElementById(`arr-${i}`).classList.add("visible");
            }
            // Mark compared elements as done
            if (step.left > 0) {
              document
                .getElementById(`arr-${step.left - 1}`)
                .classList.add("match");
            }
            if (step.right < listValues.length - 1) {
              document
                .getElementById(`arr-${step.right + 1}`)
                .classList.add("match");
            }

            pointersContainer.style.display = "flex";
            leftPointer.textContent = step.left;
            rightPointer.textContent = step.right;

            if (step.left <= step.right) {
              document
                .getElementById(`arr-${step.left}`)
                .classList.add("highlight-left");
              document
                .getElementById(`arr-${step.right}`)
                .classList.add("highlight-right");
            }
            break;

          case "result":
            // Show all array elements
            for (let i = 0; i < listValues.length; i++) {
              document.getElementById(`arr-${i}`).classList.add("visible");
              document.getElementById(`arr-${i}`).classList.add("match");
            }
            pointersContainer.style.display = "flex";
            leftPointer.textContent = step.variables.left;
            rightPointer.textContent = step.variables.right;

            // Show result
            if (step.isPalindrome) {
              resultBanner.className = "result-banner success";
              document.getElementById("resultIcon").textContent = "âœ“";
              document.getElementById("resultText").textContent =
                "It's a Palindrome!";
            } else {
              resultBanner.className = "result-banner failure";
              document.getElementById("resultIcon").textContent = "âœ—";
              document.getElementById("resultText").textContent =
                "Not a Palindrome";
            }
            break;
        }

        // Update step counter
        stepNum.textContent = stepIndex;

        // Update button states
        prevBtn.disabled = stepIndex === 0;
        nextBtn.disabled = stepIndex === steps.length - 1;
      }

      // Button handlers
      nextBtn.addEventListener("click", () => {
        if (currentStep < steps.length - 1) {
          currentStep++;
          executeStep(currentStep);
        }
      });

      prevBtn.addEventListener("click", () => {
        if (currentStep > 0) {
          currentStep--;
          executeStep(currentStep);
        }
      });

      resetBtn.addEventListener("click", () => {
        stopAutoPlay();
        currentStep = 0;
        executeStep(currentStep);
      });

      function stopAutoPlay() {
        isAutoPlaying = false;
        autoBtn.textContent = "â–¶â–¶ Auto Play";
        if (autoPlayInterval) {
          clearInterval(autoPlayInterval);
          autoPlayInterval = null;
        }
      }

      autoBtn.addEventListener("click", () => {
        if (isAutoPlaying) {
          stopAutoPlay();
        } else {
          isAutoPlaying = true;
          autoBtn.textContent = "â¸ Pause";

          autoPlayInterval = setInterval(() => {
            if (currentStep < steps.length - 1) {
              currentStep++;
              executeStep(currentStep);
            } else {
              stopAutoPlay();
            }
          }, speed);
        }
      });

      // Keyboard navigation
      document.addEventListener("keydown", (e) => {
        if (e.key === "ArrowRight" || e.key === " ") {
          e.preventDefault();
          if (currentStep < steps.length - 1) {
            currentStep++;
            executeStep(currentStep);
          }
        } else if (e.key === "ArrowLeft") {
          e.preventDefault();
          if (currentStep > 0) {
            currentStep--;
            executeStep(currentStep);
          }
        } else if (e.key === "r" || e.key === "R") {
          stopAutoPlay();
          currentStep = 0;
          executeStep(currentStep);
        }
      });

      // Initialize
      executeStep(0);
    </script>
  </body>
</html>
