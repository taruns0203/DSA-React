<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Brute Force - Linked List Intersection | Whiteboard</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;500;600;700&family=Patrick+Hand&family=Kalam:wght@300;400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Kalam", cursive;
        min-height: 100vh;
        overflow-x: hidden;
      }

      /* Whiteboard texture background */
      .whiteboard {
        min-height: 100vh;
        background: 
                /* Grid lines */ linear-gradient(
            rgba(200, 210, 220, 0.3) 1px,
            transparent 1px
          ),
          linear-gradient(90deg, rgba(200, 210, 220, 0.3) 1px, transparent 1px),
          /* Base whiteboard color with subtle texture */
            linear-gradient(135deg, #f8f9fa 0%, #e9ecef 50%, #f1f3f5 100%);
        background-size: 30px 30px, 30px 30px, 100% 100%;
        padding: 30px;
        position: relative;
      }

      /* Subtle paper texture overlay */
      .whiteboard::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
        pointer-events: none;
        z-index: 1;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        position: relative;
        z-index: 2;
      }

      /* Handwritten title style */
      .title {
        font-family: "Caveat", cursive;
        font-size: 3.5rem;
        font-weight: 700;
        color: #2d3436;
        text-align: center;
        margin-bottom: 10px;
        transform: rotate(-1deg);
        text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.05);
      }

      .subtitle {
        font-family: "Patrick Hand", cursive;
        font-size: 1.4rem;
        color: #636e72;
        text-align: center;
        margin-bottom: 40px;
        transform: rotate(0.5deg);
      }

      /* Marker-drawn box effect */
      .section-box {
        background: rgba(255, 255, 255, 0.7);
        border: 3px solid #2d3436;
        border-radius: 3px;
        padding: 25px;
        margin-bottom: 30px;
        position: relative;
        box-shadow: 4px 4px 0px rgba(0, 0, 0, 0.1);
        /* Hand-drawn effect */
        transform: rotate(-0.3deg);
      }

      .section-box::before {
        content: "";
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        border: 2px solid rgba(45, 52, 54, 0.3);
        border-radius: 5px;
        transform: rotate(0.5deg);
        pointer-events: none;
      }

      .section-title {
        font-family: "Caveat", cursive;
        font-size: 2rem;
        font-weight: 600;
        color: #0984e3;
        margin-bottom: 15px;
        display: inline-block;
        padding: 5px 15px;
        background: linear-gradient(
          180deg,
          transparent 60%,
          rgba(116, 185, 255, 0.3) 60%
        );
        transform: rotate(-0.5deg);
      }

      /* Linked list visualization */
      .lists-container {
        display: flex;
        flex-direction: column;
        gap: 40px;
        margin: 30px 0;
      }

      .list-row {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .list-label {
        font-family: "Caveat", cursive;
        font-size: 1.8rem;
        font-weight: 600;
        min-width: 80px;
        transform: rotate(-2deg);
      }

      .list-a-label {
        color: #d63031;
      }
      .list-b-label {
        color: #6c5ce7;
      }

      .node {
        width: 60px;
        height: 60px;
        border: 3px solid #2d3436;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: "Kalam", cursive;
        font-size: 1.5rem;
        font-weight: 700;
        position: relative;
        transition: all 0.3s ease;
        background: white;
      }

      .node-a {
        background: linear-gradient(135deg, #fff5f5 0%, #ffe3e3 100%);
        border-color: #d63031;
      }

      .node-b {
        background: linear-gradient(135deg, #f3f0ff 0%, #e5dbff 100%);
        border-color: #6c5ce7;
      }

      .node-shared {
        background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%);
        border-color: #00b894;
      }

      .node.highlight-a {
        box-shadow: 0 0 0 4px #d63031, 0 0 20px rgba(214, 48, 49, 0.5);
        transform: scale(1.1);
      }

      .node.highlight-b {
        box-shadow: 0 0 0 4px #6c5ce7, 0 0 20px rgba(108, 92, 231, 0.5);
        transform: scale(1.1);
      }

      .node.found {
        box-shadow: 0 0 0 5px #00b894, 0 0 30px rgba(0, 184, 148, 0.6);
        transform: scale(1.15);
        animation: pulse 0.5s ease infinite alternate;
      }

      @keyframes pulse {
        from {
          box-shadow: 0 0 0 5px #00b894, 0 0 30px rgba(0, 184, 148, 0.6);
        }
        to {
          box-shadow: 0 0 0 8px #00b894, 0 0 40px rgba(0, 184, 148, 0.8);
        }
      }

      /* Hand-drawn arrow */
      .arrow {
        width: 30px;
        height: 3px;
        background: #2d3436;
        position: relative;
        margin: 0 -5px;
      }

      .arrow::after {
        content: "";
        position: absolute;
        right: -2px;
        top: -5px;
        border: 6px solid transparent;
        border-left: 10px solid #2d3436;
      }

      /* Controls */
      .controls {
        display: flex;
        gap: 15px;
        justify-content: center;
        flex-wrap: wrap;
        margin: 30px 0;
      }

      .btn {
        font-family: "Patrick Hand", cursive;
        font-size: 1.2rem;
        padding: 12px 25px;
        border: 3px solid #2d3436;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
        position: relative;
        background: white;
      }

      .btn:hover {
        transform: translateY(-3px) rotate(-1deg);
        box-shadow: 4px 4px 0px rgba(0, 0, 0, 0.2);
      }

      .btn:active {
        transform: translateY(0);
        box-shadow: none;
      }

      .btn-primary {
        background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
        color: white;
        border-color: #0984e3;
      }

      .btn-success {
        background: linear-gradient(135deg, #55efc4 0%, #00b894 100%);
        color: white;
        border-color: #00b894;
      }

      .btn-danger {
        background: linear-gradient(135deg, #fab1a0 0%, #d63031 100%);
        color: white;
        border-color: #d63031;
      }

      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none !important;
      }

      /* Speed control */
      .speed-control {
        display: flex;
        align-items: center;
        gap: 10px;
        font-family: "Patrick Hand", cursive;
        font-size: 1.1rem;
      }

      .speed-control input {
        width: 120px;
        accent-color: #0984e3;
      }

      /* Explanation panel */
      .explanation-panel {
        background: rgba(255, 251, 235, 0.9);
        border: 3px solid #f39c12;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
        transform: rotate(0.3deg);
        box-shadow: 3px 3px 0px rgba(243, 156, 18, 0.3);
      }

      .explanation-title {
        font-family: "Caveat", cursive;
        font-size: 1.5rem;
        color: #e17055;
        margin-bottom: 10px;
      }

      .explanation-text {
        font-family: "Kalam", cursive;
        font-size: 1.2rem;
        color: #2d3436;
        line-height: 1.6;
      }

      /* Step counter */
      .step-info {
        display: flex;
        justify-content: space-around;
        flex-wrap: wrap;
        gap: 20px;
        margin: 20px 0;
      }

      .step-box {
        background: white;
        border: 3px dashed #636e72;
        border-radius: 10px;
        padding: 15px 25px;
        text-align: center;
        min-width: 150px;
      }

      .step-box-label {
        font-family: "Patrick Hand", cursive;
        font-size: 1rem;
        color: #636e72;
        margin-bottom: 5px;
      }

      .step-box-value {
        font-family: "Caveat", cursive;
        font-size: 2rem;
        font-weight: 700;
      }

      .step-box-value.red {
        color: #d63031;
      }
      .step-box-value.purple {
        color: #6c5ce7;
      }
      .step-box-value.blue {
        color: #0984e3;
      }
      .step-box-value.green {
        color: #00b894;
      }

      /* Code panel */
      .code-panel {
        background: #2d3436;
        border-radius: 10px;
        padding: 20px;
        margin: 20px 0;
        overflow-x: auto;
        transform: rotate(-0.2deg);
        box-shadow: 5px 5px 0px rgba(0, 0, 0, 0.2);
      }

      .code-line {
        font-family: "Courier New", monospace;
        font-size: 0.95rem;
        color: #dfe6e9;
        padding: 4px 10px;
        border-radius: 3px;
        margin: 2px 0;
        transition: all 0.3s ease;
        white-space: pre;
      }

      .code-line.active {
        background: rgba(116, 185, 255, 0.3);
        border-left: 4px solid #74b9ff;
        color: #fff;
      }

      .code-keyword {
        color: #fd79a8;
      }
      .code-function {
        color: #74b9ff;
      }
      .code-variable {
        color: #55efc4;
      }
      .code-comment {
        color: #636e72;
        font-style: italic;
      }
      .code-operator {
        color: #ffeaa7;
      }
      .code-return {
        color: #fab1a0;
      }

      /* Comparison tracker */
      .comparison-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 15px;
        margin: 20px 0;
        max-height: 300px;
        overflow-y: auto;
        padding: 10px;
        background: rgba(255, 255, 255, 0.5);
        border-radius: 10px;
        border: 2px dashed #b2bec3;
      }

      .comparison-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px 12px;
        background: white;
        border-radius: 8px;
        border: 2px solid #dfe6e9;
        font-family: "Kalam", cursive;
        font-size: 1rem;
      }

      .comparison-item.current {
        border-color: #0984e3;
        background: #dfe6e9;
      }

      .comparison-item.match {
        border-color: #00b894;
        background: #d4fc79;
      }

      .comparison-icon {
        font-size: 1.2rem;
      }

      /* Result banner */
      .result-banner {
        display: none;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        margin: 20px 0;
        font-family: "Caveat", cursive;
        font-size: 2rem;
        animation: slideIn 0.5s ease;
      }

      @keyframes slideIn {
        from {
          transform: translateY(-20px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .result-banner.found {
        display: block;
        background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%);
        border: 4px solid #00b894;
        color: #00b894;
      }

      .result-banner.not-found {
        display: block;
        background: linear-gradient(135deg, #fab1a0 0%, #ff7675 100%);
        border: 4px solid #d63031;
        color: #d63031;
      }

      /* Complexity box */
      .complexity-box {
        background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%);
        border-radius: 10px;
        padding: 20px;
        color: white;
        margin: 20px 0;
        transform: rotate(0.5deg);
      }

      .complexity-title {
        font-family: "Caveat", cursive;
        font-size: 1.8rem;
        margin-bottom: 15px;
      }

      .complexity-content {
        display: flex;
        gap: 40px;
        flex-wrap: wrap;
      }

      .complexity-item {
        font-family: "Kalam", cursive;
        font-size: 1.2rem;
      }

      .complexity-item strong {
        font-family: "Caveat", cursive;
        font-size: 1.5rem;
      }

      /* Sticky note style annotations */
      .sticky-note {
        background: #fff9c4;
        padding: 15px;
        border-radius: 3px;
        box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.15);
        transform: rotate(-2deg);
        font-family: "Patrick Hand", cursive;
        font-size: 1.1rem;
        max-width: 250px;
        position: relative;
      }

      .sticky-note::before {
        content: "üìå";
        position: absolute;
        top: -10px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 1.5rem;
      }

      /* Legend */
      .legend {
        display: flex;
        gap: 30px;
        flex-wrap: wrap;
        justify-content: center;
        margin: 20px 0;
        padding: 15px;
        background: rgba(255, 255, 255, 0.7);
        border-radius: 10px;
        border: 2px dashed #b2bec3;
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: 8px;
        font-family: "Patrick Hand", cursive;
        font-size: 1.1rem;
      }

      .legend-color {
        width: 25px;
        height: 25px;
        border-radius: 5px;
        border: 2px solid #2d3436;
      }

      .legend-color.red {
        background: linear-gradient(135deg, #fff5f5 0%, #ffe3e3 100%);
        border-color: #d63031;
      }
      .legend-color.purple {
        background: linear-gradient(135deg, #f3f0ff 0%, #e5dbff 100%);
        border-color: #6c5ce7;
      }
      .legend-color.green {
        background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%);
        border-color: #00b894;
      }

      /* Responsive */
      @media (max-width: 768px) {
        .title {
          font-size: 2.5rem;
        }
        .node {
          width: 50px;
          height: 50px;
          font-size: 1.2rem;
        }
        .controls {
          gap: 10px;
        }
        .btn {
          padding: 10px 15px;
          font-size: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="whiteboard">
      <div class="container">
        <h1 class="title">üîç Brute Force: Find Intersection</h1>
        <p class="subtitle">
          For each node in List A, check ALL nodes in List B
        </p>

        <!-- Legend -->
        <div class="legend">
          <div class="legend-item">
            <div class="legend-color red"></div>
            <span>List A nodes</span>
          </div>
          <div class="legend-item">
            <div class="legend-color purple"></div>
            <span>List B nodes</span>
          </div>
          <div class="legend-item">
            <div class="legend-color green"></div>
            <span>Shared nodes (intersection)</span>
          </div>
        </div>

        <!-- Lists Visualization -->
        <div class="section-box">
          <div class="section-title">üìä The Linked Lists</div>

          <div class="lists-container">
            <div class="list-row">
              <span class="list-label list-a-label">List A:</span>
              <div class="node node-a" data-list="a" data-index="0">4</div>
              <div class="arrow"></div>
              <div class="node node-a" data-list="a" data-index="1">1</div>
              <div class="arrow"></div>
              <div
                class="node node-shared"
                data-list="a"
                data-index="2"
                data-shared="true"
              >
                8
              </div>
              <div class="arrow"></div>
              <div
                class="node node-shared"
                data-list="a"
                data-index="3"
                data-shared="true"
              >
                4
              </div>
              <div class="arrow"></div>
              <div
                class="node node-shared"
                data-list="a"
                data-index="4"
                data-shared="true"
              >
                5
              </div>
              <div class="arrow"></div>
              <span
                style="font-family: 'Kalam'; font-size: 1.2rem; color: #636e72"
                >null</span
              >
            </div>

            <div class="list-row">
              <span class="list-label list-b-label">List B:</span>
              <div class="node node-b" data-list="b" data-index="0">5</div>
              <div class="arrow"></div>
              <div class="node node-b" data-list="b" data-index="1">6</div>
              <div class="arrow"></div>
              <div class="node node-b" data-list="b" data-index="2">1</div>
              <div class="arrow"></div>
              <div
                class="node node-shared"
                data-list="b"
                data-index="3"
                data-shared="true"
              >
                8
              </div>
              <div class="arrow"></div>
              <div
                class="node node-shared"
                data-list="b"
                data-index="4"
                data-shared="true"
              >
                4
              </div>
              <div class="arrow"></div>
              <div
                class="node node-shared"
                data-list="b"
                data-index="5"
                data-shared="true"
              >
                5
              </div>
              <div class="arrow"></div>
              <span
                style="font-family: 'Kalam'; font-size: 1.2rem; color: #636e72"
                >null</span
              >
            </div>
          </div>

          <div
            class="sticky-note"
            style="margin: 20px auto; text-align: center"
          >
            üí° Green nodes are the SAME object in memory!<br />
            The intersection is where they physically merge.
          </div>
        </div>

        <!-- Controls -->
        <div class="controls">
          <button class="btn btn-primary" id="startBtn" onclick="start()">
            ‚ñ∂Ô∏è Start
          </button>
          <button
            class="btn btn-success"
            id="stepBtn"
            onclick="step()"
            disabled
          >
            ‚è≠Ô∏è Next Step
          </button>
          <button
            class="btn btn-primary"
            id="autoBtn"
            onclick="toggleAuto()"
            disabled
          >
            üîÑ Auto Play
          </button>
          <button class="btn btn-danger" id="resetBtn" onclick="reset()">
            üîÑ Reset
          </button>
          <div class="speed-control">
            <label>Speed:</label>
            <input
              type="range"
              id="speedSlider"
              min="100"
              max="1500"
              value="700"
              onchange="updateSpeed()"
            />
            <span id="speedLabel">700ms</span>
          </div>
        </div>

        <!-- Step Information -->
        <div class="step-info">
          <div class="step-box">
            <div class="step-box-label">Pointer A</div>
            <div class="step-box-value red" id="pointerADisplay">‚Äî</div>
          </div>
          <div class="step-box">
            <div class="step-box-label">Pointer B</div>
            <div class="step-box-value purple" id="pointerBDisplay">‚Äî</div>
          </div>
          <div class="step-box">
            <div class="step-box-label">Comparisons</div>
            <div class="step-box-value blue" id="comparisonsDisplay">0</div>
          </div>
          <div class="step-box">
            <div class="step-box-label">Status</div>
            <div class="step-box-value green" id="statusDisplay">Ready</div>
          </div>
        </div>

        <!-- Explanation Panel -->
        <div class="explanation-panel">
          <div class="explanation-title">üìù What's Happening:</div>
          <div class="explanation-text" id="explanationText">
            Click "Start" to begin the brute force algorithm. We'll check each
            node in List A against every node in List B until we find a match
            (same memory reference) or exhaust all possibilities.
          </div>
        </div>

        <!-- Code Panel -->
        <div class="section-box">
          <div class="section-title">üíª Algorithm Code</div>
          <div class="code-panel">
            <div class="code-line" data-line="1">
              <span class="code-keyword">function</span>
              <span class="code-function">getIntersectionNode</span>(headA,
              headB) {
            </div>
            <div class="code-line" data-line="2">
              <span class="code-keyword">let</span>
              <span class="code-variable">pointerA</span> = headA;
            </div>
            <div class="code-line" data-line="3"></div>
            <div class="code-line" data-line="4">
              <span class="code-keyword">while</span> (<span
                class="code-variable"
                >pointerA</span
              >
              <span class="code-operator">!==</span>
              <span class="code-keyword">null</span>) {
            </div>
            <div class="code-line" data-line="5">
              <span class="code-keyword">let</span>
              <span class="code-variable">pointerB</span> = headB;
            </div>
            <div class="code-line" data-line="6"></div>
            <div class="code-line" data-line="7">
              <span class="code-keyword">while</span> (<span
                class="code-variable"
                >pointerB</span
              >
              <span class="code-operator">!==</span>
              <span class="code-keyword">null</span>) {
            </div>
            <div class="code-line" data-line="8">
              <span class="code-keyword">if</span> (<span class="code-variable"
                >pointerA</span
              >
              <span class="code-operator">===</span>
              <span class="code-variable">pointerB</span>) {
              <span class="code-comment">// Same reference!</span>
            </div>
            <div class="code-line" data-line="9">
              <span class="code-return">return</span>
              <span class="code-variable">pointerA</span>;
            </div>
            <div class="code-line" data-line="10">}</div>
            <div class="code-line" data-line="11">
              <span class="code-variable">pointerB</span> =
              <span class="code-variable">pointerB</span>.next;
            </div>
            <div class="code-line" data-line="12">}</div>
            <div class="code-line" data-line="13">
              <span class="code-variable">pointerA</span> =
              <span class="code-variable">pointerA</span>.next;
            </div>
            <div class="code-line" data-line="14">}</div>
            <div class="code-line" data-line="15">
              <span class="code-return">return</span>
              <span class="code-keyword">null</span>;
            </div>
            <div class="code-line" data-line="16">}</div>
          </div>
        </div>

        <!-- Comparison History -->
        <div class="section-box">
          <div class="section-title">üìã Comparison History</div>
          <div class="comparison-grid" id="comparisonGrid">
            <div
              style="
                font-family: 'Patrick Hand';
                color: #636e72;
                grid-column: 1/-1;
                text-align: center;
              "
            >
              Comparisons will appear here...
            </div>
          </div>
        </div>

        <!-- Result Banner -->
        <div class="result-banner" id="resultBanner"></div>

        <!-- Complexity Box -->
        <div class="complexity-box">
          <div class="complexity-title">‚è±Ô∏è Complexity Analysis</div>
          <div class="complexity-content">
            <div class="complexity-item">
              <strong>Time: O(m √ó n)</strong><br />
              For each of m nodes in A, we check all n nodes in B
            </div>
            <div class="complexity-item">
              <strong>Space: O(1)</strong><br />
              Only two pointer variables used
            </div>
            <div class="complexity-item">
              <strong>This Example:</strong><br />
              5 nodes √ó 6 nodes = up to
              <span id="maxComparisons">30</span> comparisons
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // List structures
      const listA = [
        { val: 4, shared: false, id: "A0" },
        { val: 1, shared: false, id: "A1" },
        { val: 8, shared: true, id: "C0" },
        { val: 4, shared: true, id: "C1" },
        { val: 5, shared: true, id: "C2" },
      ];

      const listB = [
        { val: 5, shared: false, id: "B0" },
        { val: 6, shared: false, id: "B1" },
        { val: 1, shared: false, id: "B2" },
        { val: 8, shared: true, id: "C0" }, // Same as listA[2]
        { val: 4, shared: true, id: "C1" }, // Same as listA[3]
        { val: 5, shared: true, id: "C2" }, // Same as listA[4]
      ];

      let pointerA = 0;
      let pointerB = 0;
      let comparisons = 0;
      let isRunning = false;
      let autoPlayInterval = null;
      let speed = 700;
      let found = false;

      function updateSpeed() {
        speed = parseInt(document.getElementById("speedSlider").value);
        document.getElementById("speedLabel").textContent = speed + "ms";
      }

      function start() {
        document.getElementById("startBtn").disabled = true;
        document.getElementById("stepBtn").disabled = false;
        document.getElementById("autoBtn").disabled = false;
        isRunning = true;
        pointerA = 0;
        pointerB = 0;
        updateDisplay();
        highlightCode(2);
        setExplanation(
          "Starting! We set pointerA to the head of List A (node with value 4)."
        );
      }

      function step() {
        if (found || !isRunning) return;

        // Clear previous highlights
        clearHighlights();

        // Get current nodes
        const nodeA = listA[pointerA];
        const nodeB = listB[pointerB];

        // Highlight current nodes
        highlightNode("a", pointerA, "highlight-a");
        highlightNode("b", pointerB, "highlight-b");

        // Check for match (same memory reference - simulated by same id)
        comparisons++;

        const isMatch = nodeA.id === nodeB.id;

        addComparison(nodeA, nodeB, isMatch);
        updateDisplay();

        if (isMatch) {
          // Found intersection!
          found = true;
          highlightNode("a", pointerA, "found");
          highlightNode("b", pointerB, "found");
          highlightCode(8, 9);
          setExplanation(
            `üéâ FOUND! Node A (id: ${nodeA.id}, val: ${nodeA.val}) === Node B (id: ${nodeB.id}, val: ${nodeB.val}). Same memory reference! This is the intersection point.`
          );
          document.getElementById("statusDisplay").textContent = "Found!";
          showResult(true, nodeA.val);
          stopAuto();
          document.getElementById("stepBtn").disabled = true;
          document.getElementById("autoBtn").disabled = true;
          return;
        }

        // Not a match - explain why
        if (nodeA.val === nodeB.val) {
          setExplanation(
            `Comparing A[${pointerA}] (id: ${nodeA.id}, val: ${nodeA.val}) with B[${pointerB}] (id: ${nodeB.id}, val: ${nodeB.val}). Same VALUE but DIFFERENT nodes in memory! ‚ùå`
          );
        } else {
          setExplanation(
            `Comparing A[${pointerA}] (id: ${nodeA.id}, val: ${nodeA.val}) with B[${pointerB}] (id: ${nodeB.id}, val: ${nodeB.val}). Different nodes. ‚ùå`
          );
        }

        // Move pointerB forward
        pointerB++;

        if (pointerB >= listB.length) {
          // Finished inner loop, move pointerA
          highlightCode(13);
          pointerA++;
          pointerB = 0;

          if (pointerA >= listA.length) {
            // No intersection found
            found = true;
            highlightCode(15);
            setExplanation(
              "Exhausted all nodes in List A. No intersection found. Return null."
            );
            document.getElementById("statusDisplay").textContent = "Not Found";
            showResult(false);
            stopAuto();
            document.getElementById("stepBtn").disabled = true;
            document.getElementById("autoBtn").disabled = true;
            return;
          }

          setExplanation(
            getExplanation() +
              ` Moving to next node in A (now at index ${pointerA}).`
          );
        } else {
          highlightCode(11);
        }

        updateDisplay();
      }

      function highlightNode(list, index, className) {
        const nodes = document.querySelectorAll(
          `.node[data-list="${list}"][data-index="${index}"]`
        );
        nodes.forEach((node) => node.classList.add(className));

        // Also highlight shared nodes in both lists
        if (className === "found") {
          const currentNode = list === "a" ? listA[index] : listB[index];
          if (currentNode.shared) {
            // Find matching node in other list
            const otherList = list === "a" ? "b" : "a";
            const otherArr = list === "a" ? listB : listA;
            for (let i = 0; i < otherArr.length; i++) {
              if (otherArr[i].id === currentNode.id) {
                document
                  .querySelectorAll(
                    `.node[data-list="${otherList}"][data-index="${i}"]`
                  )
                  .forEach((node) => node.classList.add(className));
              }
            }
          }
        }
      }

      function clearHighlights() {
        document.querySelectorAll(".node").forEach((node) => {
          node.classList.remove("highlight-a", "highlight-b", "found");
        });
      }

      function highlightCode(...lines) {
        document.querySelectorAll(".code-line").forEach((line) => {
          line.classList.remove("active");
        });
        lines.forEach((lineNum) => {
          const line = document.querySelector(
            `.code-line[data-line="${lineNum}"]`
          );
          if (line) line.classList.add("active");
        });
      }

      function updateDisplay() {
        document.getElementById("pointerADisplay").textContent =
          pointerA < listA.length
            ? `A[${pointerA}] = ${listA[pointerA].val}`
            : "null";
        document.getElementById("pointerBDisplay").textContent =
          pointerB < listB.length
            ? `B[${pointerB}] = ${listB[pointerB].val}`
            : "null";
        document.getElementById("comparisonsDisplay").textContent = comparisons;
      }

      function setExplanation(text) {
        document.getElementById("explanationText").textContent = text;
      }

      function getExplanation() {
        return document.getElementById("explanationText").textContent;
      }

      function addComparison(nodeA, nodeB, isMatch) {
        const grid = document.getElementById("comparisonGrid");

        // Clear placeholder if first comparison
        if (comparisons === 1) {
          grid.innerHTML = "";
        }

        // Remove 'current' class from previous items
        grid.querySelectorAll(".comparison-item").forEach((item) => {
          item.classList.remove("current");
        });

        const item = document.createElement("div");
        item.className = `comparison-item ${isMatch ? "match" : "current"}`;

        const icon = isMatch ? "‚úÖ" : "‚ùå";
        const aLabel = `A[${listA.indexOf(nodeA)}]`;
        const bLabel = `B[${listB.indexOf(nodeB)}]`;

        item.innerHTML = `
                <span class="comparison-icon">${icon}</span>
                <span>${aLabel}(${nodeA.val}) vs ${bLabel}(${nodeB.val})</span>
            `;

        grid.appendChild(item);
        grid.scrollTop = grid.scrollHeight;
      }

      function showResult(wasFound, value = null) {
        const banner = document.getElementById("resultBanner");
        if (wasFound) {
          banner.className = "result-banner found";
          banner.textContent = `‚úÖ Intersection found at node with value ${value}!`;
        } else {
          banner.className = "result-banner not-found";
          banner.textContent =
            "‚ùå No intersection - lists are completely separate";
        }
      }

      function toggleAuto() {
        if (autoPlayInterval) {
          stopAuto();
        } else {
          startAuto();
        }
      }

      function startAuto() {
        document.getElementById("autoBtn").textContent = "‚è∏Ô∏è Pause";
        document.getElementById("stepBtn").disabled = true;
        autoPlayInterval = setInterval(() => {
          if (found) {
            stopAuto();
          } else {
            step();
          }
        }, speed);
      }

      function stopAuto() {
        if (autoPlayInterval) {
          clearInterval(autoPlayInterval);
          autoPlayInterval = null;
        }
        document.getElementById("autoBtn").textContent = "üîÑ Auto Play";
        if (!found) {
          document.getElementById("stepBtn").disabled = false;
        }
      }

      function reset() {
        stopAuto();
        found = false;
        pointerA = 0;
        pointerB = 0;
        comparisons = 0;

        clearHighlights();
        document
          .querySelectorAll(".code-line")
          .forEach((line) => line.classList.remove("active"));

        document.getElementById("startBtn").disabled = false;
        document.getElementById("stepBtn").disabled = true;
        document.getElementById("autoBtn").disabled = true;

        document.getElementById("pointerADisplay").textContent = "‚Äî";
        document.getElementById("pointerBDisplay").textContent = "‚Äî";
        document.getElementById("comparisonsDisplay").textContent = "0";
        document.getElementById("statusDisplay").textContent = "Ready";

        document.getElementById("comparisonGrid").innerHTML = `
                <div style="font-family: 'Patrick Hand'; color: #636e72; grid-column: 1/-1; text-align: center;">
                    Comparisons will appear here...
                </div>
            `;

        document.getElementById("resultBanner").className = "result-banner";
        document.getElementById("resultBanner").style.display = "none";

        setExplanation(
          "Click 'Start' to begin the brute force algorithm. We'll check each node in List A against every node in List B until we find a match (same memory reference) or exhaust all possibilities."
        );

        isRunning = false;
      }

      // Initialize
      document.getElementById("maxComparisons").textContent =
        listA.length * listB.length;
    </script>
  </body>
</html>
