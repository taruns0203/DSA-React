<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hash Set Approach - Linked List Intersection | Whiteboard</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;500;600;700&family=Patrick+Hand&family=Kalam:wght@300;400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Kalam", cursive;
        min-height: 100vh;
        overflow-x: hidden;
      }

      /* Whiteboard texture background */
      .whiteboard {
        min-height: 100vh;
        background: linear-gradient(
            rgba(200, 210, 220, 0.3) 1px,
            transparent 1px
          ),
          linear-gradient(90deg, rgba(200, 210, 220, 0.3) 1px, transparent 1px),
          linear-gradient(135deg, #f8f9fa 0%, #e9ecef 50%, #f1f3f5 100%);
        background-size: 30px 30px, 30px 30px, 100% 100%;
        padding: 30px;
        position: relative;
      }

      .whiteboard::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
        pointer-events: none;
        z-index: 1;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        position: relative;
        z-index: 2;
      }

      .title {
        font-family: "Caveat", cursive;
        font-size: 3.5rem;
        font-weight: 700;
        color: #2d3436;
        text-align: center;
        margin-bottom: 10px;
        transform: rotate(-1deg);
        text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.05);
      }

      .subtitle {
        font-family: "Patrick Hand", cursive;
        font-size: 1.4rem;
        color: #636e72;
        text-align: center;
        margin-bottom: 40px;
        transform: rotate(0.5deg);
      }

      .section-box {
        background: rgba(255, 255, 255, 0.7);
        border: 3px solid #2d3436;
        border-radius: 3px;
        padding: 25px;
        margin-bottom: 30px;
        position: relative;
        box-shadow: 4px 4px 0px rgba(0, 0, 0, 0.1);
        transform: rotate(-0.3deg);
      }

      .section-box::before {
        content: "";
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        border: 2px solid rgba(45, 52, 54, 0.3);
        border-radius: 5px;
        transform: rotate(0.5deg);
        pointer-events: none;
      }

      .section-title {
        font-family: "Caveat", cursive;
        font-size: 2rem;
        font-weight: 600;
        color: #0984e3;
        margin-bottom: 15px;
        display: inline-block;
        padding: 5px 15px;
        background: linear-gradient(
          180deg,
          transparent 60%,
          rgba(116, 185, 255, 0.3) 60%
        );
        transform: rotate(-0.5deg);
      }

      /* Phase indicator */
      .phase-indicator {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin: 20px 0;
        flex-wrap: wrap;
      }

      .phase-badge {
        padding: 10px 25px;
        border-radius: 30px;
        font-family: "Patrick Hand", cursive;
        font-size: 1.2rem;
        border: 3px solid;
        transition: all 0.3s ease;
        opacity: 0.4;
      }

      .phase-badge.phase-1 {
        background: linear-gradient(135deg, #fff5f5 0%, #ffe3e3 100%);
        border-color: #d63031;
        color: #d63031;
      }

      .phase-badge.phase-2 {
        background: linear-gradient(135deg, #f3f0ff 0%, #e5dbff 100%);
        border-color: #6c5ce7;
        color: #6c5ce7;
      }

      .phase-badge.active {
        opacity: 1;
        transform: scale(1.1);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      }

      /* Lists visualization */
      .lists-container {
        display: flex;
        flex-direction: column;
        gap: 40px;
        margin: 30px 0;
      }

      .list-row {
        display: flex;
        align-items: center;
        gap: 10px;
        flex-wrap: wrap;
      }

      .list-label {
        font-family: "Caveat", cursive;
        font-size: 1.8rem;
        font-weight: 600;
        min-width: 80px;
        transform: rotate(-2deg);
      }

      .list-a-label {
        color: #d63031;
      }
      .list-b-label {
        color: #6c5ce7;
      }

      .node {
        width: 60px;
        height: 60px;
        border: 3px solid #2d3436;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: "Kalam", cursive;
        font-size: 1.5rem;
        font-weight: 700;
        position: relative;
        transition: all 0.3s ease;
        background: white;
      }

      .node-a {
        background: linear-gradient(135deg, #fff5f5 0%, #ffe3e3 100%);
        border-color: #d63031;
      }

      .node-b {
        background: linear-gradient(135deg, #f3f0ff 0%, #e5dbff 100%);
        border-color: #6c5ce7;
      }

      .node-shared {
        background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%);
        border-color: #00b894;
      }

      .node.highlight {
        transform: scale(1.15);
        z-index: 10;
      }

      .node.highlight-a {
        box-shadow: 0 0 0 4px #d63031, 0 0 20px rgba(214, 48, 49, 0.5);
      }

      .node.highlight-b {
        box-shadow: 0 0 0 4px #6c5ce7, 0 0 20px rgba(108, 92, 231, 0.5);
      }

      .node.added-to-set {
        box-shadow: 0 0 0 4px #fdcb6e, 0 0 20px rgba(253, 203, 110, 0.6);
      }

      .node.found {
        box-shadow: 0 0 0 5px #00b894, 0 0 30px rgba(0, 184, 148, 0.6);
        animation: pulse 0.5s ease infinite alternate;
      }

      @keyframes pulse {
        from {
          box-shadow: 0 0 0 5px #00b894, 0 0 30px rgba(0, 184, 148, 0.6);
        }
        to {
          box-shadow: 0 0 0 8px #00b894, 0 0 40px rgba(0, 184, 148, 0.8);
        }
      }

      .node.checked {
        opacity: 0.5;
      }

      /* Checkmark for nodes added to set */
      .node .checkmark {
        position: absolute;
        top: -8px;
        right: -8px;
        width: 22px;
        height: 22px;
        background: #fdcb6e;
        border-radius: 50%;
        display: none;
        align-items: center;
        justify-content: center;
        font-size: 0.9rem;
        border: 2px solid #f39c12;
      }

      .node.in-set .checkmark {
        display: flex;
      }

      /* Arrow */
      .arrow {
        width: 30px;
        height: 3px;
        background: #2d3436;
        position: relative;
        margin: 0 -5px;
      }

      .arrow::after {
        content: "";
        position: absolute;
        right: -2px;
        top: -5px;
        border: 6px solid transparent;
        border-left: 10px solid #2d3436;
      }

      /* Hash Set visualization */
      .hashset-container {
        margin: 30px 0;
      }

      .hashset-visual {
        background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
        border: 4px solid #f39c12;
        border-radius: 15px;
        padding: 20px;
        min-height: 120px;
        position: relative;
        transform: rotate(0.5deg);
        box-shadow: 5px 5px 0px rgba(243, 156, 18, 0.3);
      }

      .hashset-label {
        position: absolute;
        top: -15px;
        left: 20px;
        background: #f39c12;
        color: white;
        padding: 5px 15px;
        border-radius: 20px;
        font-family: "Caveat", cursive;
        font-size: 1.3rem;
        font-weight: 600;
      }

      .hashset-content {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        padding-top: 10px;
        min-height: 60px;
        align-items: center;
      }

      .hashset-item {
        background: white;
        border: 3px solid #e17055;
        border-radius: 10px;
        padding: 8px 15px;
        font-family: "Kalam", cursive;
        font-size: 1.1rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 8px;
        animation: popIn 0.3s ease;
        transition: all 0.3s ease;
      }

      .hashset-item.highlight {
        background: #55efc4;
        border-color: #00b894;
        transform: scale(1.1);
      }

      .hashset-item .node-ref {
        color: #636e72;
        font-size: 0.9rem;
      }

      @keyframes popIn {
        from {
          transform: scale(0);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }

      .hashset-empty {
        color: #636e72;
        font-family: "Patrick Hand", cursive;
        font-size: 1.2rem;
        font-style: italic;
      }

      /* Controls */
      .controls {
        display: flex;
        gap: 15px;
        justify-content: center;
        flex-wrap: wrap;
        margin: 30px 0;
      }

      .btn {
        font-family: "Patrick Hand", cursive;
        font-size: 1.2rem;
        padding: 12px 25px;
        border: 3px solid #2d3436;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
        position: relative;
        background: white;
      }

      .btn:hover {
        transform: translateY(-3px) rotate(-1deg);
        box-shadow: 4px 4px 0px rgba(0, 0, 0, 0.2);
      }

      .btn:active {
        transform: translateY(0);
        box-shadow: none;
      }

      .btn-primary {
        background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
        color: white;
        border-color: #0984e3;
      }

      .btn-success {
        background: linear-gradient(135deg, #55efc4 0%, #00b894 100%);
        color: white;
        border-color: #00b894;
      }

      .btn-danger {
        background: linear-gradient(135deg, #fab1a0 0%, #d63031 100%);
        color: white;
        border-color: #d63031;
      }

      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none !important;
      }

      .speed-control {
        display: flex;
        align-items: center;
        gap: 10px;
        font-family: "Patrick Hand", cursive;
        font-size: 1.1rem;
      }

      .speed-control input {
        width: 120px;
        accent-color: #0984e3;
      }

      /* Step info */
      .step-info {
        display: flex;
        justify-content: space-around;
        flex-wrap: wrap;
        gap: 20px;
        margin: 20px 0;
      }

      .step-box {
        background: white;
        border: 3px dashed #636e72;
        border-radius: 10px;
        padding: 15px 25px;
        text-align: center;
        min-width: 140px;
      }

      .step-box-label {
        font-family: "Patrick Hand", cursive;
        font-size: 1rem;
        color: #636e72;
        margin-bottom: 5px;
      }

      .step-box-value {
        font-family: "Caveat", cursive;
        font-size: 1.8rem;
        font-weight: 700;
      }

      .step-box-value.red {
        color: #d63031;
      }
      .step-box-value.purple {
        color: #6c5ce7;
      }
      .step-box-value.orange {
        color: #f39c12;
      }
      .step-box-value.blue {
        color: #0984e3;
      }
      .step-box-value.green {
        color: #00b894;
      }

      /* Explanation panel */
      .explanation-panel {
        background: rgba(255, 251, 235, 0.9);
        border: 3px solid #f39c12;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
        transform: rotate(0.3deg);
        box-shadow: 3px 3px 0px rgba(243, 156, 18, 0.3);
      }

      .explanation-title {
        font-family: "Caveat", cursive;
        font-size: 1.5rem;
        color: #e17055;
        margin-bottom: 10px;
      }

      .explanation-text {
        font-family: "Kalam", cursive;
        font-size: 1.2rem;
        color: #2d3436;
        line-height: 1.6;
      }

      /* Code panel */
      .code-panel {
        background: #2d3436;
        border-radius: 10px;
        padding: 20px;
        margin: 20px 0;
        overflow-x: auto;
        transform: rotate(-0.2deg);
        box-shadow: 5px 5px 0px rgba(0, 0, 0, 0.2);
      }

      .code-line {
        font-family: "Courier New", monospace;
        font-size: 0.95rem;
        color: #dfe6e9;
        padding: 4px 10px;
        border-radius: 3px;
        margin: 2px 0;
        transition: all 0.3s ease;
        white-space: pre;
      }

      .code-line.active {
        background: rgba(116, 185, 255, 0.3);
        border-left: 4px solid #74b9ff;
        color: #fff;
      }

      .code-keyword {
        color: #fd79a8;
      }
      .code-function {
        color: #74b9ff;
      }
      .code-variable {
        color: #55efc4;
      }
      .code-comment {
        color: #636e72;
        font-style: italic;
      }
      .code-operator {
        color: #ffeaa7;
      }
      .code-return {
        color: #fab1a0;
      }
      .code-type {
        color: #fdcb6e;
      }

      /* Result banner */
      .result-banner {
        display: none;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        margin: 20px 0;
        font-family: "Caveat", cursive;
        font-size: 2rem;
        animation: slideIn 0.5s ease;
      }

      @keyframes slideIn {
        from {
          transform: translateY(-20px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .result-banner.found {
        display: block;
        background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%);
        border: 4px solid #00b894;
        color: #00b894;
      }

      .result-banner.not-found {
        display: block;
        background: linear-gradient(135deg, #fab1a0 0%, #ff7675 100%);
        border: 4px solid #d63031;
        color: #d63031;
      }

      /* Complexity box */
      .complexity-box {
        background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%);
        border-radius: 10px;
        padding: 20px;
        color: white;
        margin: 20px 0;
        transform: rotate(0.5deg);
      }

      .complexity-title {
        font-family: "Caveat", cursive;
        font-size: 1.8rem;
        margin-bottom: 15px;
      }

      .complexity-content {
        display: flex;
        gap: 40px;
        flex-wrap: wrap;
      }

      .complexity-item {
        font-family: "Kalam", cursive;
        font-size: 1.2rem;
      }

      .complexity-item strong {
        font-family: "Caveat", cursive;
        font-size: 1.5rem;
      }

      /* Sticky note */
      .sticky-note {
        background: #fff9c4;
        padding: 15px;
        border-radius: 3px;
        box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.15);
        transform: rotate(-2deg);
        font-family: "Patrick Hand", cursive;
        font-size: 1.1rem;
        max-width: 280px;
        position: relative;
      }

      .sticky-note::before {
        content: "üìå";
        position: absolute;
        top: -10px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 1.5rem;
      }

      /* Legend */
      .legend {
        display: flex;
        gap: 30px;
        flex-wrap: wrap;
        justify-content: center;
        margin: 20px 0;
        padding: 15px;
        background: rgba(255, 255, 255, 0.7);
        border-radius: 10px;
        border: 2px dashed #b2bec3;
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: 8px;
        font-family: "Patrick Hand", cursive;
        font-size: 1.1rem;
      }

      .legend-color {
        width: 25px;
        height: 25px;
        border-radius: 5px;
        border: 2px solid #2d3436;
      }

      .legend-color.red {
        background: linear-gradient(135deg, #fff5f5 0%, #ffe3e3 100%);
        border-color: #d63031;
      }
      .legend-color.purple {
        background: linear-gradient(135deg, #f3f0ff 0%, #e5dbff 100%);
        border-color: #6c5ce7;
      }
      .legend-color.green {
        background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%);
        border-color: #00b894;
      }
      .legend-color.yellow {
        background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
        border-color: #f39c12;
      }

      /* Two column layout for comparison */
      .two-column {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin: 20px 0;
      }

      @media (max-width: 900px) {
        .two-column {
          grid-template-columns: 1fr;
        }
      }

      /* Advantage callout */
      .advantage-callout {
        background: linear-gradient(135deg, #55efc4 0%, #00b894 100%);
        border-radius: 10px;
        padding: 20px;
        color: white;
        margin: 20px 0;
        transform: rotate(-0.5deg);
      }

      .advantage-callout h3 {
        font-family: "Caveat", cursive;
        font-size: 1.8rem;
        margin-bottom: 10px;
      }

      .advantage-callout p {
        font-family: "Kalam", cursive;
        font-size: 1.1rem;
      }

      @media (max-width: 768px) {
        .title {
          font-size: 2.5rem;
        }
        .node {
          width: 50px;
          height: 50px;
          font-size: 1.2rem;
        }
        .controls {
          gap: 10px;
        }
        .btn {
          padding: 10px 15px;
          font-size: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="whiteboard">
      <div class="container">
        <h1 class="title">üóÇÔ∏è Hash Set Approach</h1>
        <p class="subtitle">
          Store List A in a Set, then look up each node from List B ‚Äî O(1)
          lookups!
        </p>

        <!-- Phase Indicator -->
        <div class="phase-indicator">
          <div class="phase-badge phase-1" id="phase1Badge">
            üì• Phase 1: Build Hash Set from List A
          </div>
          <div class="phase-badge phase-2" id="phase2Badge">
            üîç Phase 2: Search List B in Hash Set
          </div>
        </div>

        <!-- Legend -->
        <div class="legend">
          <div class="legend-item">
            <div class="legend-color red"></div>
            <span>List A (unique nodes)</span>
          </div>
          <div class="legend-item">
            <div class="legend-color purple"></div>
            <span>List B (unique nodes)</span>
          </div>
          <div class="legend-item">
            <div class="legend-color green"></div>
            <span>Shared nodes</span>
          </div>
          <div class="legend-item">
            <div class="legend-color yellow"></div>
            <span>Hash Set</span>
          </div>
        </div>

        <!-- Lists Visualization -->
        <div class="section-box">
          <div class="section-title">üìä The Linked Lists</div>

          <div class="lists-container">
            <div class="list-row">
              <span class="list-label list-a-label">List A:</span>
              <div
                class="node node-a"
                data-list="a"
                data-index="0"
                data-id="A0"
              >
                4<span class="checkmark">‚úì</span>
              </div>
              <div class="arrow"></div>
              <div
                class="node node-a"
                data-list="a"
                data-index="1"
                data-id="A1"
              >
                1<span class="checkmark">‚úì</span>
              </div>
              <div class="arrow"></div>
              <div
                class="node node-shared"
                data-list="a"
                data-index="2"
                data-id="C0"
              >
                8<span class="checkmark">‚úì</span>
              </div>
              <div class="arrow"></div>
              <div
                class="node node-shared"
                data-list="a"
                data-index="3"
                data-id="C1"
              >
                4<span class="checkmark">‚úì</span>
              </div>
              <div class="arrow"></div>
              <div
                class="node node-shared"
                data-list="a"
                data-index="4"
                data-id="C2"
              >
                5<span class="checkmark">‚úì</span>
              </div>
              <div class="arrow"></div>
              <span
                style="font-family: 'Kalam'; font-size: 1.2rem; color: #636e72"
                >null</span
              >
            </div>

            <div class="list-row">
              <span class="list-label list-b-label">List B:</span>
              <div
                class="node node-b"
                data-list="b"
                data-index="0"
                data-id="B0"
              >
                5<span class="checkmark">‚úì</span>
              </div>
              <div class="arrow"></div>
              <div
                class="node node-b"
                data-list="b"
                data-index="1"
                data-id="B1"
              >
                6<span class="checkmark">‚úì</span>
              </div>
              <div class="arrow"></div>
              <div
                class="node node-b"
                data-list="b"
                data-index="2"
                data-id="B2"
              >
                1<span class="checkmark">‚úì</span>
              </div>
              <div class="arrow"></div>
              <div
                class="node node-shared"
                data-list="b"
                data-index="3"
                data-id="C0"
              >
                8<span class="checkmark">‚úì</span>
              </div>
              <div class="arrow"></div>
              <div
                class="node node-shared"
                data-list="b"
                data-index="4"
                data-id="C1"
              >
                4<span class="checkmark">‚úì</span>
              </div>
              <div class="arrow"></div>
              <div
                class="node node-shared"
                data-list="b"
                data-index="5"
                data-id="C2"
              >
                5<span class="checkmark">‚úì</span>
              </div>
              <div class="arrow"></div>
              <span
                style="font-family: 'Kalam'; font-size: 1.2rem; color: #636e72"
                >null</span
              >
            </div>
          </div>

          <!-- Hash Set Visual -->
          <div class="hashset-container">
            <div class="hashset-visual">
              <div class="hashset-label">üóÑÔ∏è Hash Set (visitedNodes)</div>
              <div class="hashset-content" id="hashsetContent">
                <span class="hashset-empty"
                  >Empty ‚Äî nodes will be added here...</span
                >
              </div>
            </div>
          </div>

          <div
            class="sticky-note"
            style="margin: 20px auto; text-align: center"
          >
            üí° We store node REFERENCES (memory addresses), not values!<br />
            Hash Set gives us O(1) lookup time.
          </div>
        </div>

        <!-- Controls -->
        <div class="controls">
          <button class="btn btn-primary" id="startBtn" onclick="start()">
            ‚ñ∂Ô∏è Start
          </button>
          <button
            class="btn btn-success"
            id="stepBtn"
            onclick="step()"
            disabled
          >
            ‚è≠Ô∏è Next Step
          </button>
          <button
            class="btn btn-primary"
            id="autoBtn"
            onclick="toggleAuto()"
            disabled
          >
            üîÑ Auto Play
          </button>
          <button class="btn btn-danger" id="resetBtn" onclick="reset()">
            üîÑ Reset
          </button>
          <div class="speed-control">
            <label>Speed:</label>
            <input
              type="range"
              id="speedSlider"
              min="100"
              max="1500"
              value="600"
              onchange="updateSpeed()"
            />
            <span id="speedLabel">600ms</span>
          </div>
        </div>

        <!-- Step Information -->
        <div class="step-info">
          <div class="step-box">
            <div class="step-box-label">Current Phase</div>
            <div class="step-box-value blue" id="phaseDisplay">‚Äî</div>
          </div>
          <div class="step-box">
            <div class="step-box-label">Current Node</div>
            <div class="step-box-value purple" id="currentNodeDisplay">‚Äî</div>
          </div>
          <div class="step-box">
            <div class="step-box-label">Set Size</div>
            <div class="step-box-value orange" id="setSizeDisplay">0</div>
          </div>
          <div class="step-box">
            <div class="step-box-label">Operations</div>
            <div class="step-box-value blue" id="operationsDisplay">0</div>
          </div>
          <div class="step-box">
            <div class="step-box-label">Status</div>
            <div class="step-box-value green" id="statusDisplay">Ready</div>
          </div>
        </div>

        <!-- Explanation Panel -->
        <div class="explanation-panel">
          <div class="explanation-title">üìù What's Happening:</div>
          <div class="explanation-text" id="explanationText">
            Click "Start" to begin the Hash Set algorithm. We'll first store all
            nodes from List A into a Hash Set, then check each node in List B to
            see if it exists in the Set.
          </div>
        </div>

        <!-- Code Panel -->
        <div class="section-box">
          <div class="section-title">üíª Algorithm Code</div>
          <div class="code-panel">
            <div class="code-line" data-line="1">
              <span class="code-keyword">function</span>
              <span class="code-function">getIntersectionNode</span>(headA,
              headB) {
            </div>
            <div class="code-line" data-line="2">
              <span class="code-keyword">const</span>
              <span class="code-variable">visitedNodes</span> =
              <span class="code-keyword">new</span>
              <span class="code-type">Set</span>();
            </div>
            <div class="code-line" data-line="3"></div>
            <div class="code-line" data-line="4">
              <span class="code-comment"
                >// Phase 1: Store all nodes from List A</span
              >
            </div>
            <div class="code-line" data-line="5">
              <span class="code-keyword">let</span>
              <span class="code-variable">current</span> = headA;
            </div>
            <div class="code-line" data-line="6">
              <span class="code-keyword">while</span> (<span
                class="code-variable"
                >current</span
              >
              <span class="code-operator">!==</span>
              <span class="code-keyword">null</span>) {
            </div>
            <div class="code-line" data-line="7">
              <span class="code-variable">visitedNodes</span>.<span
                class="code-function"
                >add</span
              >(<span class="code-variable">current</span>);
              <span class="code-comment">// Store reference</span>
            </div>
            <div class="code-line" data-line="8">
              <span class="code-variable">current</span> =
              <span class="code-variable">current</span>.next;
            </div>
            <div class="code-line" data-line="9">}</div>
            <div class="code-line" data-line="10"></div>
            <div class="code-line" data-line="11">
              <span class="code-comment"
                >// Phase 2: Check each node in List B</span
              >
            </div>
            <div class="code-line" data-line="12">
              <span class="code-variable">current</span> = headB;
            </div>
            <div class="code-line" data-line="13">
              <span class="code-keyword">while</span> (<span
                class="code-variable"
                >current</span
              >
              <span class="code-operator">!==</span>
              <span class="code-keyword">null</span>) {
            </div>
            <div class="code-line" data-line="14">
              <span class="code-keyword">if</span> (<span class="code-variable"
                >visitedNodes</span
              >.<span class="code-function">has</span>(<span
                class="code-variable"
                >current</span
              >)) { <span class="code-comment">// O(1) lookup!</span>
            </div>
            <div class="code-line" data-line="15">
              <span class="code-return">return</span>
              <span class="code-variable">current</span>;
            </div>
            <div class="code-line" data-line="16">}</div>
            <div class="code-line" data-line="17">
              <span class="code-variable">current</span> =
              <span class="code-variable">current</span>.next;
            </div>
            <div class="code-line" data-line="18">}</div>
            <div class="code-line" data-line="19"></div>
            <div class="code-line" data-line="20">
              <span class="code-return">return</span>
              <span class="code-keyword">null</span>;
            </div>
            <div class="code-line" data-line="21">}</div>
          </div>
        </div>

        <!-- Result Banner -->
        <div class="result-banner" id="resultBanner"></div>

        <!-- Advantage Callout -->
        <div class="advantage-callout">
          <h3>üöÄ Why Hash Set is Better than Brute Force</h3>
          <p>
            <strong>Brute Force:</strong> For each node in A, scan ALL of B ‚Üí
            O(m √ó n) comparisons<br />
            <strong>Hash Set:</strong> Store A once, then O(1) lookup for each B
            node ‚Üí O(m + n) operations<br /><br />
            With m=5 and n=6: Brute Force = up to 30 comparisons, Hash Set = 11
            operations!
          </p>
        </div>

        <!-- Complexity Box -->
        <div class="complexity-box">
          <div class="complexity-title">‚è±Ô∏è Complexity Analysis</div>
          <div class="complexity-content">
            <div class="complexity-item">
              <strong>Time: O(m + n)</strong><br />
              Traverse A once (m), traverse B once (n), each set operation is
              O(1)
            </div>
            <div class="complexity-item">
              <strong>Space: O(m)</strong><br />
              Store all m nodes from List A in the Hash Set
            </div>
            <div class="complexity-item">
              <strong>Trade-off:</strong><br />
              We sacrifice O(m) space to gain O(m√ón) ‚Üí O(m+n) time
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // List structures
      const listA = [
        { val: 4, shared: false, id: "A0" },
        { val: 1, shared: false, id: "A1" },
        { val: 8, shared: true, id: "C0" },
        { val: 4, shared: true, id: "C1" },
        { val: 5, shared: true, id: "C2" },
      ];

      const listB = [
        { val: 5, shared: false, id: "B0" },
        { val: 6, shared: false, id: "B1" },
        { val: 1, shared: false, id: "B2" },
        { val: 8, shared: true, id: "C0" },
        { val: 4, shared: true, id: "C1" },
        { val: 5, shared: true, id: "C2" },
      ];

      let phase = 0; // 0: not started, 1: building set, 2: checking B
      let currentIndex = 0;
      let hashSet = new Set();
      let hashSetDisplay = [];
      let operations = 0;
      let isRunning = false;
      let autoPlayInterval = null;
      let speed = 600;
      let found = false;

      function updateSpeed() {
        speed = parseInt(document.getElementById("speedSlider").value);
        document.getElementById("speedLabel").textContent = speed + "ms";
      }

      function start() {
        document.getElementById("startBtn").disabled = true;
        document.getElementById("stepBtn").disabled = false;
        document.getElementById("autoBtn").disabled = false;
        isRunning = true;
        phase = 1;
        currentIndex = 0;
        updatePhaseIndicator();
        highlightCode(2, 5);
        setExplanation(
          "Phase 1: We create an empty Hash Set and start traversing List A. We'll add each node's reference to the Set."
        );
        document.getElementById("phaseDisplay").textContent = "Build Set";
        document.getElementById("statusDisplay").textContent = "Running";
      }

      function step() {
        if (found || !isRunning) return;

        clearHighlights();

        if (phase === 1) {
          // Phase 1: Building hash set from List A
          if (currentIndex < listA.length) {
            const node = listA[currentIndex];

            // Highlight current node
            highlightNode("a", currentIndex, "highlight highlight-a");

            // Add to hash set
            hashSet.add(node.id);
            hashSetDisplay.push({ id: node.id, val: node.val });
            operations++;

            // Mark node as in set
            markNodeInSet("a", currentIndex);

            // Update hash set display
            updateHashSetDisplay();

            highlightCode(6, 7, 8);
            setExplanation(
              `Adding node A[${currentIndex}] (id: ${node.id}, val: ${node.val}) to the Hash Set. Set.add() is O(1) operation.`
            );

            document.getElementById(
              "currentNodeDisplay"
            ).textContent = `A[${currentIndex}] = ${node.val}`;

            currentIndex++;

            if (currentIndex >= listA.length) {
              // Transition to phase 2
              setTimeout(() => {
                phase = 2;
                currentIndex = 0;
                updatePhaseIndicator();
                highlightCode(11, 12);
                setExplanation(
                  "Phase 1 complete! Hash Set now contains all 5 nodes from List A. Moving to Phase 2: Check each node in List B against the Set."
                );
                document.getElementById("phaseDisplay").textContent =
                  "Search B";
              }, speed / 2);
            }
          }
        } else if (phase === 2) {
          // Phase 2: Checking List B against hash set
          if (currentIndex < listB.length) {
            const node = listB[currentIndex];

            // Highlight current node in B
            highlightNode("b", currentIndex, "highlight highlight-b");

            operations++;

            // Check if in hash set
            const inSet = hashSet.has(node.id);

            document.getElementById(
              "currentNodeDisplay"
            ).textContent = `B[${currentIndex}] = ${node.val}`;

            if (inSet) {
              // Found intersection!
              found = true;
              highlightCode(14, 15);

              // Highlight the matching item in hash set
              highlightHashSetItem(node.id);

              // Highlight both nodes as found
              highlightNode("b", currentIndex, "found");

              // Find and highlight the corresponding node in A
              const aIndex = listA.findIndex((n) => n.id === node.id);
              if (aIndex !== -1) {
                highlightNode("a", aIndex, "found");
              }

              setExplanation(
                `üéâ FOUND! Node B[${currentIndex}] (id: ${node.id}, val: ${node.val}) EXISTS in the Hash Set! This is the intersection point. Set.has() is O(1).`
              );
              document.getElementById("statusDisplay").textContent = "Found!";
              showResult(true, node.val);
              stopAuto();
              document.getElementById("stepBtn").disabled = true;
              document.getElementById("autoBtn").disabled = true;
              updateDisplay();
              return;
            } else {
              // Not in set
              highlightCode(13, 14, 17);
              setExplanation(
                `Checking B[${currentIndex}] (id: ${node.id}, val: ${node.val}). Not in Hash Set! ‚ùå Set.has() returns false in O(1). Moving to next node.`
              );
              markNodeChecked("b", currentIndex);
            }

            currentIndex++;

            if (currentIndex >= listB.length && !found) {
              // No intersection found
              found = true;
              highlightCode(20);
              setExplanation(
                "Exhausted all nodes in List B. None were found in the Hash Set. Return null - no intersection."
              );
              document.getElementById("statusDisplay").textContent =
                "Not Found";
              showResult(false);
              stopAuto();
              document.getElementById("stepBtn").disabled = true;
              document.getElementById("autoBtn").disabled = true;
            }
          }
        }

        updateDisplay();
      }

      function highlightNode(list, index, className) {
        const node = document.querySelector(
          `.node[data-list="${list}"][data-index="${index}"]`
        );
        if (node) {
          className.split(" ").forEach((cls) => node.classList.add(cls));
        }
      }

      function markNodeInSet(list, index) {
        const node = document.querySelector(
          `.node[data-list="${list}"][data-index="${index}"]`
        );
        if (node) {
          node.classList.add("in-set", "added-to-set");
          setTimeout(() => node.classList.remove("added-to-set"), 300);
        }
      }

      function markNodeChecked(list, index) {
        const node = document.querySelector(
          `.node[data-list="${list}"][data-index="${index}"]`
        );
        if (node) {
          node.classList.add("checked");
        }
      }

      function clearHighlights() {
        document.querySelectorAll(".node").forEach((node) => {
          node.classList.remove(
            "highlight",
            "highlight-a",
            "highlight-b",
            "found",
            "added-to-set"
          );
        });
        document.querySelectorAll(".hashset-item").forEach((item) => {
          item.classList.remove("highlight");
        });
      }

      function highlightCode(...lines) {
        document.querySelectorAll(".code-line").forEach((line) => {
          line.classList.remove("active");
        });
        lines.forEach((lineNum) => {
          const line = document.querySelector(
            `.code-line[data-line="${lineNum}"]`
          );
          if (line) line.classList.add("active");
        });
      }

      function updatePhaseIndicator() {
        document
          .getElementById("phase1Badge")
          .classList.toggle("active", phase === 1);
        document
          .getElementById("phase2Badge")
          .classList.toggle("active", phase === 2);
      }

      function updateHashSetDisplay() {
        const container = document.getElementById("hashsetContent");

        if (hashSetDisplay.length === 0) {
          container.innerHTML =
            '<span class="hashset-empty">Empty ‚Äî nodes will be added here...</span>';
          return;
        }

        container.innerHTML = hashSetDisplay
          .map(
            (item) => `
                <div class="hashset-item" data-id="${item.id}">
                    <span style="font-weight: bold;">${item.val}</span>
                    <span class="node-ref">(${item.id})</span>
                </div>
            `
          )
          .join("");
      }

      function highlightHashSetItem(id) {
        const item = document.querySelector(`.hashset-item[data-id="${id}"]`);
        if (item) {
          item.classList.add("highlight");
        }
      }

      function updateDisplay() {
        document.getElementById("setSizeDisplay").textContent = hashSet.size;
        document.getElementById("operationsDisplay").textContent = operations;
      }

      function setExplanation(text) {
        document.getElementById("explanationText").textContent = text;
      }

      function showResult(wasFound, value = null) {
        const banner = document.getElementById("resultBanner");
        if (wasFound) {
          banner.className = "result-banner found";
          banner.textContent = `‚úÖ Intersection found at node with value ${value}! Total operations: ${operations}`;
        } else {
          banner.className = "result-banner not-found";
          banner.textContent = `‚ùå No intersection found. Total operations: ${operations}`;
        }
      }

      function toggleAuto() {
        if (autoPlayInterval) {
          stopAuto();
        } else {
          startAuto();
        }
      }

      function startAuto() {
        document.getElementById("autoBtn").textContent = "‚è∏Ô∏è Pause";
        document.getElementById("stepBtn").disabled = true;
        autoPlayInterval = setInterval(() => {
          if (found) {
            stopAuto();
          } else {
            step();
          }
        }, speed);
      }

      function stopAuto() {
        if (autoPlayInterval) {
          clearInterval(autoPlayInterval);
          autoPlayInterval = null;
        }
        document.getElementById("autoBtn").textContent = "üîÑ Auto Play";
        if (!found) {
          document.getElementById("stepBtn").disabled = false;
        }
      }

      function reset() {
        stopAuto();
        found = false;
        phase = 0;
        currentIndex = 0;
        hashSet.clear();
        hashSetDisplay = [];
        operations = 0;

        // Clear all node states
        document.querySelectorAll(".node").forEach((node) => {
          node.classList.remove(
            "highlight",
            "highlight-a",
            "highlight-b",
            "found",
            "in-set",
            "added-to-set",
            "checked"
          );
        });

        document
          .querySelectorAll(".code-line")
          .forEach((line) => line.classList.remove("active"));

        document.getElementById("startBtn").disabled = false;
        document.getElementById("stepBtn").disabled = true;
        document.getElementById("autoBtn").disabled = true;

        document.getElementById("phaseDisplay").textContent = "‚Äî";
        document.getElementById("currentNodeDisplay").textContent = "‚Äî";
        document.getElementById("setSizeDisplay").textContent = "0";
        document.getElementById("operationsDisplay").textContent = "0";
        document.getElementById("statusDisplay").textContent = "Ready";

        document.getElementById("hashsetContent").innerHTML =
          '<span class="hashset-empty">Empty ‚Äî nodes will be added here...</span>';

        document.getElementById("resultBanner").className = "result-banner";
        document.getElementById("resultBanner").style.display = "none";

        document.getElementById("phase1Badge").classList.remove("active");
        document.getElementById("phase2Badge").classList.remove("active");

        setExplanation(
          "Click 'Start' to begin the Hash Set algorithm. We'll first store all nodes from List A into a Hash Set, then check each node in List B to see if it exists in the Set."
        );

        isRunning = false;
      }
    </script>
  </body>
</html>
