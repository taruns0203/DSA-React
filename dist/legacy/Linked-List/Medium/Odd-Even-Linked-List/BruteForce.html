<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Odd-Even Linked List - Brute Force Whiteboard</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;500;600;700&family=Patrick+Hand&family=Kalam:wght@300;400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Kalam", cursive;
        min-height: 100vh;
        overflow-x: hidden;
      }

      /* Whiteboard texture background */
      .whiteboard {
        background: linear-gradient(
          135deg,
          #f8f9fa 0%,
          #e9ecef 50%,
          #f1f3f4 100%
        );
        background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h100v100H0z' fill='none'/%3E%3Cpath d='M0 50h100M50 0v100' stroke='%23dee2e6' stroke-width='0.5' stroke-dasharray='2,4'/%3E%3C/svg%3E");
        min-height: 100vh;
        padding: 20px;
        position: relative;
      }

      /* Whiteboard frame */
      .whiteboard::before {
        content: "";
        position: absolute;
        top: 10px;
        left: 10px;
        right: 10px;
        bottom: 10px;
        border: 8px solid #8b7355;
        border-radius: 4px;
        pointer-events: none;
        box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.1),
          0 4px 20px rgba(0, 0, 0, 0.2);
      }

      /* Marker tray */
      .marker-tray {
        position: fixed;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%);
        background: linear-gradient(180deg, #d4a574 0%, #8b7355 100%);
        padding: 8px 30px;
        border-radius: 8px 8px 0 0;
        display: flex;
        gap: 15px;
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.2);
        z-index: 100;
      }

      .marker {
        width: 12px;
        height: 50px;
        border-radius: 3px 3px 6px 6px;
        cursor: pointer;
        transition: transform 0.2s;
      }

      .marker:hover {
        transform: translateY(-5px);
      }

      .marker.red {
        background: linear-gradient(180deg, #e63946 0%, #c1121f 100%);
      }
      .marker.blue {
        background: linear-gradient(180deg, #4361ee 0%, #3a0ca3 100%);
      }
      .marker.green {
        background: linear-gradient(180deg, #2a9d8f 0%, #1d6a5f 100%);
      }
      .marker.black {
        background: linear-gradient(180deg, #333 0%, #111 100%);
      }
      .marker.orange {
        background: linear-gradient(180deg, #f77f00 0%, #d62828 100%);
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 30px 40px 100px;
        position: relative;
        z-index: 1;
      }

      /* Handwritten title */
      .title {
        font-family: "Caveat", cursive;
        font-size: 3.2rem;
        font-weight: 700;
        color: #2d3436;
        text-align: center;
        margin-bottom: 8px;
        text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.1);
        transform: rotate(-1deg);
      }

      .subtitle {
        font-family: "Patrick Hand", cursive;
        font-size: 1.4rem;
        color: #e63946;
        text-align: center;
        margin-bottom: 30px;
        transform: rotate(0.5deg);
      }

      /* Underline sketch effect */
      .title::after {
        content: "";
        display: block;
        width: 300px;
        height: 4px;
        background: linear-gradient(
          90deg,
          transparent,
          #4361ee,
          #4361ee,
          transparent
        );
        margin: 5px auto;
        border-radius: 2px;
        transform: rotate(-0.5deg);
      }

      /* Problem statement box */
      .problem-box {
        background: #fffbeb;
        border: 3px solid #333;
        border-radius: 8px;
        padding: 20px 25px;
        margin-bottom: 30px;
        transform: rotate(-0.3deg);
        box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.1);
        position: relative;
      }

      .problem-box::before {
        content: "üìå";
        position: absolute;
        top: -15px;
        left: 20px;
        font-size: 1.5rem;
      }

      .problem-box h3 {
        font-family: "Caveat", cursive;
        font-size: 1.6rem;
        color: #e63946;
        margin-bottom: 10px;
      }

      .problem-box p {
        font-size: 1.1rem;
        color: #333;
        line-height: 1.6;
      }

      .example-input {
        font-family: "Kalam", cursive;
        background: #fff;
        border: 2px dashed #4361ee;
        padding: 10px 15px;
        border-radius: 5px;
        margin-top: 10px;
        display: inline-block;
      }

      /* Main visualization area */
      .viz-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin-bottom: 30px;
      }

      .section {
        background: rgba(255, 255, 255, 0.7);
        border: 3px solid #333;
        border-radius: 12px;
        padding: 20px;
        position: relative;
      }

      .section-title {
        font-family: "Caveat", cursive;
        font-size: 1.8rem;
        color: #4361ee;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .section-title .step-num {
        background: #4361ee;
        color: white;
        width: 35px;
        height: 35px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        font-weight: bold;
      }

      /* Linked list visualization */
      .linked-list {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-wrap: wrap;
        gap: 5px;
        padding: 20px 10px;
        min-height: 100px;
      }

      .node {
        display: flex;
        align-items: center;
        animation: nodeAppear 0.4s ease-out forwards;
        opacity: 0;
      }

      @keyframes nodeAppear {
        from {
          opacity: 0;
          transform: scale(0.5) translateY(-20px);
        }
        to {
          opacity: 1;
          transform: scale(1) translateY(0);
        }
      }

      .node-box {
        width: 55px;
        height: 55px;
        border: 3px solid #333;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: "Caveat", cursive;
        font-size: 1.8rem;
        font-weight: 700;
        position: relative;
        transition: all 0.3s ease;
        background: white;
      }

      .node-box.odd {
        background: linear-gradient(135deg, #a8e6cf 0%, #88d8b0 100%);
        border-color: #2a9d8f;
      }

      .node-box.even {
        background: linear-gradient(135deg, #ffd3b6 0%, #ffaaa5 100%);
        border-color: #e63946;
      }

      .node-box.highlight {
        transform: scale(1.15);
        box-shadow: 0 0 20px rgba(67, 97, 238, 0.5);
      }

      .node-index {
        position: absolute;
        top: -22px;
        left: 50%;
        transform: translateX(-50%);
        font-family: "Patrick Hand", cursive;
        font-size: 0.85rem;
        color: #666;
        background: #fff;
        padding: 2px 6px;
        border-radius: 4px;
        border: 1px solid #ccc;
      }

      .node-index.odd-idx {
        color: #2a9d8f;
        border-color: #2a9d8f;
      }

      .node-index.even-idx {
        color: #e63946;
        border-color: #e63946;
      }

      .arrow {
        font-size: 1.5rem;
        color: #333;
        margin: 0 2px;
      }

      .null-node {
        font-family: "Kalam", cursive;
        font-size: 1rem;
        color: #888;
        font-style: italic;
        padding: 5px 10px;
        border: 2px dashed #aaa;
        border-radius: 5px;
      }

      /* Arrays visualization */
      .arrays-section {
        grid-column: 1 / -1;
      }

      .arrays-container {
        display: flex;
        gap: 40px;
        justify-content: center;
        flex-wrap: wrap;
      }

      .array-wrapper {
        text-align: center;
      }

      .array-label {
        font-family: "Caveat", cursive;
        font-size: 1.5rem;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }

      .array-label.odd-label {
        color: #2a9d8f;
      }

      .array-label.even-label {
        color: #e63946;
      }

      .array-visual {
        display: flex;
        align-items: center;
        justify-content: center;
        background: white;
        border: 3px solid #333;
        border-radius: 8px;
        padding: 10px 15px;
        min-width: 200px;
        min-height: 60px;
      }

      .array-item {
        width: 45px;
        height: 45px;
        border: 2px solid #333;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: "Caveat", cursive;
        font-size: 1.6rem;
        font-weight: 700;
        margin: 0 2px;
        animation: itemPop 0.3s ease-out forwards;
      }

      @keyframes itemPop {
        from {
          transform: scale(0);
          opacity: 0;
        }
        50% {
          transform: scale(1.2);
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }

      .array-item.odd-item {
        background: linear-gradient(135deg, #a8e6cf 0%, #88d8b0 100%);
        border-color: #2a9d8f;
      }

      .array-item.even-item {
        background: linear-gradient(135deg, #ffd3b6 0%, #ffaaa5 100%);
        border-color: #e63946;
      }

      .empty-array {
        font-family: "Patrick Hand", cursive;
        color: #888;
        font-style: italic;
      }

      /* Controls */
      .controls {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin: 30px 0;
        flex-wrap: wrap;
      }

      .btn {
        font-family: "Patrick Hand", cursive;
        font-size: 1.2rem;
        padding: 12px 25px;
        border: 3px solid #333;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s;
        background: white;
        box-shadow: 3px 3px 0 rgba(0, 0, 0, 0.2);
      }

      .btn:hover {
        transform: translate(-2px, -2px);
        box-shadow: 5px 5px 0 rgba(0, 0, 0, 0.2);
      }

      .btn:active {
        transform: translate(1px, 1px);
        box-shadow: 1px 1px 0 rgba(0, 0, 0, 0.2);
      }

      .btn-primary {
        background: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
        color: white;
        border-color: #3a0ca3;
      }

      .btn-success {
        background: linear-gradient(135deg, #2a9d8f 0%, #1d6a5f 100%);
        color: white;
        border-color: #1d6a5f;
      }

      .btn-danger {
        background: linear-gradient(135deg, #e63946 0%, #c1121f 100%);
        color: white;
        border-color: #c1121f;
      }

      .btn-warning {
        background: linear-gradient(135deg, #f77f00 0%, #e36414 100%);
        color: white;
        border-color: #e36414;
      }

      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      /* Step explanation */
      .step-explanation {
        background: linear-gradient(135deg, #e8f4f8 0%, #d4e5ed 100%);
        border: 3px solid #4361ee;
        border-radius: 12px;
        padding: 20px 25px;
        margin: 20px 0;
        transform: rotate(0.3deg);
        position: relative;
      }

      .step-explanation::before {
        content: "üí°";
        position: absolute;
        top: -15px;
        right: 20px;
        font-size: 1.5rem;
      }

      .step-explanation h4 {
        font-family: "Caveat", cursive;
        font-size: 1.6rem;
        color: #4361ee;
        margin-bottom: 10px;
      }

      .step-explanation p {
        font-size: 1.1rem;
        color: #333;
        line-height: 1.6;
      }

      .highlight-text {
        background: #ffd60a;
        padding: 2px 6px;
        border-radius: 4px;
      }

      /* Code display */
      .code-section {
        background: #1e1e1e;
        border: 3px solid #333;
        border-radius: 12px;
        padding: 20px;
        margin: 20px 0;
        overflow-x: auto;
      }

      .code-section pre {
        font-family: "Fira Code", "Consolas", monospace;
        font-size: 0.95rem;
        color: #d4d4d4;
        line-height: 1.6;
        margin: 0;
      }

      .code-section .keyword {
        color: #569cd6;
      }
      .code-section .string {
        color: #ce9178;
      }
      .code-section .number {
        color: #b5cea8;
      }
      .code-section .comment {
        color: #6a9955;
      }
      .code-section .function {
        color: #dcdcaa;
      }
      .code-section .variable {
        color: #9cdcfe;
      }
      .code-section .highlight-line {
        background: rgba(255, 255, 0, 0.15);
        display: block;
        margin: 0 -20px;
        padding: 0 20px;
      }

      /* Current variable state */
      .var-state {
        display: flex;
        gap: 20px;
        justify-content: center;
        flex-wrap: wrap;
        margin: 15px 0;
      }

      .var-box {
        background: white;
        border: 2px solid #333;
        border-radius: 8px;
        padding: 10px 15px;
        text-align: center;
        min-width: 100px;
      }

      .var-name {
        font-family: "Fira Code", monospace;
        font-size: 0.9rem;
        color: #4361ee;
        margin-bottom: 5px;
      }

      .var-value {
        font-family: "Caveat", cursive;
        font-size: 1.5rem;
        font-weight: 700;
        color: #333;
      }

      /* Result section */
      .result-section {
        background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
        border: 3px solid #2a9d8f;
        border-radius: 12px;
        padding: 25px;
        margin-top: 20px;
        text-align: center;
        transform: rotate(-0.3deg);
      }

      .result-section h3 {
        font-family: "Caveat", cursive;
        font-size: 2rem;
        color: #1d6a5f;
        margin-bottom: 15px;
      }

      /* Complexity note */
      .complexity-note {
        background: #fff3cd;
        border: 3px solid #f77f00;
        border-radius: 12px;
        padding: 20px;
        margin-top: 20px;
        transform: rotate(0.5deg);
      }

      .complexity-note h4 {
        font-family: "Caveat", cursive;
        font-size: 1.5rem;
        color: #e36414;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .complexity-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-top: 10px;
      }

      .complexity-item {
        background: white;
        border: 2px solid #333;
        border-radius: 8px;
        padding: 12px;
        text-align: center;
      }

      .complexity-label {
        font-family: "Patrick Hand", cursive;
        font-size: 1rem;
        color: #666;
      }

      .complexity-value {
        font-family: "Caveat", cursive;
        font-size: 1.8rem;
        font-weight: 700;
        color: #e36414;
      }

      /* Legend */
      .legend {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin: 20px 0;
        flex-wrap: wrap;
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: 8px;
        font-family: "Patrick Hand", cursive;
        font-size: 1.1rem;
      }

      .legend-color {
        width: 25px;
        height: 25px;
        border-radius: 5px;
        border: 2px solid #333;
      }

      .legend-color.odd {
        background: linear-gradient(135deg, #a8e6cf 0%, #88d8b0 100%);
      }
      .legend-color.even {
        background: linear-gradient(135deg, #ffd3b6 0%, #ffaaa5 100%);
      }

      /* Responsive */
      @media (max-width: 900px) {
        .viz-container {
          grid-template-columns: 1fr;
        }

        .title {
          font-size: 2.5rem;
        }

        .arrays-container {
          flex-direction: column;
          align-items: center;
        }
      }

      /* Sketch decorations */
      .sketch-arrow {
        position: absolute;
        font-size: 2rem;
        color: #e63946;
        animation: bounce 1s ease-in-out infinite;
      }

      @keyframes bounce {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-5px);
        }
      }

      .doodle {
        position: absolute;
        font-size: 1.5rem;
        opacity: 0.3;
      }

      /* Progress indicator */
      .progress-bar {
        width: 100%;
        height: 8px;
        background: #ddd;
        border-radius: 4px;
        margin: 20px 0;
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #4361ee, #2a9d8f);
        border-radius: 4px;
        transition: width 0.3s ease;
      }

      .step-counter {
        text-align: center;
        font-family: "Patrick Hand", cursive;
        font-size: 1.2rem;
        color: #666;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <div class="whiteboard">
      <div class="container">
        <!-- Title -->
        <h1 class="title">Odd-Even Linked List</h1>
        <p class="subtitle">Brute-Force Approach ‚Äî Whiteboard Walkthrough</p>

        <!-- Legend -->
        <div class="legend">
          <div class="legend-item">
            <div class="legend-color odd"></div>
            <span>Odd Index (1, 3, 5...)</span>
          </div>
          <div class="legend-item">
            <div class="legend-color even"></div>
            <span>Even Index (2, 4, 6...)</span>
          </div>
        </div>

        <!-- Problem Statement -->
        <div class="problem-box">
          <h3>üéØ Problem Statement</h3>
          <p>
            Group all nodes with <strong>odd indices</strong> first, followed by
            nodes with <strong>even indices</strong>. Maintain relative order
            within each group!
          </p>
          <div class="example-input">
            <strong>Input:</strong> [1] ‚Üí [2] ‚Üí [3] ‚Üí [4] ‚Üí [5] ‚Üí null<br />
            <strong>Expected Output:</strong> [1] ‚Üí [3] ‚Üí [5] ‚Üí [2] ‚Üí [4] ‚Üí null
          </div>
        </div>

        <!-- Progress -->
        <div class="step-counter">
          Step <span id="currentStep">0</span> of <span id="totalSteps">7</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill" style="width: 0%"></div>
        </div>

        <!-- Controls -->
        <div class="controls">
          <button class="btn btn-danger" id="resetBtn">üîÑ Reset</button>
          <button class="btn btn-primary" id="prevBtn" disabled>
            ‚¨Ö Previous
          </button>
          <button class="btn btn-success" id="nextBtn">Next Step ‚û°</button>
          <button class="btn btn-warning" id="autoBtn">‚ñ∂ Auto Play</button>
        </div>

        <!-- Step Explanation -->
        <div class="step-explanation">
          <h4 id="stepTitle">üöÄ Ready to Start!</h4>
          <p id="stepDesc">
            Click "Next Step" to begin the brute-force algorithm visualization.
            We'll collect values into two arrays (odd & even), then overwrite
            the list.
          </p>
        </div>

        <!-- Variable State -->
        <div class="var-state" id="varState">
          <div class="var-box">
            <div class="var-name">index</div>
            <div class="var-value" id="varIndex">‚Äî</div>
          </div>
          <div class="var-box">
            <div class="var-name">current.val</div>
            <div class="var-value" id="varCurrent">‚Äî</div>
          </div>
          <div class="var-box">
            <div class="var-name">index % 2</div>
            <div class="var-value" id="varMod">‚Äî</div>
          </div>
        </div>

        <!-- Main Visualization -->
        <div class="viz-container">
          <!-- Original List -->
          <div class="section" style="grid-column: 1 / -1">
            <div class="section-title">
              <span class="step-num">1</span>
              Original Linked List
            </div>
            <div class="linked-list" id="originalList"></div>
          </div>

          <!-- Arrays Section -->
          <div class="section arrays-section">
            <div class="section-title">
              <span class="step-num">2</span>
              Collecting Values into Arrays
            </div>
            <div class="arrays-container">
              <div class="array-wrapper">
                <div class="array-label odd-label">üü¢ oddValues[ ]</div>
                <div class="array-visual" id="oddArray">
                  <span class="empty-array">empty</span>
                </div>
              </div>
              <div class="array-wrapper">
                <div class="array-label even-label">üî¥ evenValues[ ]</div>
                <div class="array-visual" id="evenArray">
                  <span class="empty-array">empty</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Result List -->
          <div class="section" style="grid-column: 1 / -1">
            <div class="section-title">
              <span class="step-num">3</span>
              Overwritten Result List
            </div>
            <div class="linked-list" id="resultList"></div>
          </div>
        </div>

        <!-- Code Display -->
        <div class="code-section">
          <pre id="codeDisplay">
<span class="keyword">function</span> <span class="function">oddEvenListBruteForce</span>(<span class="variable">head</span>) {
    <span class="keyword">const</span> <span class="variable">oddValues</span> = [];
    <span class="keyword">const</span> <span class="variable">evenValues</span> = [];
    <span class="keyword">let</span> <span class="variable">current</span> = <span class="variable">head</span>;
    <span class="keyword">let</span> <span class="variable">index</span> = <span class="number">1</span>;
    
    <span class="comment">// Phase 1: Collect values</span>
    <span class="keyword">while</span> (<span class="variable">current</span>) {
        <span class="keyword">if</span> (<span class="variable">index</span> % <span class="number">2</span> === <span class="number">1</span>) {
            <span class="variable">oddValues</span>.<span class="function">push</span>(<span class="variable">current</span>.<span class="variable">val</span>);
        } <span class="keyword">else</span> {
            <span class="variable">evenValues</span>.<span class="function">push</span>(<span class="variable">current</span>.<span class="variable">val</span>);
        }
        <span class="variable">current</span> = <span class="variable">current</span>.<span class="variable">next</span>;
        <span class="variable">index</span>++;
    }
    
    <span class="comment">// Phase 2: Overwrite list</span>
    <span class="variable">current</span> = <span class="variable">head</span>;
    <span class="keyword">for</span> (<span class="keyword">const</span> <span class="variable">val</span> <span class="keyword">of</span> <span class="variable">oddValues</span>) {
        <span class="variable">current</span>.<span class="variable">val</span> = <span class="variable">val</span>;
        <span class="variable">current</span> = <span class="variable">current</span>.<span class="variable">next</span>;
    }
    <span class="keyword">for</span> (<span class="keyword">const</span> <span class="variable">val</span> <span class="keyword">of</span> <span class="variable">evenValues</span>) {
        <span class="variable">current</span>.<span class="variable">val</span> = <span class="variable">val</span>;
        <span class="variable">current</span> = <span class="variable">current</span>.<span class="variable">next</span>;
    }
    
    <span class="keyword">return</span> <span class="variable">head</span>;
}</pre>
        </div>

        <!-- Complexity Note -->
        <div class="complexity-note">
          <h4>‚ö†Ô∏è Why This Approach is Suboptimal</h4>
          <p>
            This brute-force method uses <strong>O(n) extra space</strong> for
            the arrays, violating the problem's O(1) space constraint!
          </p>
          <div class="complexity-grid">
            <div class="complexity-item">
              <div class="complexity-label">Time Complexity</div>
              <div class="complexity-value">O(n)</div>
            </div>
            <div class="complexity-item">
              <div class="complexity-label">Space Complexity</div>
              <div class="complexity-value">O(n) ‚ùå</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Marker tray decoration -->
      <div class="marker-tray">
        <div class="marker red"></div>
        <div class="marker blue"></div>
        <div class="marker green"></div>
        <div class="marker black"></div>
        <div class="marker orange"></div>
      </div>
    </div>

    <script>
      // Animation state
      let currentStep = 0;
      let autoPlayInterval = null;
      const totalSteps = 12;

      // List data
      const listValues = [1, 2, 3, 4, 5];
      let oddValues = [];
      let evenValues = [];
      let resultValues = [];

      // Step definitions
      const steps = [
        {
          title: "üöÄ Initial State",
          desc: "Here's our input linked list: [1] ‚Üí [2] ‚Üí [3] ‚Üí [4] ‚Üí [5]. Each node has a <span class='highlight-text'>1-based index</span>. We'll iterate through and separate odd-indexed (1, 3, 5) from even-indexed (2, 4) nodes.",
          index: null,
          current: null,
          highlightNode: null,
          oddArr: [],
          evenArr: [],
          result: [],
          phase: "init",
        },
        {
          title: "üìç Step 1: Process Node at Index 1",
          desc: "index = 1, current.val = 1. Since <span class='highlight-text'>1 % 2 = 1</span> (odd), we push value 1 to oddValues array.",
          index: 1,
          current: 1,
          highlightNode: 0,
          oddArr: [1],
          evenArr: [],
          result: [],
          phase: "collect",
        },
        {
          title: "üìç Step 2: Process Node at Index 2",
          desc: "index = 2, current.val = 2. Since <span class='highlight-text'>2 % 2 = 0</span> (even), we push value 2 to evenValues array.",
          index: 2,
          current: 2,
          highlightNode: 1,
          oddArr: [1],
          evenArr: [2],
          result: [],
          phase: "collect",
        },
        {
          title: "üìç Step 3: Process Node at Index 3",
          desc: "index = 3, current.val = 3. Since <span class='highlight-text'>3 % 2 = 1</span> (odd), we push value 3 to oddValues array.",
          index: 3,
          current: 3,
          highlightNode: 2,
          oddArr: [1, 3],
          evenArr: [2],
          result: [],
          phase: "collect",
        },
        {
          title: "üìç Step 4: Process Node at Index 4",
          desc: "index = 4, current.val = 4. Since <span class='highlight-text'>4 % 2 = 0</span> (even), we push value 4 to evenValues array.",
          index: 4,
          current: 4,
          highlightNode: 3,
          oddArr: [1, 3],
          evenArr: [2, 4],
          result: [],
          phase: "collect",
        },
        {
          title: "üìç Step 5: Process Node at Index 5",
          desc: "index = 5, current.val = 5. Since <span class='highlight-text'>5 % 2 = 1</span> (odd), we push value 5 to oddValues array.",
          index: 5,
          current: 5,
          highlightNode: 4,
          oddArr: [1, 3, 5],
          evenArr: [2, 4],
          result: [],
          phase: "collect",
        },
        {
          title: "‚úÖ Collection Complete!",
          desc: "Phase 1 done! We've collected: <span class='highlight-text'>oddValues = [1, 3, 5]</span> and <span class='highlight-text'>evenValues = [2, 4]</span>. Now we'll overwrite the original list.",
          index: null,
          current: null,
          highlightNode: null,
          oddArr: [1, 3, 5],
          evenArr: [2, 4],
          result: [],
          phase: "transition",
        },
        {
          title: "‚úèÔ∏è Overwrite 1: Write 1 from oddValues",
          desc: "Starting Phase 2! Write oddValues[0] = 1 to position 1. Result so far: [1]",
          index: null,
          current: 1,
          highlightNode: 0,
          oddArr: [1, 3, 5],
          evenArr: [2, 4],
          result: [1],
          phase: "overwrite",
        },
        {
          title: "‚úèÔ∏è Overwrite 2: Write 3 from oddValues",
          desc: "Write oddValues[1] = 3 to position 2. Result so far: [1, 3]",
          index: null,
          current: 3,
          highlightNode: 1,
          oddArr: [1, 3, 5],
          evenArr: [2, 4],
          result: [1, 3],
          phase: "overwrite",
        },
        {
          title: "‚úèÔ∏è Overwrite 3: Write 5 from oddValues",
          desc: "Write oddValues[2] = 5 to position 3. Result so far: [1, 3, 5] ‚Äî all odd values placed!",
          index: null,
          current: 5,
          highlightNode: 2,
          oddArr: [1, 3, 5],
          evenArr: [2, 4],
          result: [1, 3, 5],
          phase: "overwrite",
        },
        {
          title: "‚úèÔ∏è Overwrite 4: Write 2 from evenValues",
          desc: "Now writing even values! Write evenValues[0] = 2 to position 4. Result so far: [1, 3, 5, 2]",
          index: null,
          current: 2,
          highlightNode: 3,
          oddArr: [1, 3, 5],
          evenArr: [2, 4],
          result: [1, 3, 5, 2],
          phase: "overwrite",
        },
        {
          title: "‚úèÔ∏è Overwrite 5: Write 4 from evenValues",
          desc: "Write evenValues[1] = 4 to position 5. Final result: [1, 3, 5, 2, 4]",
          index: null,
          current: 4,
          highlightNode: 4,
          oddArr: [1, 3, 5],
          evenArr: [2, 4],
          result: [1, 3, 5, 2, 4],
          phase: "overwrite",
        },
        {
          title: "üéâ Algorithm Complete!",
          desc: "Success! The list is now reordered: <span class='highlight-text'>[1, 3, 5, 2, 4]</span>. Odd-indexed values (1, 3, 5) come first, followed by even-indexed values (2, 4). Order within each group is preserved!",
          index: null,
          current: null,
          highlightNode: null,
          oddArr: [1, 3, 5],
          evenArr: [2, 4],
          result: [1, 3, 5, 2, 4],
          phase: "complete",
        },
      ];

      // DOM elements
      const originalListEl = document.getElementById("originalList");
      const oddArrayEl = document.getElementById("oddArray");
      const evenArrayEl = document.getElementById("evenArray");
      const resultListEl = document.getElementById("resultList");
      const stepTitleEl = document.getElementById("stepTitle");
      const stepDescEl = document.getElementById("stepDesc");
      const varIndexEl = document.getElementById("varIndex");
      const varCurrentEl = document.getElementById("varCurrent");
      const varModEl = document.getElementById("varMod");
      const progressFillEl = document.getElementById("progressFill");
      const currentStepEl = document.getElementById("currentStep");
      const totalStepsEl = document.getElementById("totalSteps");
      const nextBtn = document.getElementById("nextBtn");
      const prevBtn = document.getElementById("prevBtn");
      const resetBtn = document.getElementById("resetBtn");
      const autoBtn = document.getElementById("autoBtn");

      // Initialize
      totalStepsEl.textContent = steps.length - 1;
      renderStep(0);

      // Render linked list
      function renderLinkedList(
        container,
        values,
        highlightIdx = null,
        showIndices = true,
        colorByPosition = true
      ) {
        container.innerHTML = "";

        if (values.length === 0) {
          container.innerHTML = '<span class="null-node">empty list</span>';
          return;
        }

        values.forEach((val, idx) => {
          const nodeDiv = document.createElement("div");
          nodeDiv.className = "node";
          nodeDiv.style.animationDelay = `${idx * 0.1}s`;

          const isOdd = (idx + 1) % 2 === 1;
          const nodeClass = colorByPosition ? (isOdd ? "odd" : "even") : "";
          const highlightClass = highlightIdx === idx ? "highlight" : "";

          let indexHtml = "";
          if (showIndices) {
            const indexClass = isOdd ? "odd-idx" : "even-idx";
            indexHtml = `<span class="node-index ${indexClass}">${
              idx + 1
            }</span>`;
          }

          nodeDiv.innerHTML = `
                    <div class="node-box ${nodeClass} ${highlightClass}">
                        ${indexHtml}
                        ${val}
                    </div>
                    ${
                      idx < values.length - 1
                        ? '<span class="arrow">‚Üí</span>'
                        : '<span class="arrow">‚Üí</span><span class="null-node">null</span>'
                    }
                `;
          container.appendChild(nodeDiv);
        });
      }

      // Render array
      function renderArray(container, values, type) {
        if (values.length === 0) {
          container.innerHTML = '<span class="empty-array">empty</span>';
          return;
        }

        container.innerHTML = "";
        values.forEach((val, idx) => {
          const item = document.createElement("div");
          item.className = `array-item ${type}-item`;
          item.style.animationDelay = `${idx * 0.1}s`;
          item.textContent = val;
          container.appendChild(item);
        });
      }

      // Render current step
      function renderStep(stepIdx) {
        const step = steps[stepIdx];

        // Update text
        stepTitleEl.textContent = step.title;
        stepDescEl.innerHTML = step.desc;

        // Update variables
        varIndexEl.textContent = step.index !== null ? step.index : "‚Äî";
        varCurrentEl.textContent = step.current !== null ? step.current : "‚Äî";
        varModEl.textContent =
          step.index !== null
            ? step.index % 2 === 1
              ? "1 (odd)"
              : "0 (even)"
            : "‚Äî";

        // Update lists and arrays
        renderLinkedList(
          originalListEl,
          listValues,
          step.highlightNode,
          true,
          true
        );
        renderArray(oddArrayEl, step.oddArr, "odd");
        renderArray(evenArrayEl, step.evenArr, "even");

        if (step.result.length > 0) {
          renderLinkedList(
            resultListEl,
            step.result,
            step.highlightNode,
            false,
            false
          );
          // Color the result nodes properly
          const resultNodes = resultListEl.querySelectorAll(".node-box");
          step.result.forEach((val, idx) => {
            if (resultNodes[idx]) {
              // First 3 are from oddValues (green), last 2 from evenValues (red)
              if (idx < step.oddArr.length) {
                resultNodes[idx].classList.add("odd");
              } else {
                resultNodes[idx].classList.add("even");
              }
            }
          });
        } else {
          resultListEl.innerHTML =
            '<span class="null-node">waiting for Phase 2...</span>';
        }

        // Update progress
        const progress = (stepIdx / (steps.length - 1)) * 100;
        progressFillEl.style.width = `${progress}%`;
        currentStepEl.textContent = stepIdx;

        // Update buttons
        prevBtn.disabled = stepIdx === 0;
        nextBtn.disabled = stepIdx === steps.length - 1;
      }

      // Event handlers
      nextBtn.addEventListener("click", () => {
        if (currentStep < steps.length - 1) {
          currentStep++;
          renderStep(currentStep);
        }
      });

      prevBtn.addEventListener("click", () => {
        if (currentStep > 0) {
          currentStep--;
          renderStep(currentStep);
        }
      });

      resetBtn.addEventListener("click", () => {
        stopAutoPlay();
        currentStep = 0;
        renderStep(currentStep);
      });

      autoBtn.addEventListener("click", () => {
        if (autoPlayInterval) {
          stopAutoPlay();
        } else {
          startAutoPlay();
        }
      });

      function startAutoPlay() {
        autoBtn.textContent = "‚è∏ Pause";
        autoBtn.classList.remove("btn-warning");
        autoBtn.classList.add("btn-danger");

        autoPlayInterval = setInterval(() => {
          if (currentStep < steps.length - 1) {
            currentStep++;
            renderStep(currentStep);
          } else {
            stopAutoPlay();
          }
        }, 1500);
      }

      function stopAutoPlay() {
        autoBtn.textContent = "‚ñ∂ Auto Play";
        autoBtn.classList.remove("btn-danger");
        autoBtn.classList.add("btn-warning");

        if (autoPlayInterval) {
          clearInterval(autoPlayInterval);
          autoPlayInterval = null;
        }
      }

      // Keyboard navigation
      document.addEventListener("keydown", (e) => {
        if (e.key === "ArrowRight" && currentStep < steps.length - 1) {
          currentStep++;
          renderStep(currentStep);
        } else if (e.key === "ArrowLeft" && currentStep > 0) {
          currentStep--;
          renderStep(currentStep);
        } else if (e.key === " ") {
          e.preventDefault();
          if (autoPlayInterval) {
            stopAutoPlay();
          } else {
            startAutoPlay();
          }
        }
      });
    </script>
  </body>
</html>
